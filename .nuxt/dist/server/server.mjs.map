{"version":3,"file":"server.mjs","sources":["../../../virtual:nuxt:/Users/selie/Documents/Hacks/NuxtSupabaseApp/.nuxt/paths.mjs","../../../node_modules/nuxt/dist/app/nuxt.mjs","../../../node_modules/nuxt/dist/app/composables/error.mjs","../../../node_modules/nuxt/dist/app/composables/state.mjs","../../../node_modules/nuxt/dist/app/composables/router.mjs","../../../node_modules/nuxt/dist/head/runtime/composables.mjs","../../../node_modules/nuxt/dist/app/composables/ssr.mjs","../../../node_modules/nuxt/dist/app/composables/cookie.mjs","../../../node_modules/nuxt/dist/app/components/nuxt-link.mjs","../../../node_modules/defu/dist/defu.mjs","../../app.config.mjs","../../../virtual:nuxt:/Users/selie/Documents/Hacks/NuxtSupabaseApp/.nuxt/components.plugin.mjs","../../../node_modules/@vueuse/head/dist/index.mjs","../../../virtual:nuxt:/Users/selie/Documents/Hacks/NuxtSupabaseApp/.nuxt/nuxt.config.mjs","../../../node_modules/nuxt/dist/head/runtime/lib/vueuse-head.plugin.mjs","../../../virtual:nuxt:/Users/selie/Documents/Hacks/NuxtSupabaseApp/.nuxt/routes.mjs","../../../node_modules/nuxt/dist/pages/runtime/router.options.mjs","../../../virtual:nuxt:/Users/selie/Documents/Hacks/NuxtSupabaseApp/.nuxt/router.options.mjs","../../../node_modules/nuxt/dist/pages/runtime/validate.mjs","../../../virtual:nuxt:/Users/selie/Documents/Hacks/NuxtSupabaseApp/.nuxt/middleware.mjs","../../../node_modules/nuxt/dist/pages/runtime/router.mjs","../../../virtual:nuxt:/Users/selie/Documents/Hacks/NuxtSupabaseApp/.nuxt/color-mode-options.mjs","../../../node_modules/@nuxtjs/color-mode/dist/runtime/plugin.server.mjs","../../../node_modules/@nuxt/content/dist/runtime/plugins/ws.mjs","../../../node_modules/@nuxtjs/supabase/dist/runtime/composables/useSupabaseToken.mjs","../../../node_modules/@nuxtjs/supabase/dist/runtime/composables/useSupabaseUser.mjs","../../../node_modules/@nuxtjs/supabase/dist/runtime/utils/redirect.mjs","../../../node_modules/@nuxtjs/supabase/dist/runtime/plugins/auth-redirect.mjs","../../../node_modules/@supabase/functions-js/dist/module/helper.js","../../../node_modules/@supabase/functions-js/dist/module/types.js","../../../node_modules/@supabase/functions-js/dist/module/FunctionsClient.js","../../../node_modules/@supabase/postgrest-js/dist/module/PostgrestBuilder.js","../../../node_modules/@supabase/postgrest-js/dist/module/PostgrestTransformBuilder.js","../../../node_modules/@supabase/postgrest-js/dist/module/PostgrestFilterBuilder.js","../../../node_modules/@supabase/postgrest-js/dist/module/PostgrestQueryBuilder.js","../../../node_modules/@supabase/postgrest-js/dist/module/version.js","../../../node_modules/@supabase/postgrest-js/dist/module/constants.js","../../../node_modules/@supabase/postgrest-js/dist/module/PostgrestClient.js","../../../node_modules/websocket/lib/utils.js","../../../node_modules/websocket/lib/WebSocketFrame.js","../../../node_modules/websocket/vendor/FastBufferList.js","../../../node_modules/websocket/lib/WebSocketConnection.js","../../../node_modules/websocket/lib/WebSocketRequest.js","../../../node_modules/websocket/lib/WebSocketServer.js","../../../node_modules/websocket/lib/WebSocketClient.js","../../../node_modules/websocket/lib/WebSocketRouterRequest.js","../../../node_modules/websocket/lib/WebSocketRouter.js","../../../node_modules/websocket/lib/W3CWebSocket.js","../../../node_modules/websocket/lib/Deprecation.js","../../../node_modules/websocket/lib/version.js","../../../node_modules/websocket/lib/websocket.js","../../../node_modules/websocket/index.js","../../../node_modules/@supabase/realtime-js/dist/module/lib/version.js","../../../node_modules/@supabase/realtime-js/dist/module/lib/constants.js","../../../node_modules/@supabase/realtime-js/dist/module/lib/timer.js","../../../node_modules/@supabase/realtime-js/dist/module/lib/serializer.js","../../../node_modules/@supabase/realtime-js/dist/module/lib/push.js","../../../node_modules/@supabase/realtime-js/dist/module/RealtimePresence.js","../../../node_modules/@supabase/realtime-js/dist/module/lib/transformers.js","../../../node_modules/@supabase/realtime-js/dist/module/RealtimeChannel.js","../../../node_modules/@supabase/realtime-js/dist/module/RealtimeClient.js","../../../node_modules/@supabase/storage-js/dist/module/lib/errors.js","../../../node_modules/@supabase/storage-js/dist/module/lib/helpers.js","../../../node_modules/@supabase/storage-js/dist/module/lib/fetch.js","../../../node_modules/@supabase/storage-js/dist/module/packages/StorageFileApi.js","../../../node_modules/@supabase/storage-js/dist/module/lib/version.js","../../../node_modules/@supabase/storage-js/dist/module/lib/constants.js","../../../node_modules/@supabase/storage-js/dist/module/packages/StorageBucketApi.js","../../../node_modules/@supabase/storage-js/dist/module/StorageClient.js","../../../node_modules/@supabase/supabase-js/dist/module/lib/version.js","../../../node_modules/@supabase/supabase-js/dist/module/lib/constants.js","../../../node_modules/@supabase/supabase-js/dist/module/lib/fetch.js","../../../node_modules/@supabase/supabase-js/dist/module/lib/helpers.js","../../../node_modules/@supabase/gotrue-js/dist/module/lib/helpers.js","../../../node_modules/@supabase/gotrue-js/dist/module/lib/errors.js","../../../node_modules/@supabase/gotrue-js/dist/module/lib/fetch.js","../../../node_modules/@supabase/gotrue-js/dist/module/GoTrueAdminApi.js","../../../node_modules/@supabase/gotrue-js/dist/module/lib/version.js","../../../node_modules/@supabase/gotrue-js/dist/module/lib/constants.js","../../../node_modules/@supabase/gotrue-js/dist/module/lib/local-storage.js","../../../node_modules/@supabase/gotrue-js/dist/module/lib/polyfills.js","../../../node_modules/@supabase/gotrue-js/dist/module/GoTrueClient.js","../../../node_modules/@supabase/supabase-js/dist/module/lib/SupabaseAuthClient.js","../../../node_modules/@supabase/supabase-js/dist/module/SupabaseClient.js","../../../node_modules/@supabase/supabase-js/dist/module/index.js","../../../node_modules/@nuxtjs/supabase/dist/runtime/composables/useSupabaseClient.mjs","../../../node_modules/@nuxtjs/supabase/dist/runtime/plugins/supabase.server.mjs","../../../plugins/fontawesome.js","../../../virtual:nuxt:/Users/selie/Documents/Hacks/NuxtSupabaseApp/.nuxt/plugins/server.mjs","../../../node_modules/nuxt/dist/app/components/utils.mjs","../../../virtual:nuxt:/Users/selie/Documents/Hacks/NuxtSupabaseApp/.nuxt/layouts.mjs","../../../node_modules/nuxt/dist/app/components/layout.mjs","../../../node_modules/nuxt/dist/app/components/nuxt-loading-indicator.mjs","../../../node_modules/nuxt/dist/pages/runtime/utils.mjs","../../../node_modules/nuxt/dist/pages/runtime/page.mjs","../../../app.vue","../../../node_modules/nuxt/dist/app/components/nuxt-root.vue","../../../node_modules/nuxt/dist/app/entry.mjs"],"sourcesContent":["import { joinURL } from '/Users/selie/Documents/Hacks/NuxtSupabaseApp/node_modules/ufo/dist/index.mjs'\nimport { useRuntimeConfig } from '#internal/nitro'\nconst appConfig = useRuntimeConfig().app\nexport const baseURL = () => appConfig.baseURL\nexport const buildAssetsDir = () => appConfig.buildAssetsDir\nexport const buildAssetsURL = (...path) => joinURL(publicAssetsURL(), buildAssetsDir(), ...path)\nexport const publicAssetsURL = (...path) => {\n  const publicBase = appConfig.cdnURL || appConfig.baseURL\n  return path.length ? joinURL(publicBase, ...path) : publicBase\n}\nif (process.client) {\n  globalThis.__buildAssetsURL = buildAssetsURL\n  globalThis.__publicAssetsURL = publicAssetsURL\n}","import { getCurrentInstance, reactive } from \"vue\";\nimport { createHooks } from \"hookable\";\nimport { getContext } from \"unctx\";\nconst nuxtAppCtx = getContext(\"nuxt-app\");\nexport const NuxtPluginIndicator = \"__nuxt_plugin\";\nexport function createNuxtApp(options) {\n  let hydratingCount = 0;\n  const nuxtApp = {\n    provide: void 0,\n    globalName: \"nuxt\",\n    payload: reactive({\n      data: {},\n      state: {},\n      _errors: {},\n      ...process.client ? window.__NUXT__ : { serverRendered: true }\n    }),\n    static: {\n      data: {}\n    },\n    isHydrating: process.client,\n    deferHydration() {\n      if (!nuxtApp.isHydrating) {\n        return () => {\n        };\n      }\n      hydratingCount++;\n      let called = false;\n      return () => {\n        if (called) {\n          return;\n        }\n        called = true;\n        hydratingCount--;\n        if (hydratingCount === 0) {\n          nuxtApp.isHydrating = false;\n          return nuxtApp.callHook(\"app:suspense:resolve\");\n        }\n      };\n    },\n    _asyncDataPromises: {},\n    _asyncData: {},\n    ...options\n  };\n  nuxtApp.hooks = createHooks();\n  nuxtApp.hook = nuxtApp.hooks.hook;\n  nuxtApp.callHook = nuxtApp.hooks.callHook;\n  nuxtApp.provide = (name, value) => {\n    const $name = \"$\" + name;\n    defineGetter(nuxtApp, $name, value);\n    defineGetter(nuxtApp.vueApp.config.globalProperties, $name, value);\n  };\n  defineGetter(nuxtApp.vueApp, \"$nuxt\", nuxtApp);\n  defineGetter(nuxtApp.vueApp.config.globalProperties, \"$nuxt\", nuxtApp);\n  if (process.server) {\n    if (nuxtApp.ssrContext) {\n      nuxtApp.ssrContext.nuxt = nuxtApp;\n    }\n    nuxtApp.ssrContext = nuxtApp.ssrContext || {};\n    if (nuxtApp.ssrContext.payload) {\n      Object.assign(nuxtApp.payload, nuxtApp.ssrContext.payload);\n    }\n    nuxtApp.ssrContext.payload = nuxtApp.payload;\n    nuxtApp.payload.config = {\n      public: options.ssrContext.runtimeConfig.public,\n      app: options.ssrContext.runtimeConfig.app\n    };\n  }\n  const runtimeConfig = process.server ? options.ssrContext.runtimeConfig : reactive(nuxtApp.payload.config);\n  const compatibilityConfig = new Proxy(runtimeConfig, {\n    get(target, prop) {\n      if (prop === \"public\") {\n        return target.public;\n      }\n      return target[prop] ?? target.public[prop];\n    },\n    set(target, prop, value) {\n      if (process.server || prop === \"public\" || prop === \"app\") {\n        return false;\n      }\n      target[prop] = value;\n      target.public[prop] = value;\n      return true;\n    }\n  });\n  nuxtApp.provide(\"config\", compatibilityConfig);\n  return nuxtApp;\n}\nexport async function applyPlugin(nuxtApp, plugin) {\n  if (typeof plugin !== \"function\") {\n    return;\n  }\n  const { provide } = await callWithNuxt(nuxtApp, plugin, [nuxtApp]) || {};\n  if (provide && typeof provide === \"object\") {\n    for (const key in provide) {\n      nuxtApp.provide(key, provide[key]);\n    }\n  }\n}\nexport async function applyPlugins(nuxtApp, plugins) {\n  for (const plugin of plugins) {\n    await applyPlugin(nuxtApp, plugin);\n  }\n}\nexport function normalizePlugins(_plugins) {\n  const unwrappedPlugins = [];\n  const legacyInjectPlugins = [];\n  const invalidPlugins = [];\n  const plugins = _plugins.map((plugin) => {\n    if (typeof plugin !== \"function\") {\n      invalidPlugins.push(plugin);\n      return null;\n    }\n    if (plugin.length > 1) {\n      legacyInjectPlugins.push(plugin);\n      return (nuxtApp) => plugin(nuxtApp, nuxtApp.provide);\n    }\n    if (!isNuxtPlugin(plugin)) {\n      unwrappedPlugins.push(plugin);\n    }\n    return plugin;\n  }).filter(Boolean);\n  if (process.dev && legacyInjectPlugins.length) {\n    console.warn(\"[warn] [nuxt] You are using a plugin with legacy Nuxt 2 format (context, inject) which is likely to be broken. In the future they will be ignored:\", legacyInjectPlugins.map((p) => p.name || p).join(\",\"));\n  }\n  if (process.dev && invalidPlugins.length) {\n    console.warn(\"[warn] [nuxt] Some plugins are not exposing a function and skipped:\", invalidPlugins);\n  }\n  if (process.dev && unwrappedPlugins.length) {\n    console.warn(\"[warn] [nuxt] You are using a plugin that has not been wrapped in `defineNuxtPlugin`. It is advised to wrap your plugins as in the future this may enable enhancements:\", unwrappedPlugins.map((p) => p.name || p).join(\",\"));\n  }\n  return plugins;\n}\nexport function defineNuxtPlugin(plugin) {\n  plugin[NuxtPluginIndicator] = true;\n  return plugin;\n}\nexport function isNuxtPlugin(plugin) {\n  return typeof plugin === \"function\" && NuxtPluginIndicator in plugin;\n}\nexport function callWithNuxt(nuxt, setup, args) {\n  const fn = () => args ? setup(...args) : setup();\n  if (process.server) {\n    return nuxtAppCtx.callAsync(nuxt, fn);\n  } else {\n    nuxtAppCtx.set(nuxt);\n    return fn();\n  }\n}\nexport function useNuxtApp() {\n  const nuxtAppInstance = nuxtAppCtx.tryUse();\n  if (!nuxtAppInstance) {\n    const vm = getCurrentInstance();\n    if (!vm) {\n      throw new Error(\"nuxt instance unavailable\");\n    }\n    return vm.appContext.app.$nuxt;\n  }\n  return nuxtAppInstance;\n}\nexport function useRuntimeConfig() {\n  return useNuxtApp().$config;\n}\nfunction defineGetter(obj, key, val) {\n  Object.defineProperty(obj, key, { get: () => val });\n}\nexport function defineAppConfig(config) {\n  return config;\n}\n","import { createError as _createError } from \"h3\";\nimport { toRef } from \"vue\";\nimport { useNuxtApp } from \"../nuxt.mjs\";\nexport const useError = () => toRef(useNuxtApp().payload, \"error\");\nexport const showError = (_err) => {\n  const err = createError(_err);\n  try {\n    const nuxtApp = useNuxtApp();\n    nuxtApp.callHook(\"app:error\", err);\n    const error = useError();\n    error.value = error.value || err;\n  } catch {\n    throw err;\n  }\n  return err;\n};\nexport const clearError = async (options = {}) => {\n  const nuxtApp = useNuxtApp();\n  const error = useError();\n  nuxtApp.callHook(\"app:error:cleared\", options);\n  if (options.redirect) {\n    await nuxtApp.$router.replace(options.redirect);\n  }\n  error.value = null;\n};\nexport const isNuxtError = (err) => !!(err && typeof err === \"object\" && \"__nuxt_error\" in err);\nexport const createError = (err) => {\n  const _err = _createError(err);\n  _err.__nuxt_error = true;\n  return _err;\n};\n","import { isRef, toRef } from \"vue\";\nimport { useNuxtApp } from \"../nuxt.mjs\";\nexport function useState(...args) {\n  const autoKey = typeof args[args.length - 1] === \"string\" ? args.pop() : void 0;\n  if (typeof args[0] !== \"string\") {\n    args.unshift(autoKey);\n  }\n  const [_key, init] = args;\n  if (!_key || typeof _key !== \"string\") {\n    throw new TypeError(\"[nuxt] [useState] key must be a string: \" + _key);\n  }\n  if (init !== void 0 && typeof init !== \"function\") {\n    throw new Error(\"[nuxt] [useState] init must be a function: \" + init);\n  }\n  const key = \"$s\" + _key;\n  const nuxt = useNuxtApp();\n  const state = toRef(nuxt.payload.state, key);\n  if (state.value === void 0 && init) {\n    const initialValue = init();\n    if (isRef(initialValue)) {\n      nuxt.payload.state[key] = initialValue;\n      return initialValue;\n    }\n    state.value = initialValue;\n  }\n  return state;\n}\n","import { getCurrentInstance, inject, onUnmounted } from \"vue\";\nimport { sendRedirect } from \"h3\";\nimport { hasProtocol, joinURL, parseURL } from \"ufo\";\nimport { useNuxtApp, useRuntimeConfig } from \"../nuxt.mjs\";\nimport { createError } from \"./error.mjs\";\nimport { useState } from \"./state.mjs\";\nexport const useRouter = () => {\n  return useNuxtApp()?.$router;\n};\nexport const useRoute = () => {\n  if (getCurrentInstance()) {\n    return inject(\"_route\", useNuxtApp()._route);\n  }\n  return useNuxtApp()._route;\n};\nexport const onBeforeRouteLeave = (guard) => {\n  const unsubscribe = useRouter().beforeEach((to, from, next) => {\n    if (to === from) {\n      return;\n    }\n    return guard(to, from, next);\n  });\n  onUnmounted(unsubscribe);\n};\nexport const onBeforeRouteUpdate = (guard) => {\n  const unsubscribe = useRouter().beforeEach(guard);\n  onUnmounted(unsubscribe);\n};\nexport const defineNuxtRouteMiddleware = (middleware) => middleware;\nexport const addRouteMiddleware = (name, middleware, options = {}) => {\n  const nuxtApp = useNuxtApp();\n  if (options.global || typeof name === \"function\") {\n    nuxtApp._middleware.global.push(typeof name === \"function\" ? name : middleware);\n  } else {\n    nuxtApp._middleware.named[name] = middleware;\n  }\n};\nconst isProcessingMiddleware = () => {\n  try {\n    if (useNuxtApp()._processingMiddleware) {\n      return true;\n    }\n  } catch {\n    return true;\n  }\n  return false;\n};\nexport const navigateTo = (to, options) => {\n  if (!to) {\n    to = \"/\";\n  }\n  const toPath = typeof to === \"string\" ? to : to.path || \"/\";\n  const isExternal = hasProtocol(toPath, true);\n  if (isExternal && !options?.external) {\n    throw new Error(\"Navigating to external URL is not allowed by default. Use `nagivateTo (url, { external: true })`.\");\n  }\n  if (isExternal && parseURL(toPath).protocol === \"script:\") {\n    throw new Error(\"Cannot navigate to an URL with script protocol.\");\n  }\n  if (process.client && !isExternal && isProcessingMiddleware()) {\n    return to;\n  }\n  const router = useRouter();\n  if (process.server) {\n    const nuxtApp = useNuxtApp();\n    if (nuxtApp.ssrContext && nuxtApp.ssrContext.event) {\n      const redirectLocation = isExternal ? toPath : joinURL(useRuntimeConfig().app.baseURL, router.resolve(to).fullPath || \"/\");\n      return nuxtApp.callHook(\"app:redirected\").then(() => sendRedirect(nuxtApp.ssrContext.event, redirectLocation, options?.redirectCode || 302));\n    }\n  }\n  if (isExternal) {\n    if (options?.replace) {\n      location.replace(toPath);\n    } else {\n      location.href = toPath;\n    }\n    return Promise.resolve();\n  }\n  return options?.replace ? router.replace(to) : router.push(to);\n};\nexport const abortNavigation = (err) => {\n  if (process.dev && !isProcessingMiddleware()) {\n    throw new Error(\"abortNavigation() is only usable inside a route middleware handler.\");\n  }\n  if (err) {\n    throw createError(err);\n  }\n  return false;\n};\nexport const setPageLayout = (layout) => {\n  if (process.server) {\n    if (process.dev && getCurrentInstance() && useState(\"_layout\").value !== layout) {\n      console.warn(\"[warn] [nuxt] `setPageLayout` should not be called to change the layout on the server within a component as this will cause hydration errors.\");\n    }\n    useState(\"_layout\").value = layout;\n  }\n  const nuxtApp = useNuxtApp();\n  if (process.dev && nuxtApp.isHydrating && useState(\"_layout\").value !== layout) {\n    console.warn(\"[warn] [nuxt] `setPageLayout` should not be called to change the layout during hydration as this will cause hydration errors.\");\n  }\n  const inMiddleware = isProcessingMiddleware();\n  if (inMiddleware || process.server || nuxtApp.isHydrating) {\n    const unsubscribe = useRouter().beforeResolve((to) => {\n      to.meta.layout = layout;\n      unsubscribe();\n    });\n  }\n  if (!inMiddleware) {\n    useRoute().meta.layout = layout;\n  }\n};\n","import { useNuxtApp } from \"#app\";\nexport function useHead(input, options) {\n  return useNuxtApp()._useHead(input, options);\n}\n","import { useNuxtApp } from \"../nuxt.mjs\";\nexport function useRequestHeaders(include) {\n  if (process.client) {\n    return {};\n  }\n  const headers = useNuxtApp().ssrContext?.event.node.req.headers ?? {};\n  if (!include) {\n    return headers;\n  }\n  return Object.fromEntries(include.map((key) => key.toLowerCase()).filter((key) => headers[key]).map((key) => [key, headers[key]]));\n}\nexport function useRequestEvent(nuxtApp = useNuxtApp()) {\n  return nuxtApp.ssrContext?.event;\n}\nexport function setResponseStatus(code, message) {\n  const event = process.server && useRequestEvent();\n  if (event) {\n    event.node.res.statusCode = code;\n    if (message) {\n      event.node.res.statusMessage = message;\n    }\n  }\n}\n","import { ref, watch } from \"vue\";\nimport { parse, serialize } from \"cookie-es\";\nimport { appendHeader } from \"h3\";\nimport destr from \"destr\";\nimport { isEqual } from \"ohash\";\nimport { useNuxtApp } from \"../nuxt.mjs\";\nimport { useRequestEvent } from \"./ssr.mjs\";\nconst CookieDefaults = {\n  path: \"/\",\n  decode: (val) => destr(decodeURIComponent(val)),\n  encode: (val) => encodeURIComponent(typeof val === \"string\" ? val : JSON.stringify(val))\n};\nexport function useCookie(name, _opts) {\n  const opts = { ...CookieDefaults, ..._opts };\n  const cookies = readRawCookies(opts) || {};\n  const cookie = ref(cookies[name] ?? opts.default?.());\n  if (process.client) {\n    watch(cookie, () => {\n      writeClientCookie(name, cookie.value, opts);\n    });\n  } else if (process.server) {\n    const nuxtApp = useNuxtApp();\n    const writeFinalCookieValue = () => {\n      if (!isEqual(cookie.value, cookies[name])) {\n        writeServerCookie(useRequestEvent(nuxtApp), name, cookie.value, opts);\n      }\n    };\n    const unhook = nuxtApp.hooks.hookOnce(\"app:rendered\", writeFinalCookieValue);\n    nuxtApp.hooks.hookOnce(\"app:redirected\", () => {\n      unhook();\n      return writeFinalCookieValue();\n    });\n  }\n  return cookie;\n}\nfunction readRawCookies(opts = {}) {\n  if (process.server) {\n    return parse(useRequestEvent()?.req.headers.cookie || \"\", opts);\n  } else if (process.client) {\n    return parse(document.cookie, opts);\n  }\n}\nfunction serializeCookie(name, value, opts = {}) {\n  if (value === null || value === void 0) {\n    return serialize(name, value, { ...opts, maxAge: -1 });\n  }\n  return serialize(name, value, opts);\n}\nfunction writeClientCookie(name, value, opts = {}) {\n  if (process.client) {\n    document.cookie = serializeCookie(name, value, opts);\n  }\n}\nfunction writeServerCookie(event, name, value, opts = {}) {\n  if (event) {\n    appendHeader(event, \"Set-Cookie\", serializeCookie(name, value, opts));\n  }\n}\n","import { defineComponent, h, ref, resolveComponent, computed, onMounted, onBeforeUnmount } from \"vue\";\nimport { hasProtocol } from \"ufo\";\nimport { preloadRouteComponents } from \"../composables/preload.mjs\";\nimport { navigateTo, useRouter } from \"../composables/router.mjs\";\nimport { useNuxtApp } from \"../nuxt.mjs\";\nconst firstNonUndefined = (...args) => args.find((arg) => arg !== void 0);\nconst DEFAULT_EXTERNAL_REL_ATTRIBUTE = \"noopener noreferrer\";\nconst requestIdleCallback = process.server ? void 0 : globalThis.requestIdleCallback || ((cb) => {\n  const start = Date.now();\n  const idleDeadline = {\n    didTimeout: false,\n    timeRemaining: () => Math.max(0, 50 - (Date.now() - start))\n  };\n  return setTimeout(() => {\n    cb(idleDeadline);\n  }, 1);\n});\nconst cancelIdleCallback = process.server ? null : globalThis.cancelIdleCallback || ((id) => {\n  clearTimeout(id);\n});\nexport function defineNuxtLink(options) {\n  const componentName = options.componentName || \"NuxtLink\";\n  const checkPropConflicts = (props, main, sub) => {\n    if (process.dev && props[main] !== void 0 && props[sub] !== void 0) {\n      console.warn(`[${componentName}] \\`${main}\\` and \\`${sub}\\` cannot be used together. \\`${sub}\\` will be ignored.`);\n    }\n  };\n  return defineComponent({\n    name: componentName,\n    props: {\n      to: {\n        type: [String, Object],\n        default: void 0,\n        required: false\n      },\n      href: {\n        type: [String, Object],\n        default: void 0,\n        required: false\n      },\n      target: {\n        type: String,\n        default: void 0,\n        required: false\n      },\n      rel: {\n        type: String,\n        default: void 0,\n        required: false\n      },\n      noRel: {\n        type: Boolean,\n        default: void 0,\n        required: false\n      },\n      prefetch: {\n        type: Boolean,\n        default: void 0,\n        required: false\n      },\n      noPrefetch: {\n        type: Boolean,\n        default: void 0,\n        required: false\n      },\n      activeClass: {\n        type: String,\n        default: void 0,\n        required: false\n      },\n      exactActiveClass: {\n        type: String,\n        default: void 0,\n        required: false\n      },\n      prefetchedClass: {\n        type: String,\n        default: void 0,\n        required: false\n      },\n      replace: {\n        type: Boolean,\n        default: void 0,\n        required: false\n      },\n      ariaCurrentValue: {\n        type: String,\n        default: void 0,\n        required: false\n      },\n      external: {\n        type: Boolean,\n        default: void 0,\n        required: false\n      },\n      custom: {\n        type: Boolean,\n        default: void 0,\n        required: false\n      }\n    },\n    setup(props, { slots }) {\n      const router = useRouter();\n      const to = computed(() => {\n        checkPropConflicts(props, \"to\", \"href\");\n        return props.to || props.href || \"\";\n      });\n      const isExternal = computed(() => {\n        if (props.external) {\n          return true;\n        }\n        if (props.target && props.target !== \"_self\") {\n          return true;\n        }\n        if (typeof to.value === \"object\") {\n          return false;\n        }\n        return to.value === \"\" || hasProtocol(to.value, true);\n      });\n      const prefetched = ref(false);\n      const el = process.server ? void 0 : ref(null);\n      if (process.client) {\n        checkPropConflicts(props, \"prefetch\", \"noPrefetch\");\n        const shouldPrefetch = props.prefetch !== false && props.noPrefetch !== true && typeof to.value === \"string\" && props.target !== \"_blank\" && !isSlowConnection();\n        if (shouldPrefetch) {\n          const nuxtApp = useNuxtApp();\n          const observer = useObserver();\n          let idleId;\n          let unobserve = null;\n          onMounted(() => {\n            idleId = requestIdleCallback(() => {\n              if (el?.value?.tagName) {\n                unobserve = observer.observe(el.value, async () => {\n                  unobserve?.();\n                  unobserve = null;\n                  await Promise.all([\n                    nuxtApp.hooks.callHook(\"link:prefetch\", to.value).catch(() => {\n                    }),\n                    !isExternal.value && preloadRouteComponents(to.value, router).catch(() => {\n                    })\n                  ]);\n                  prefetched.value = true;\n                });\n              }\n            });\n          });\n          onBeforeUnmount(() => {\n            if (idleId) {\n              cancelIdleCallback(idleId);\n            }\n            unobserve?.();\n            unobserve = null;\n          });\n        }\n      }\n      return () => {\n        if (!isExternal.value) {\n          return h(\n            resolveComponent(\"RouterLink\"),\n            {\n              ref: process.server ? void 0 : (ref2) => {\n                el.value = ref2?.$el;\n              },\n              to: to.value,\n              ...prefetched.value && !props.custom ? { class: props.prefetchedClass || options.prefetchedClass } : {},\n              activeClass: props.activeClass || options.activeClass,\n              exactActiveClass: props.exactActiveClass || options.exactActiveClass,\n              replace: props.replace,\n              ariaCurrentValue: props.ariaCurrentValue,\n              custom: props.custom\n            },\n            slots.default\n          );\n        }\n        const href = typeof to.value === \"object\" ? router.resolve(to.value)?.href ?? null : to.value || null;\n        const target = props.target || null;\n        checkPropConflicts(props, \"noRel\", \"rel\");\n        const rel = props.noRel ? null : firstNonUndefined(props.rel, options.externalRelAttribute, href ? DEFAULT_EXTERNAL_REL_ATTRIBUTE : \"\") || null;\n        const navigate = () => navigateTo(href, { replace: props.replace });\n        if (props.custom) {\n          if (!slots.default) {\n            return null;\n          }\n          return slots.default({\n            href,\n            navigate,\n            route: router.resolve(href),\n            rel,\n            target,\n            isExternal: isExternal.value,\n            isActive: false,\n            isExactActive: false\n          });\n        }\n        return h(\"a\", { ref: el, href, rel, target }, slots.default?.());\n      };\n    }\n  });\n}\nexport default defineNuxtLink({ componentName: \"NuxtLink\" });\nfunction useObserver() {\n  if (process.server) {\n    return;\n  }\n  const nuxtApp = useNuxtApp();\n  if (nuxtApp._observer) {\n    return nuxtApp._observer;\n  }\n  let observer = null;\n  const callbacks = /* @__PURE__ */ new Map();\n  const observe = (element, callback) => {\n    if (!observer) {\n      observer = new IntersectionObserver((entries) => {\n        for (const entry of entries) {\n          const callback2 = callbacks.get(entry.target);\n          const isVisible = entry.isIntersecting || entry.intersectionRatio > 0;\n          if (isVisible && callback2) {\n            callback2();\n          }\n        }\n      });\n    }\n    callbacks.set(element, callback);\n    observer.observe(element);\n    return () => {\n      callbacks.delete(element);\n      observer.unobserve(element);\n      if (callbacks.size === 0) {\n        observer.disconnect();\n        observer = null;\n      }\n    };\n  };\n  const _observer = nuxtApp._observer = {\n    observe\n  };\n  return _observer;\n}\nfunction isSlowConnection() {\n  if (process.server) {\n    return;\n  }\n  const cn = navigator.connection;\n  if (cn && (cn.saveData || /2g/.test(cn.effectiveType))) {\n    return true;\n  }\n  return false;\n}\n","function isObject(value) {\n  return value !== null && typeof value === \"object\";\n}\nfunction _defu(baseObject, defaults, namespace = \".\", merger) {\n  if (!isObject(defaults)) {\n    return _defu(baseObject, {}, namespace, merger);\n  }\n  const object = Object.assign({}, defaults);\n  for (const key in baseObject) {\n    if (key === \"__proto__\" || key === \"constructor\") {\n      continue;\n    }\n    const value = baseObject[key];\n    if (value === null || value === void 0) {\n      continue;\n    }\n    if (merger && merger(object, key, value, namespace)) {\n      continue;\n    }\n    if (Array.isArray(value) && Array.isArray(object[key])) {\n      object[key] = [...value, ...object[key]];\n    } else if (isObject(value) && isObject(object[key])) {\n      object[key] = _defu(value, object[key], (namespace ? `${namespace}.` : \"\") + key.toString(), merger);\n    } else {\n      object[key] = value;\n    }\n  }\n  return object;\n}\nfunction createDefu(merger) {\n  return (...arguments_) => arguments_.reduce((p, c) => _defu(p, c, \"\", merger), {});\n}\nconst defu = createDefu();\nconst defuFn = createDefu((object, key, currentValue, _namespace) => {\n  if (typeof object[key] !== \"undefined\" && typeof currentValue === \"function\") {\n    object[key] = currentValue(object[key]);\n    return true;\n  }\n});\nconst defuArrayFn = createDefu((object, key, currentValue, _namespace) => {\n  if (Array.isArray(object[key]) && typeof currentValue === \"function\") {\n    object[key] = currentValue(object[key]);\n    return true;\n  }\n});\n\nexport { createDefu, defu as default, defu, defuArrayFn, defuFn };\n","\nimport { defuFn } from '/Users/selie/Documents/Hacks/NuxtSupabaseApp/node_modules/defu/dist/defu.mjs'\n\nconst inlineConfig = {}\n\n\n\nexport default defuFn(inlineConfig)\n","import { defineAsyncComponent } from 'vue'\nimport { defineNuxtPlugin } from '#app'\n\nconst components = {\n  Hero: defineAsyncComponent(() => import(\"/Users/selie/Documents/Hacks/NuxtSupabaseApp/components/content/Hero.vue\" /* webpackChunkName: \"components/hero\" */).then(c => c.default || c)),\n  ProseA: defineAsyncComponent(() => import(\"/Users/selie/Documents/Hacks/NuxtSupabaseApp/components/content/ProseA.vue\" /* webpackChunkName: \"components/prose-a\" */).then(c => c.default || c)),\n  ProseBlockquote: defineAsyncComponent(() => import(\"/Users/selie/Documents/Hacks/NuxtSupabaseApp/components/content/ProseBlockquote.vue\" /* webpackChunkName: \"components/prose-blockquote\" */).then(c => c.default || c)),\n  ProseCode: defineAsyncComponent(() => import(\"/Users/selie/Documents/Hacks/NuxtSupabaseApp/components/content/ProseCode.vue\" /* webpackChunkName: \"components/prose-code\" */).then(c => c.default || c)),\n  ProseCodeInline: defineAsyncComponent(() => import(\"/Users/selie/Documents/Hacks/NuxtSupabaseApp/components/content/ProseCodeInline.vue\" /* webpackChunkName: \"components/prose-code-inline\" */).then(c => c.default || c)),\n  ProseH1: defineAsyncComponent(() => import(\"/Users/selie/Documents/Hacks/NuxtSupabaseApp/components/content/ProseH1.vue\" /* webpackChunkName: \"components/prose-h1\" */).then(c => c.default || c)),\n  ContentDoc: defineAsyncComponent(() => import(\"/Users/selie/Documents/Hacks/NuxtSupabaseApp/node_modules/@nuxt/content/dist/runtime/components/ContentDoc.vue\" /* webpackChunkName: \"components/content-doc\" */).then(c => c.default || c)),\n  ContentList: defineAsyncComponent(() => import(\"/Users/selie/Documents/Hacks/NuxtSupabaseApp/node_modules/@nuxt/content/dist/runtime/components/ContentList.vue\" /* webpackChunkName: \"components/content-list\" */).then(c => c.default || c)),\n  ContentNavigation: defineAsyncComponent(() => import(\"/Users/selie/Documents/Hacks/NuxtSupabaseApp/node_modules/@nuxt/content/dist/runtime/components/ContentNavigation.vue\" /* webpackChunkName: \"components/content-navigation\" */).then(c => c.default || c)),\n  ContentQuery: defineAsyncComponent(() => import(\"/Users/selie/Documents/Hacks/NuxtSupabaseApp/node_modules/@nuxt/content/dist/runtime/components/ContentQuery.vue\" /* webpackChunkName: \"components/content-query\" */).then(c => c.default || c)),\n  ContentRenderer: defineAsyncComponent(() => import(\"/Users/selie/Documents/Hacks/NuxtSupabaseApp/node_modules/@nuxt/content/dist/runtime/components/ContentRenderer.vue\" /* webpackChunkName: \"components/content-renderer\" */).then(c => c.default || c)),\n  ContentRendererMarkdown: defineAsyncComponent(() => import(\"/Users/selie/Documents/Hacks/NuxtSupabaseApp/node_modules/@nuxt/content/dist/runtime/components/ContentRendererMarkdown.vue\" /* webpackChunkName: \"components/content-renderer-markdown\" */).then(c => c.default || c)),\n  ContentSlot: defineAsyncComponent(() => import(\"/Users/selie/Documents/Hacks/NuxtSupabaseApp/node_modules/@nuxt/content/dist/runtime/components/ContentSlot.vue\" /* webpackChunkName: \"components/content-slot\" */).then(c => c.default || c)),\n  DocumentDrivenEmpty: defineAsyncComponent(() => import(\"/Users/selie/Documents/Hacks/NuxtSupabaseApp/node_modules/@nuxt/content/dist/runtime/components/DocumentDrivenEmpty.vue\" /* webpackChunkName: \"components/document-driven-empty\" */).then(c => c.default || c)),\n  DocumentDrivenNotFound: defineAsyncComponent(() => import(\"/Users/selie/Documents/Hacks/NuxtSupabaseApp/node_modules/@nuxt/content/dist/runtime/components/DocumentDrivenNotFound.vue\" /* webpackChunkName: \"components/document-driven-not-found\" */).then(c => c.default || c)),\n  Markdown: defineAsyncComponent(() => import(\"/Users/selie/Documents/Hacks/NuxtSupabaseApp/node_modules/@nuxt/content/dist/runtime/components/Markdown.vue\" /* webpackChunkName: \"components/markdown\" */).then(c => c.default || c)),\n  ProseEm: defineAsyncComponent(() => import(\"/Users/selie/Documents/Hacks/NuxtSupabaseApp/node_modules/@nuxt/content/dist/runtime/components/Prose/ProseEm.vue\" /* webpackChunkName: \"components/prose-em\" */).then(c => c.default || c)),\n  ProseH2: defineAsyncComponent(() => import(\"/Users/selie/Documents/Hacks/NuxtSupabaseApp/node_modules/@nuxt/content/dist/runtime/components/Prose/ProseH2.vue\" /* webpackChunkName: \"components/prose-h2\" */).then(c => c.default || c)),\n  ProseH3: defineAsyncComponent(() => import(\"/Users/selie/Documents/Hacks/NuxtSupabaseApp/node_modules/@nuxt/content/dist/runtime/components/Prose/ProseH3.vue\" /* webpackChunkName: \"components/prose-h3\" */).then(c => c.default || c)),\n  ProseH4: defineAsyncComponent(() => import(\"/Users/selie/Documents/Hacks/NuxtSupabaseApp/node_modules/@nuxt/content/dist/runtime/components/Prose/ProseH4.vue\" /* webpackChunkName: \"components/prose-h4\" */).then(c => c.default || c)),\n  ProseH5: defineAsyncComponent(() => import(\"/Users/selie/Documents/Hacks/NuxtSupabaseApp/node_modules/@nuxt/content/dist/runtime/components/Prose/ProseH5.vue\" /* webpackChunkName: \"components/prose-h5\" */).then(c => c.default || c)),\n  ProseH6: defineAsyncComponent(() => import(\"/Users/selie/Documents/Hacks/NuxtSupabaseApp/node_modules/@nuxt/content/dist/runtime/components/Prose/ProseH6.vue\" /* webpackChunkName: \"components/prose-h6\" */).then(c => c.default || c)),\n  ProseHr: defineAsyncComponent(() => import(\"/Users/selie/Documents/Hacks/NuxtSupabaseApp/node_modules/@nuxt/content/dist/runtime/components/Prose/ProseHr.vue\" /* webpackChunkName: \"components/prose-hr\" */).then(c => c.default || c)),\n  ProseImg: defineAsyncComponent(() => import(\"/Users/selie/Documents/Hacks/NuxtSupabaseApp/node_modules/@nuxt/content/dist/runtime/components/Prose/ProseImg.vue\" /* webpackChunkName: \"components/prose-img\" */).then(c => c.default || c)),\n  ProseLi: defineAsyncComponent(() => import(\"/Users/selie/Documents/Hacks/NuxtSupabaseApp/node_modules/@nuxt/content/dist/runtime/components/Prose/ProseLi.vue\" /* webpackChunkName: \"components/prose-li\" */).then(c => c.default || c)),\n  ProseOl: defineAsyncComponent(() => import(\"/Users/selie/Documents/Hacks/NuxtSupabaseApp/node_modules/@nuxt/content/dist/runtime/components/Prose/ProseOl.vue\" /* webpackChunkName: \"components/prose-ol\" */).then(c => c.default || c)),\n  ProseP: defineAsyncComponent(() => import(\"/Users/selie/Documents/Hacks/NuxtSupabaseApp/node_modules/@nuxt/content/dist/runtime/components/Prose/ProseP.vue\" /* webpackChunkName: \"components/prose-p\" */).then(c => c.default || c)),\n  ProseStrong: defineAsyncComponent(() => import(\"/Users/selie/Documents/Hacks/NuxtSupabaseApp/node_modules/@nuxt/content/dist/runtime/components/Prose/ProseStrong.vue\" /* webpackChunkName: \"components/prose-strong\" */).then(c => c.default || c)),\n  ProseTable: defineAsyncComponent(() => import(\"/Users/selie/Documents/Hacks/NuxtSupabaseApp/node_modules/@nuxt/content/dist/runtime/components/Prose/ProseTable.vue\" /* webpackChunkName: \"components/prose-table\" */).then(c => c.default || c)),\n  ProseTbody: defineAsyncComponent(() => import(\"/Users/selie/Documents/Hacks/NuxtSupabaseApp/node_modules/@nuxt/content/dist/runtime/components/Prose/ProseTbody.vue\" /* webpackChunkName: \"components/prose-tbody\" */).then(c => c.default || c)),\n  ProseTd: defineAsyncComponent(() => import(\"/Users/selie/Documents/Hacks/NuxtSupabaseApp/node_modules/@nuxt/content/dist/runtime/components/Prose/ProseTd.vue\" /* webpackChunkName: \"components/prose-td\" */).then(c => c.default || c)),\n  ProseTh: defineAsyncComponent(() => import(\"/Users/selie/Documents/Hacks/NuxtSupabaseApp/node_modules/@nuxt/content/dist/runtime/components/Prose/ProseTh.vue\" /* webpackChunkName: \"components/prose-th\" */).then(c => c.default || c)),\n  ProseThead: defineAsyncComponent(() => import(\"/Users/selie/Documents/Hacks/NuxtSupabaseApp/node_modules/@nuxt/content/dist/runtime/components/Prose/ProseThead.vue\" /* webpackChunkName: \"components/prose-thead\" */).then(c => c.default || c)),\n  ProseTr: defineAsyncComponent(() => import(\"/Users/selie/Documents/Hacks/NuxtSupabaseApp/node_modules/@nuxt/content/dist/runtime/components/Prose/ProseTr.vue\" /* webpackChunkName: \"components/prose-tr\" */).then(c => c.default || c)),\n  ProseUl: defineAsyncComponent(() => import(\"/Users/selie/Documents/Hacks/NuxtSupabaseApp/node_modules/@nuxt/content/dist/runtime/components/Prose/ProseUl.vue\" /* webpackChunkName: \"components/prose-ul\" */).then(c => c.default || c))\n}\n\nexport default defineNuxtPlugin(nuxtApp => {\n  for (const name in components) {\n    nuxtApp.vueApp.component(name, components[name])\n    nuxtApp.vueApp.component('Lazy' + name, components[name])\n  }\n})\n","import { createHead as createHead$1, useHead, Vue2ProvideUnheadPlugin, injectHead } from '@unhead/vue';\nexport { Vue2ProvideUnheadPlugin, VueHeadMixin, createHeadCore, injectHead, unheadVueComposablesImports, useBodyAttrs, useHead, useHtmlAttrs, useSeoMeta, useServerBodyAttrs, useServerHead, useServerHtmlAttrs, useServerTagBase, useServerTagLink, useServerTagMeta, useServerTagMetaFlat, useServerTagNoscript, useServerTagScript, useServerTagStyle, useServerTagTitle, useServerTitleTemplate, useTagBase, useTagLink, useTagMeta, useTagMetaFlat, useTagNoscript, useTagScript, useTagStyle, useTagTitle, useTitleTemplate } from '@unhead/vue';\nimport { renderDOMHead, debouncedRenderDOMHead } from '@unhead/dom';\nimport { renderSSRHead } from '@unhead/ssr';\nimport { version, defineComponent, ref, onBeforeUnmount, watchEffect } from 'vue';\n\nfunction createHead(initHeadObject) {\n  const unhead = createHead$1();\n  const legacyHead = {\n    unhead,\n    install(app) {\n      if (app.config.globalProperties)\n        app.config.globalProperties.$head = unhead;\n      app.provide(\"usehead\", unhead);\n    },\n    resolveTags() {\n      return unhead.resolveTags();\n    },\n    headEntries() {\n      return unhead.headEntries();\n    },\n    headTags() {\n      return unhead.resolveTags();\n    },\n    push(input, options) {\n      return unhead.push(input, options);\n    },\n    addEntry(input, options) {\n      return unhead.push(input, options);\n    },\n    addHeadObjs(input, options) {\n      return unhead.push(input, options);\n    },\n    addReactiveEntry(input, options) {\n      const api = useHead(input, options);\n      if (typeof api !== \"undefined\")\n        return api.dispose;\n      return () => {\n      };\n    },\n    removeHeadObjs() {\n    },\n    updateDOM(document, force) {\n      if (force)\n        renderDOMHead(unhead, { document });\n      else\n        debouncedRenderDOMHead(unhead, { delayFn: (fn) => setTimeout(() => fn(), 50), document });\n    },\n    internalHooks: unhead.hooks,\n    hooks: {\n      \"before:dom\": [],\n      \"resolved:tags\": [],\n      \"resolved:entries\": []\n    }\n  };\n  unhead.addHeadObjs = legacyHead.addHeadObjs;\n  unhead.updateDOM = legacyHead.updateDOM;\n  unhead.hooks.hook(\"dom:beforeRender\", (ctx) => {\n    for (const hook of legacyHead.hooks[\"before:dom\"]) {\n      if (hook() === false)\n        ctx.shouldRender = false;\n    }\n  });\n  if (initHeadObject)\n    legacyHead.addHeadObjs(initHeadObject);\n  return legacyHead;\n}\n\nconst HeadVuePlugin = Vue2ProvideUnheadPlugin;\nconst renderHeadToString = (head) => renderSSRHead(head.unhead);\n\nconst Vue2 = version.startsWith(\"2.\");\nconst IsBrowser = typeof window !== \"undefined\";\n\nconst addVNodeToHeadObj = (node, obj) => {\n  const nodeType = Vue2 ? node.tag : node.type;\n  const type = nodeType === \"html\" ? \"htmlAttrs\" : nodeType === \"body\" ? \"bodyAttrs\" : nodeType;\n  if (typeof type !== \"string\" || !(type in obj))\n    return;\n  const nodeData = Vue2 ? node.data : node;\n  const props = (Vue2 ? nodeData.attrs : node.props) || {};\n  if (Vue2) {\n    if (nodeData.staticClass)\n      props.class = nodeData.staticClass;\n    if (nodeData.staticStyle)\n      props.style = Object.entries(nodeData.staticStyle).map(([key, value]) => `${key}:${value}`).join(\";\");\n  }\n  if (node.children) {\n    const childrenAttr = Vue2 ? \"text\" : \"children\";\n    props.children = Array.isArray(node.children) ? node.children[0][childrenAttr] : node[childrenAttr];\n  }\n  if (Array.isArray(obj[type]))\n    obj[type].push(props);\n  else if (type === \"title\")\n    obj.title = props.children;\n  else\n    obj[type] = props;\n};\nconst vnodesToHeadObj = (nodes) => {\n  const obj = {\n    title: void 0,\n    htmlAttrs: void 0,\n    bodyAttrs: void 0,\n    base: void 0,\n    meta: [],\n    link: [],\n    style: [],\n    script: [],\n    noscript: []\n  };\n  for (const node of nodes) {\n    if (typeof node.type === \"symbol\" && Array.isArray(node.children)) {\n      for (const childNode of node.children)\n        addVNodeToHeadObj(childNode, obj);\n    } else {\n      addVNodeToHeadObj(node, obj);\n    }\n  }\n  return obj;\n};\nconst Head = /* @__PURE__ */ defineComponent({\n  name: \"Head\",\n  setup(_, { slots }) {\n    const head = injectHead();\n    const obj = ref({});\n    const entry = head.push(obj);\n    if (IsBrowser) {\n      onBeforeUnmount(() => {\n        entry.dispose();\n      });\n    }\n    return () => {\n      watchEffect(() => {\n        if (!slots.default)\n          return;\n        entry.patch(vnodesToHeadObj(slots.default()));\n      });\n      return null;\n    };\n  }\n});\n\nexport { Head, HeadVuePlugin, createHead, renderHeadToString };\n","export const appBaseURL = \"/\"\n\nexport const appBuildAssetsDir = \"/_nuxt/\"\n\nexport const appCdnURL = \"\"\n\nexport const appHead = {\"meta\":[{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"},{\"charset\":\"utf-8\"}],\"link\":[],\"style\":[],\"script\":[],\"noscript\":[]}\n\nexport const appLayoutTransition = false\n\nexport const appPageTransition = false\n\nexport const appKeepalive = false\n\nexport const appRootId = \"__nuxt\"\n\nexport const appRootTag = \"div\"","import { createHead, useHead } from \"@vueuse/head\";\nimport { defineNuxtPlugin } from \"#app\";\nimport { appHead } from \"#build/nuxt.config.mjs\";\nexport default defineNuxtPlugin((nuxtApp) => {\n  const head = createHead();\n  head.push(appHead);\n  nuxtApp.vueApp.use(head);\n  if (process.client) {\n    let pauseDOMUpdates = true;\n    const unpauseDom = () => {\n      pauseDOMUpdates = false;\n      head.internalHooks.callHook(\"entries:updated\", head.unhead);\n    };\n    head.internalHooks.hook(\"dom:beforeRender\", (context) => {\n      context.shouldRender = !pauseDOMUpdates;\n    });\n    nuxtApp.hooks.hook(\"page:start\", () => {\n      pauseDOMUpdates = true;\n    });\n    nuxtApp.hooks.hook(\"page:finish\", unpauseDom);\n    nuxtApp.hooks.hook(\"app:mounted\", unpauseDom);\n  }\n  nuxtApp._useHead = useHead;\n  if (process.server) {\n    nuxtApp.ssrContext.renderMeta = async () => {\n      const { renderSSRHead } = await import(\"@unhead/ssr\");\n      const meta = await renderSSRHead(head.unhead);\n      return {\n        ...meta,\n        bodyScriptsPrepend: meta.bodyTagsOpen,\n        bodyScripts: meta.bodyTags\n      };\n    };\n  }\n});\n","import { default as _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47_91_46_46_46slug_93_46vueMeta } from \"/Users/selie/Documents/Hacks/NuxtSupabaseApp/pages/[...slug].vue?macro=true\";\nimport { default as _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47about_47index_46vueMeta } from \"/Users/selie/Documents/Hacks/NuxtSupabaseApp/pages/about/index.vue?macro=true\";\nimport { default as _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47about_47zh_46vueMeta } from \"/Users/selie/Documents/Hacks/NuxtSupabaseApp/pages/about/zh.vue?macro=true\";\nimport { default as _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47article_47_91_46_46_46slug_93_46vueMeta } from \"/Users/selie/Documents/Hacks/NuxtSupabaseApp/pages/article/[...slug].vue?macro=true\";\nimport { default as _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47article_47index_46vueMeta } from \"/Users/selie/Documents/Hacks/NuxtSupabaseApp/pages/article/index.vue?macro=true\";\nimport { default as _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47components_46vueMeta } from \"/Users/selie/Documents/Hacks/NuxtSupabaseApp/pages/components.vue?macro=true\";\nimport { default as _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47gallery_46vueMeta } from \"/Users/selie/Documents/Hacks/NuxtSupabaseApp/pages/gallery.vue?macro=true\";\nimport { default as _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47game_47gobang_46vueMeta } from \"/Users/selie/Documents/Hacks/NuxtSupabaseApp/pages/game/gobang.vue?macro=true\";\nimport { default as _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47index_46vueMeta } from \"/Users/selie/Documents/Hacks/NuxtSupabaseApp/pages/index.vue?macro=true\";\nimport { default as _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47projects_46vueMeta } from \"/Users/selie/Documents/Hacks/NuxtSupabaseApp/pages/projects.vue?macro=true\";\nexport default [\n  {\n    name: _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47_91_46_46_46slug_93_46vueMeta?.name ?? \"slug\",\n    path: _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47_91_46_46_46slug_93_46vueMeta?.path ?? \"/:slug(.*)*\",\n    file: \"/Users/selie/Documents/Hacks/NuxtSupabaseApp/pages/[...slug].vue\",\n    children: [],\n    meta: _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47_91_46_46_46slug_93_46vueMeta,\n    alias: _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47_91_46_46_46slug_93_46vueMeta?.alias || [],\n    redirect: _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47_91_46_46_46slug_93_46vueMeta?.redirect || undefined,\n    component: () => import(\"/Users/selie/Documents/Hacks/NuxtSupabaseApp/pages/[...slug].vue\").then(m => m.default || m)\n  },\n  {\n    name: _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47about_47index_46vueMeta?.name ?? \"about\",\n    path: _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47about_47index_46vueMeta?.path ?? \"/about\",\n    file: \"/Users/selie/Documents/Hacks/NuxtSupabaseApp/pages/about/index.vue\",\n    children: [],\n    meta: _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47about_47index_46vueMeta,\n    alias: _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47about_47index_46vueMeta?.alias || [],\n    redirect: _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47about_47index_46vueMeta?.redirect || undefined,\n    component: () => import(\"/Users/selie/Documents/Hacks/NuxtSupabaseApp/pages/about/index.vue\").then(m => m.default || m)\n  },\n  {\n    name: _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47about_47zh_46vueMeta?.name ?? \"about-zh\",\n    path: _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47about_47zh_46vueMeta?.path ?? \"/about/zh\",\n    file: \"/Users/selie/Documents/Hacks/NuxtSupabaseApp/pages/about/zh.vue\",\n    children: [],\n    meta: _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47about_47zh_46vueMeta,\n    alias: _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47about_47zh_46vueMeta?.alias || [],\n    redirect: _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47about_47zh_46vueMeta?.redirect || undefined,\n    component: () => import(\"/Users/selie/Documents/Hacks/NuxtSupabaseApp/pages/about/zh.vue\").then(m => m.default || m)\n  },\n  {\n    name: _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47article_47_91_46_46_46slug_93_46vueMeta?.name ?? \"article-slug\",\n    path: _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47article_47_91_46_46_46slug_93_46vueMeta?.path ?? \"/article/:slug(.*)*\",\n    file: \"/Users/selie/Documents/Hacks/NuxtSupabaseApp/pages/article/[...slug].vue\",\n    children: [],\n    meta: _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47article_47_91_46_46_46slug_93_46vueMeta,\n    alias: _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47article_47_91_46_46_46slug_93_46vueMeta?.alias || [],\n    redirect: _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47article_47_91_46_46_46slug_93_46vueMeta?.redirect || undefined,\n    component: () => import(\"/Users/selie/Documents/Hacks/NuxtSupabaseApp/pages/article/[...slug].vue\").then(m => m.default || m)\n  },\n  {\n    name: _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47article_47index_46vueMeta?.name ?? \"article\",\n    path: _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47article_47index_46vueMeta?.path ?? \"/article\",\n    file: \"/Users/selie/Documents/Hacks/NuxtSupabaseApp/pages/article/index.vue\",\n    children: [],\n    meta: _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47article_47index_46vueMeta,\n    alias: _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47article_47index_46vueMeta?.alias || [],\n    redirect: _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47article_47index_46vueMeta?.redirect || undefined,\n    component: () => import(\"/Users/selie/Documents/Hacks/NuxtSupabaseApp/pages/article/index.vue\").then(m => m.default || m)\n  },\n  {\n    name: _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47components_46vueMeta?.name ?? \"components\",\n    path: _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47components_46vueMeta?.path ?? \"/components\",\n    file: \"/Users/selie/Documents/Hacks/NuxtSupabaseApp/pages/components.vue\",\n    children: [],\n    meta: _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47components_46vueMeta,\n    alias: _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47components_46vueMeta?.alias || [],\n    redirect: _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47components_46vueMeta?.redirect || undefined,\n    component: () => import(\"/Users/selie/Documents/Hacks/NuxtSupabaseApp/pages/components.vue\").then(m => m.default || m)\n  },\n  {\n    name: _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47gallery_46vueMeta?.name ?? \"gallery\",\n    path: _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47gallery_46vueMeta?.path ?? \"/gallery\",\n    file: \"/Users/selie/Documents/Hacks/NuxtSupabaseApp/pages/gallery.vue\",\n    children: [],\n    meta: _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47gallery_46vueMeta,\n    alias: _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47gallery_46vueMeta?.alias || [],\n    redirect: _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47gallery_46vueMeta?.redirect || undefined,\n    component: () => import(\"/Users/selie/Documents/Hacks/NuxtSupabaseApp/pages/gallery.vue\").then(m => m.default || m)\n  },\n  {\n    name: _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47game_47gobang_46vueMeta?.name ?? \"game-gobang\",\n    path: _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47game_47gobang_46vueMeta?.path ?? \"/game/gobang\",\n    file: \"/Users/selie/Documents/Hacks/NuxtSupabaseApp/pages/game/gobang.vue\",\n    children: [],\n    meta: _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47game_47gobang_46vueMeta,\n    alias: _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47game_47gobang_46vueMeta?.alias || [],\n    redirect: _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47game_47gobang_46vueMeta?.redirect || undefined,\n    component: () => import(\"/Users/selie/Documents/Hacks/NuxtSupabaseApp/pages/game/gobang.vue\").then(m => m.default || m)\n  },\n  {\n    name: _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47index_46vueMeta?.name ?? \"index\",\n    path: _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47index_46vueMeta?.path ?? \"/\",\n    file: \"/Users/selie/Documents/Hacks/NuxtSupabaseApp/pages/index.vue\",\n    children: [],\n    meta: _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47index_46vueMeta,\n    alias: _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47index_46vueMeta?.alias || [],\n    redirect: _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47index_46vueMeta?.redirect || undefined,\n    component: () => import(\"/Users/selie/Documents/Hacks/NuxtSupabaseApp/pages/index.vue\").then(m => m.default || m)\n  },\n  {\n    name: _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47projects_46vueMeta?.name ?? \"projects\",\n    path: _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47projects_46vueMeta?.path ?? \"/projects\",\n    file: \"/Users/selie/Documents/Hacks/NuxtSupabaseApp/pages/projects.vue\",\n    children: [],\n    meta: _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47projects_46vueMeta,\n    alias: _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47projects_46vueMeta?.alias || [],\n    redirect: _47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47projects_46vueMeta?.redirect || undefined,\n    component: () => import(\"/Users/selie/Documents/Hacks/NuxtSupabaseApp/pages/projects.vue\").then(m => m.default || m)\n  }\n]","import { nextTick } from \"vue\";\nimport { useNuxtApp } from \"#app\";\nimport { appPageTransition as defaultPageTransition } from \"#build/nuxt.config.mjs\";\nexport default {\n  scrollBehavior(to, from, savedPosition) {\n    const nuxtApp = useNuxtApp();\n    let position = savedPosition || void 0;\n    if (!position && from && to && to.meta.scrollToTop !== false && _isDifferentRoute(from, to)) {\n      position = { left: 0, top: 0 };\n    }\n    if (to.path === from.path) {\n      if (from.hash && !to.hash) {\n        return { left: 0, top: 0 };\n      }\n      if (to.hash) {\n        return { el: to.hash, top: _getHashElementScrollMarginTop(to.hash) };\n      }\n    }\n    const hasTransition = (route) => !!(route.meta.pageTransition ?? defaultPageTransition);\n    const hookToWait = hasTransition(from) && hasTransition(to) ? \"page:transition:finish\" : \"page:finish\";\n    return new Promise((resolve) => {\n      nuxtApp.hooks.hookOnce(hookToWait, async () => {\n        await nextTick();\n        if (to.hash) {\n          position = { el: to.hash, top: _getHashElementScrollMarginTop(to.hash) };\n        }\n        resolve(position);\n      });\n    });\n  }\n};\nfunction _getHashElementScrollMarginTop(selector) {\n  try {\n    const elem = document.querySelector(selector);\n    if (elem) {\n      return parseFloat(getComputedStyle(elem).scrollMarginTop);\n    }\n  } catch {\n  }\n  return 0;\n}\nfunction _isDifferentRoute(a, b) {\n  const samePageComponent = a.matched[0] === b.matched[0];\n  if (!samePageComponent) {\n    return true;\n  }\n  if (samePageComponent && JSON.stringify(a.params) !== JSON.stringify(b.params)) {\n    return true;\n  }\n  return false;\n}\n","import routerOptions0 from \"/Users/selie/Documents/Hacks/NuxtSupabaseApp/node_modules/nuxt/dist/pages/runtime/router.options\";\nconst configRouterOptions = {}\nexport default {\n...configRouterOptions,\n...routerOptions0,\n}","import { createError, defineNuxtRouteMiddleware } from \"#app\";\nexport default defineNuxtRouteMiddleware(async (to) => {\n  if (!to.meta?.validate) {\n    return;\n  }\n  const result = await Promise.resolve(to.meta.validate(to));\n  if (typeof result === \"boolean\") {\n    return result;\n  }\n  return createError(result);\n});\n","import validate from \"/Users/selie/Documents/Hacks/NuxtSupabaseApp/node_modules/nuxt/dist/pages/runtime/validate.mjs\";\nexport const globalMiddleware = [\n  validate\n]\nexport const namedMiddleware = {\n  auth: () => import(\"/Users/selie/Documents/Hacks/NuxtSupabaseApp/middleware/auth.ts\")\n}","import { computed, reactive, shallowRef } from \"vue\";\nimport {\n  createRouter,\n  createWebHistory,\n  createMemoryHistory,\n  createWebHashHistory\n} from \"vue-router\";\nimport { createError } from \"h3\";\nimport { withoutBase, isEqual } from \"ufo\";\nimport { callWithNuxt, defineNuxtPlugin, useRuntimeConfig, showError, clearError, navigateTo, useError, useState } from \"#app\";\nimport _routes from \"#build/routes\";\nimport routerOptions from \"#build/router.options\";\nimport { globalMiddleware, namedMiddleware } from \"#build/middleware\";\nfunction createCurrentLocation(base, location) {\n  const { pathname, search, hash } = location;\n  const hashPos = base.indexOf(\"#\");\n  if (hashPos > -1) {\n    const slicePos = hash.includes(base.slice(hashPos)) ? base.slice(hashPos).length : 1;\n    let pathFromHash = hash.slice(slicePos);\n    if (pathFromHash[0] !== \"/\") {\n      pathFromHash = \"/\" + pathFromHash;\n    }\n    return withoutBase(pathFromHash, \"\");\n  }\n  const path = withoutBase(pathname, base);\n  return path + search + hash;\n}\nexport default defineNuxtPlugin(async (nuxtApp) => {\n  let routerBase = useRuntimeConfig().app.baseURL;\n  if (routerOptions.hashMode && !routerBase.includes(\"#\")) {\n    routerBase += \"#\";\n  }\n  const history = routerOptions.history?.(routerBase) ?? (process.client ? routerOptions.hashMode ? createWebHashHistory(routerBase) : createWebHistory(routerBase) : createMemoryHistory(routerBase));\n  const routes = routerOptions.routes?.(_routes) ?? _routes;\n  const initialURL = process.server ? nuxtApp.ssrContext.url : createCurrentLocation(routerBase, window.location);\n  const router = createRouter({\n    ...routerOptions,\n    history,\n    routes\n  });\n  nuxtApp.vueApp.use(router);\n  const previousRoute = shallowRef(router.currentRoute.value);\n  router.afterEach((_to, from) => {\n    previousRoute.value = from;\n  });\n  Object.defineProperty(nuxtApp.vueApp.config.globalProperties, \"previousRoute\", {\n    get: () => previousRoute.value\n  });\n  const _route = shallowRef(router.resolve(initialURL));\n  const syncCurrentRoute = () => {\n    _route.value = router.currentRoute.value;\n  };\n  nuxtApp.hook(\"page:finish\", syncCurrentRoute);\n  router.afterEach((to, from) => {\n    if (to.matched[0]?.components?.default === from.matched[0]?.components?.default) {\n      syncCurrentRoute();\n    }\n  });\n  const route = {};\n  for (const key in _route.value) {\n    route[key] = computed(() => _route.value[key]);\n  }\n  nuxtApp._route = reactive(route);\n  nuxtApp._middleware = nuxtApp._middleware || {\n    global: [],\n    named: {}\n  };\n  const error = useError();\n  try {\n    if (process.server) {\n      await router.push(initialURL);\n    }\n    await router.isReady();\n  } catch (error2) {\n    callWithNuxt(nuxtApp, showError, [error2]);\n  }\n  const initialLayout = useState(\"_layout\");\n  router.beforeEach(async (to, from) => {\n    to.meta = reactive(to.meta);\n    if (nuxtApp.isHydrating) {\n      to.meta.layout = initialLayout.value ?? to.meta.layout;\n    }\n    nuxtApp._processingMiddleware = true;\n    const middlewareEntries = /* @__PURE__ */ new Set([...globalMiddleware, ...nuxtApp._middleware.global]);\n    for (const component of to.matched) {\n      const componentMiddleware = component.meta.middleware;\n      if (!componentMiddleware) {\n        continue;\n      }\n      if (Array.isArray(componentMiddleware)) {\n        for (const entry of componentMiddleware) {\n          middlewareEntries.add(entry);\n        }\n      } else {\n        middlewareEntries.add(componentMiddleware);\n      }\n    }\n    for (const entry of middlewareEntries) {\n      const middleware = typeof entry === \"string\" ? nuxtApp._middleware.named[entry] || await namedMiddleware[entry]?.().then((r) => r.default || r) : entry;\n      if (!middleware) {\n        if (process.dev) {\n          throw new Error(`Unknown route middleware: '${entry}'. Valid middleware: ${Object.keys(namedMiddleware).map((mw) => `'${mw}'`).join(\", \")}.`);\n        }\n        throw new Error(`Unknown route middleware: '${entry}'.`);\n      }\n      const result = await callWithNuxt(nuxtApp, middleware, [to, from]);\n      if (process.server || !nuxtApp.payload.serverRendered && nuxtApp.isHydrating) {\n        if (result === false || result instanceof Error) {\n          const error2 = result || createError({\n            statusCode: 404,\n            statusMessage: `Page Not Found: ${initialURL}`\n          });\n          await callWithNuxt(nuxtApp, showError, [error2]);\n          return false;\n        }\n      }\n      if (result || result === false) {\n        return result;\n      }\n    }\n  });\n  router.afterEach(async (to) => {\n    delete nuxtApp._processingMiddleware;\n    if (process.client && !nuxtApp.isHydrating && error.value) {\n      await callWithNuxt(nuxtApp, clearError);\n    }\n    if (to.matched.length === 0) {\n      callWithNuxt(nuxtApp, showError, [createError({\n        statusCode: 404,\n        fatal: false,\n        statusMessage: `Page not found: ${to.fullPath}`\n      })]);\n    } else if (process.server) {\n      const currentURL = to.fullPath || \"/\";\n      if (!isEqual(currentURL, initialURL)) {\n        await callWithNuxt(nuxtApp, navigateTo, [currentURL]);\n      }\n    }\n  });\n  nuxtApp.hooks.hookOnce(\"app:created\", async () => {\n    try {\n      await router.replace({\n        ...router.resolve(initialURL),\n        name: void 0,\n        force: true\n      });\n    } catch (error2) {\n      callWithNuxt(nuxtApp, showError, [error2]);\n    }\n  });\n  return { provide: { router } };\n});\n","export const preference = \"system\"\n      \nexport const fallback = \"light\"\n      \nexport const hid = \"nuxt-color-mode-script\"\n      \nexport const globalName = \"__NUXT_COLOR_MODE__\"\n      \nexport const componentName = \"ColorScheme\"\n      \nexport const classPrefix = \"\"\n      \nexport const classSuffix = \"\"\n      \nexport const dataValue = \"\"\n      \nexport const storageKey = \"nuxt-color-mode\"\n      \nexport const script = \"const w=window,de=document.documentElement,knownColorSchemes=[\\\"dark\\\",\\\"light\\\"],preference=window.localStorage.getItem(\\\"nuxt-color-mode\\\")||\\\"system\\\";let value=preference===\\\"system\\\"?getColorScheme():preference;const forcedColorMode=de.getAttribute(\\\"data-color-mode-forced\\\");forcedColorMode&&(value=forcedColorMode),addColorScheme(value),w[\\\"__NUXT_COLOR_MODE__\\\"]={preference,value,getColorScheme,addColorScheme,removeColorScheme};function addColorScheme(e){const o=\\\"\\\"+e+\\\"\\\",t=\\\"\\\";de.classList?de.classList.add(o):de.className+=\\\" \\\"+o,t&&de.setAttribute(\\\"data-\\\"+t,e)}function removeColorScheme(e){const o=\\\"\\\"+e+\\\"\\\",t=\\\"\\\";de.classList?de.classList.remove(o):de.className=de.className.replace(new RegExp(o,\\\"g\\\"),\\\"\\\"),t&&de.removeAttribute(\\\"data-\\\"+t)}function prefersColorScheme(e){return w.matchMedia(\\\"(prefers-color-scheme\\\"+e+\\\")\\\")}function getColorScheme(){if(w.matchMedia&&prefersColorScheme(\\\"\\\").media!==\\\"not all\\\"){for(const e of knownColorSchemes)if(prefersColorScheme(\\\":\\\"+e).matches)return e}return\\\"light\\\"}\\n\"\n      ","import { reactive } from \"vue\";\nimport { defineNuxtPlugin, isVue2, isVue3, useHead, useState, useRouter } from \"#imports\";\nimport { preference, hid, script, dataValue } from \"#color-mode-options\";\nconst addScript = (head) => {\n  head.script = head.script || [];\n  head.script.push({\n    hid,\n    innerHTML: script\n  });\n  const serializeProp = \"__dangerouslyDisableSanitizersByTagID\";\n  head[serializeProp] = head[serializeProp] || {};\n  head[serializeProp][hid] = [\"innerHTML\"];\n};\nexport default defineNuxtPlugin((nuxtApp) => {\n  const colorMode = useState(\"color-mode\", () => reactive({\n    preference,\n    value: preference,\n    unknown: true,\n    forced: false\n  })).value;\n  const htmlAttrs = {};\n  if (isVue2) {\n    const app = nuxtApp.nuxt2Context.app;\n    if (typeof app.head === \"function\") {\n      const originalHead = app.head;\n      app.head = function() {\n        const head = originalHead.call(this) || {};\n        addScript(head);\n        head.htmlAttrs = htmlAttrs;\n        return head;\n      };\n    } else {\n      addScript(app.head);\n      app.head.htmlAttrs = htmlAttrs;\n    }\n  }\n  if (isVue3) {\n    useHead({ htmlAttrs });\n  }\n  useRouter().afterEach((to) => {\n    const forcedColorMode = isVue2 ? to.matched[0]?.components.default?.options?.colorMode : to.meta.colorMode;\n    if (forcedColorMode && forcedColorMode !== \"system\") {\n      colorMode.value = htmlAttrs[\"data-color-mode-forced\"] = forcedColorMode;\n      if (dataValue) {\n        htmlAttrs[`data-${dataValue}`] = colorMode.value;\n      }\n      colorMode.forced = true;\n    } else if (forcedColorMode === \"system\") {\n      console.warn(\"You cannot force the colorMode to system at the page level.\");\n    }\n  });\n  nuxtApp.provide(\"colorMode\", colorMode);\n});\n","import { defineNuxtPlugin, useRuntimeConfig } from \"#imports\";\nexport default defineNuxtPlugin(() => {\n  const publicConfig = useRuntimeConfig().public;\n  if (process.client && publicConfig.content.wsUrl) {\n    import(\"../composables/web-socket\").then(({ useContentWebSocket }) => useContentWebSocket());\n  }\n});\n","import { useCookie, useRuntimeConfig } from \"#imports\";\nexport const useSupabaseToken = () => {\n  const { supabase: { cookies: cookieOptions } } = useRuntimeConfig().public;\n  const cookieName = `${cookieOptions.name}-access-token`;\n  return useCookie(cookieName);\n};\n","import { useSupabaseToken } from \"./useSupabaseToken.mjs\";\nimport { useState } from \"#imports\";\nexport const useSupabaseUser = () => {\n  const user = useState(\"supabase_user\");\n  const token = useSupabaseToken();\n  if (!token.value) {\n    user.value = null;\n  }\n  return user;\n};\n","import { useRuntimeConfig, useRouter } from \"#imports\";\nexport const redirectToLogin = (toPath) => {\n  const router = useRouter();\n  const redirect = useRuntimeConfig().public.supabase.redirect;\n  if (redirect && redirect.login) {\n    if ([redirect.login, redirect.callback].includes(toPath)) {\n      return;\n    }\n    if (!router.resolve(toPath).name) {\n      return;\n    }\n    router.push(redirect.login);\n  }\n};\n","import { useSupabaseUser } from \"../composables/useSupabaseUser.mjs\";\nimport { redirectToLogin } from \"../utils/redirect.mjs\";\nimport { defineNuxtPlugin, addRouteMiddleware } from \"#imports\";\nexport default defineNuxtPlugin(() => {\n  addRouteMiddleware(\"global-auth\", (to) => {\n    const user = useSupabaseUser();\n    if (!user.value) {\n      redirectToLogin(to.path);\n    }\n  }, { global: true });\n});\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nexport const resolveFetch = (customFetch) => {\n    let _fetch;\n    if (customFetch) {\n        _fetch = customFetch;\n    }\n    else if (typeof fetch === 'undefined') {\n        _fetch = (...args) => __awaiter(void 0, void 0, void 0, function* () { return yield (yield import('cross-fetch')).fetch(...args); });\n    }\n    else {\n        _fetch = fetch;\n    }\n    return (...args) => _fetch(...args);\n};\n//# sourceMappingURL=helper.js.map","export class FunctionsError extends Error {\n    constructor(message, name = 'FunctionsError', context) {\n        super(message);\n        super.name = name;\n        this.context = context;\n    }\n}\nexport class FunctionsFetchError extends FunctionsError {\n    constructor(context) {\n        super('Failed to send a request to the Edge Function', 'FunctionsFetchError', context);\n    }\n}\nexport class FunctionsRelayError extends FunctionsError {\n    constructor(context) {\n        super('Relay Error invoking the Edge Function', 'FunctionsRelayError', context);\n    }\n}\nexport class FunctionsHttpError extends FunctionsError {\n    constructor(context) {\n        super('Edge Function returned a non-2xx status code', 'FunctionsHttpError', context);\n    }\n}\n//# sourceMappingURL=types.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { resolveFetch } from './helper';\nimport { FunctionsFetchError, FunctionsHttpError, FunctionsRelayError, } from './types';\nexport class FunctionsClient {\n    constructor(url, { headers = {}, customFetch, } = {}) {\n        this.url = url;\n        this.headers = headers;\n        this.fetch = resolveFetch(customFetch);\n    }\n    /**\n     * Updates the authorization header\n     * @param token - the new jwt token sent in the authorisation header\n     */\n    setAuth(token) {\n        this.headers.Authorization = `Bearer ${token}`;\n    }\n    /**\n     * Invokes a function\n     * @param functionName - the name of the function to invoke\n     */\n    invoke(functionName, invokeOptions = {}) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const { headers, body: functionArgs } = invokeOptions;\n                let _headers = {};\n                let body;\n                if (functionArgs &&\n                    ((headers && !Object.prototype.hasOwnProperty.call(headers, 'Content-Type')) || !headers)) {\n                    if ((typeof Blob !== 'undefined' && functionArgs instanceof Blob) ||\n                        functionArgs instanceof ArrayBuffer) {\n                        // will work for File as File inherits Blob\n                        // also works for ArrayBuffer as it is the same underlying structure as a Blob\n                        _headers['Content-Type'] = 'application/octet-stream';\n                        body = functionArgs;\n                    }\n                    else if (typeof functionArgs === 'string') {\n                        // plain string\n                        _headers['Content-Type'] = 'text/plain';\n                        body = functionArgs;\n                    }\n                    else if (typeof FormData !== 'undefined' && functionArgs instanceof FormData) {\n                        // don't set content-type headers\n                        // Request will automatically add the right boundary value\n                        body = functionArgs;\n                    }\n                    else {\n                        // default, assume this is JSON\n                        _headers['Content-Type'] = 'application/json';\n                        body = JSON.stringify(functionArgs);\n                    }\n                }\n                const response = yield this.fetch(`${this.url}/${functionName}`, {\n                    method: 'POST',\n                    // headers priority is (high to low):\n                    // 1. invoke-level headers\n                    // 2. client-level headers\n                    // 3. default Content-Type header\n                    headers: Object.assign(Object.assign(Object.assign({}, _headers), this.headers), headers),\n                    body,\n                }).catch((fetchError) => {\n                    throw new FunctionsFetchError(fetchError);\n                });\n                const isRelayError = response.headers.get('x-relay-error');\n                if (isRelayError && isRelayError === 'true') {\n                    throw new FunctionsRelayError(response);\n                }\n                if (!response.ok) {\n                    throw new FunctionsHttpError(response);\n                }\n                let responseType = ((_a = response.headers.get('Content-Type')) !== null && _a !== void 0 ? _a : 'text/plain').split(';')[0].trim();\n                let data;\n                if (responseType === 'application/json') {\n                    data = yield response.json();\n                }\n                else if (responseType === 'application/octet-stream') {\n                    data = yield response.blob();\n                }\n                else if (responseType === 'multipart/form-data') {\n                    data = yield response.formData();\n                }\n                else {\n                    // default to text\n                    data = yield response.text();\n                }\n                return { data, error: null };\n            }\n            catch (error) {\n                return { data: null, error };\n            }\n        });\n    }\n}\n//# sourceMappingURL=FunctionsClient.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport crossFetch from 'cross-fetch';\nexport default class PostgrestBuilder {\n    constructor(builder) {\n        this.shouldThrowOnError = false;\n        this.method = builder.method;\n        this.url = builder.url;\n        this.headers = builder.headers;\n        this.schema = builder.schema;\n        this.body = builder.body;\n        this.shouldThrowOnError = builder.shouldThrowOnError;\n        this.signal = builder.signal;\n        this.allowEmpty = builder.allowEmpty;\n        if (builder.fetch) {\n            this.fetch = builder.fetch;\n        }\n        else if (typeof fetch === 'undefined') {\n            this.fetch = crossFetch;\n        }\n        else {\n            this.fetch = fetch;\n        }\n    }\n    /**\n     * If there's an error with the query, throwOnError will reject the promise by\n     * throwing the error instead of returning it as part of a successful response.\n     *\n     * {@link https://github.com/supabase/supabase-js/issues/92}\n     */\n    throwOnError() {\n        this.shouldThrowOnError = true;\n        return this;\n    }\n    then(onfulfilled, onrejected) {\n        // https://postgrest.org/en/stable/api.html#switching-schemas\n        if (this.schema === undefined) {\n            // skip\n        }\n        else if (['GET', 'HEAD'].includes(this.method)) {\n            this.headers['Accept-Profile'] = this.schema;\n        }\n        else {\n            this.headers['Content-Profile'] = this.schema;\n        }\n        if (this.method !== 'GET' && this.method !== 'HEAD') {\n            this.headers['Content-Type'] = 'application/json';\n        }\n        // NOTE: Invoke w/o `this` to avoid illegal invocation error.\n        // https://github.com/supabase/postgrest-js/pull/247\n        const _fetch = this.fetch;\n        let res = _fetch(this.url.toString(), {\n            method: this.method,\n            headers: this.headers,\n            body: JSON.stringify(this.body),\n            signal: this.signal,\n        }).then((res) => __awaiter(this, void 0, void 0, function* () {\n            var _a, _b, _c;\n            let error = null;\n            let data = null;\n            let count = null;\n            let status = res.status;\n            let statusText = res.statusText;\n            if (res.ok) {\n                if (this.method !== 'HEAD') {\n                    const body = yield res.text();\n                    if (body === '') {\n                        // Prefer: return=minimal\n                    }\n                    else if (this.headers['Accept'] === 'text/csv') {\n                        data = body;\n                    }\n                    else if (this.headers['Accept'] &&\n                        this.headers['Accept'].includes('application/vnd.pgrst.plan+text')) {\n                        data = body;\n                    }\n                    else {\n                        data = JSON.parse(body);\n                    }\n                }\n                const countHeader = (_a = this.headers['Prefer']) === null || _a === void 0 ? void 0 : _a.match(/count=(exact|planned|estimated)/);\n                const contentRange = (_b = res.headers.get('content-range')) === null || _b === void 0 ? void 0 : _b.split('/');\n                if (countHeader && contentRange && contentRange.length > 1) {\n                    count = parseInt(contentRange[1]);\n                }\n            }\n            else {\n                const body = yield res.text();\n                try {\n                    error = JSON.parse(body);\n                }\n                catch (_d) {\n                    error = {\n                        message: body,\n                    };\n                }\n                if (error && this.allowEmpty && ((_c = error === null || error === void 0 ? void 0 : error.details) === null || _c === void 0 ? void 0 : _c.includes('Results contain 0 rows'))) {\n                    error = null;\n                    status = 200;\n                    statusText = 'OK';\n                }\n                if (error && this.shouldThrowOnError) {\n                    throw error;\n                }\n            }\n            const postgrestResponse = {\n                error,\n                data,\n                count,\n                status,\n                statusText,\n            };\n            return postgrestResponse;\n        }));\n        if (!this.shouldThrowOnError) {\n            res = res.catch((fetchError) => ({\n                error: {\n                    message: `FetchError: ${fetchError.message}`,\n                    details: '',\n                    hint: '',\n                    code: fetchError.code || '',\n                },\n                data: null,\n                count: null,\n                status: 0,\n                statusText: '',\n            }));\n        }\n        return res.then(onfulfilled, onrejected);\n    }\n}\n//# sourceMappingURL=PostgrestBuilder.js.map","import PostgrestBuilder from './PostgrestBuilder';\nexport default class PostgrestTransformBuilder extends PostgrestBuilder {\n    /**\n     * Perform a SELECT on the query result.\n     *\n     * By default, `.insert()`, `.update()`, `.upsert()`, and `.delete()` do not\n     * return modified rows. By calling this method, modified rows are returned in\n     * `data`.\n     *\n     * @param columns - The columns to retrieve, separated by commas\n     */\n    select(columns) {\n        // Remove whitespaces except when quoted\n        let quoted = false;\n        const cleanedColumns = (columns !== null && columns !== void 0 ? columns : '*')\n            .split('')\n            .map((c) => {\n            if (/\\s/.test(c) && !quoted) {\n                return '';\n            }\n            if (c === '\"') {\n                quoted = !quoted;\n            }\n            return c;\n        })\n            .join('');\n        this.url.searchParams.set('select', cleanedColumns);\n        if (this.headers['Prefer']) {\n            this.headers['Prefer'] += ',';\n        }\n        this.headers['Prefer'] += 'return=representation';\n        return this;\n    }\n    order(column, { ascending = true, nullsFirst, foreignTable, } = {}) {\n        const key = foreignTable ? `${foreignTable}.order` : 'order';\n        const existingOrder = this.url.searchParams.get(key);\n        this.url.searchParams.set(key, `${existingOrder ? `${existingOrder},` : ''}${column}.${ascending ? 'asc' : 'desc'}${nullsFirst === undefined ? '' : nullsFirst ? '.nullsfirst' : '.nullslast'}`);\n        return this;\n    }\n    /**\n     * Limit the query result by `count`.\n     *\n     * @param count - The maximum number of rows to return\n     * @param options - Named parameters\n     * @param options.foreignTable - Set this to limit rows of foreign tables\n     * instead of the current table\n     */\n    limit(count, { foreignTable } = {}) {\n        const key = typeof foreignTable === 'undefined' ? 'limit' : `${foreignTable}.limit`;\n        this.url.searchParams.set(key, `${count}`);\n        return this;\n    }\n    /**\n     * Limit the query result by `from` and `to` inclusively.\n     *\n     * @param from - The starting index from which to limit the result\n     * @param to - The last index to which to limit the result\n     * @param options - Named parameters\n     * @param options.foreignTable - Set this to limit rows of foreign tables\n     * instead of the current table\n     */\n    range(from, to, { foreignTable } = {}) {\n        const keyOffset = typeof foreignTable === 'undefined' ? 'offset' : `${foreignTable}.offset`;\n        const keyLimit = typeof foreignTable === 'undefined' ? 'limit' : `${foreignTable}.limit`;\n        this.url.searchParams.set(keyOffset, `${from}`);\n        // Range is inclusive, so add 1\n        this.url.searchParams.set(keyLimit, `${to - from + 1}`);\n        return this;\n    }\n    /**\n     * Set the AbortSignal for the fetch request.\n     *\n     * @param signal - The AbortSignal to use for the fetch request\n     */\n    abortSignal(signal) {\n        this.signal = signal;\n        return this;\n    }\n    /**\n     * Return `data` as a single object instead of an array of objects.\n     *\n     * Query result must be one row (e.g. using `.limit(1)`), otherwise this\n     * returns an error.\n     */\n    single() {\n        this.headers['Accept'] = 'application/vnd.pgrst.object+json';\n        return this;\n    }\n    /**\n     * Return `data` as a single object instead of an array of objects.\n     *\n     * Query result must be zero or one row (e.g. using `.limit(1)`), otherwise\n     * this returns an error.\n     */\n    maybeSingle() {\n        this.headers['Accept'] = 'application/vnd.pgrst.object+json';\n        this.allowEmpty = true;\n        return this;\n    }\n    /**\n     * Return `data` as a string in CSV format.\n     */\n    csv() {\n        this.headers['Accept'] = 'text/csv';\n        return this;\n    }\n    /**\n     * Return `data` as an object in [GeoJSON](https://geojson.org) format.\n     */\n    geojson() {\n        this.headers['Accept'] = 'application/geo+json';\n        return this;\n    }\n    /**\n     * Return `data` as the EXPLAIN plan for the query.\n     *\n     * @param options - Named parameters\n     *\n     * @param options.analyze - If `true`, the query will be executed and the\n     * actual run time will be returned\n     *\n     * @param options.verbose - If `true`, the query identifier will be returned\n     * and `data` will include the output columns of the query\n     *\n     * @param options.settings - If `true`, include information on configuration\n     * parameters that affect query planning\n     *\n     * @param options.buffers - If `true`, include information on buffer usage\n     *\n     * @param options.wal - If `true`, include information on WAL record generation\n     *\n     * @param options.format - The format of the output, can be `\"text\"` (default)\n     * or `\"json\"`\n     */\n    explain({ analyze = false, verbose = false, settings = false, buffers = false, wal = false, format = 'text', } = {}) {\n        const options = [\n            analyze ? 'analyze' : null,\n            verbose ? 'verbose' : null,\n            settings ? 'settings' : null,\n            buffers ? 'buffers' : null,\n            wal ? 'wal' : null,\n        ]\n            .filter(Boolean)\n            .join('|');\n        // An Accept header can carry multiple media types but postgrest-js always sends one\n        const forMediatype = this.headers['Accept'];\n        this.headers['Accept'] = `application/vnd.pgrst.plan+${format}; for=\"${forMediatype}\"; options=${options};`;\n        if (format === 'json')\n            return this;\n        else\n            return this;\n    }\n    /**\n     * Rollback the query.\n     *\n     * `data` will still be returned, but the query is not committed.\n     */\n    rollback() {\n        var _a;\n        if (((_a = this.headers['Prefer']) !== null && _a !== void 0 ? _a : '').trim().length > 0) {\n            this.headers['Prefer'] += ',tx=rollback';\n        }\n        else {\n            this.headers['Prefer'] = 'tx=rollback';\n        }\n        return this;\n    }\n    /**\n     * Override the type of the returned `data`.\n     *\n     * @typeParam NewResult - The new result type to override with\n     */\n    returns() {\n        return this;\n    }\n}\n//# sourceMappingURL=PostgrestTransformBuilder.js.map","import PostgrestTransformBuilder from './PostgrestTransformBuilder';\nexport default class PostgrestFilterBuilder extends PostgrestTransformBuilder {\n    eq(column, value) {\n        this.url.searchParams.append(column, `eq.${value}`);\n        return this;\n    }\n    neq(column, value) {\n        this.url.searchParams.append(column, `neq.${value}`);\n        return this;\n    }\n    gt(column, value) {\n        this.url.searchParams.append(column, `gt.${value}`);\n        return this;\n    }\n    gte(column, value) {\n        this.url.searchParams.append(column, `gte.${value}`);\n        return this;\n    }\n    lt(column, value) {\n        this.url.searchParams.append(column, `lt.${value}`);\n        return this;\n    }\n    lte(column, value) {\n        this.url.searchParams.append(column, `lte.${value}`);\n        return this;\n    }\n    like(column, pattern) {\n        this.url.searchParams.append(column, `like.${pattern}`);\n        return this;\n    }\n    ilike(column, pattern) {\n        this.url.searchParams.append(column, `ilike.${pattern}`);\n        return this;\n    }\n    is(column, value) {\n        this.url.searchParams.append(column, `is.${value}`);\n        return this;\n    }\n    in(column, values) {\n        const cleanedValues = values\n            .map((s) => {\n            // handle postgrest reserved characters\n            // https://postgrest.org/en/v7.0.0/api.html#reserved-characters\n            if (typeof s === 'string' && new RegExp('[,()]').test(s))\n                return `\"${s}\"`;\n            else\n                return `${s}`;\n        })\n            .join(',');\n        this.url.searchParams.append(column, `in.(${cleanedValues})`);\n        return this;\n    }\n    contains(column, value) {\n        if (typeof value === 'string') {\n            // range types can be inclusive '[', ']' or exclusive '(', ')' so just\n            // keep it simple and accept a string\n            this.url.searchParams.append(column, `cs.${value}`);\n        }\n        else if (Array.isArray(value)) {\n            // array\n            this.url.searchParams.append(column, `cs.{${value.join(',')}}`);\n        }\n        else {\n            // json\n            this.url.searchParams.append(column, `cs.${JSON.stringify(value)}`);\n        }\n        return this;\n    }\n    containedBy(column, value) {\n        if (typeof value === 'string') {\n            // range\n            this.url.searchParams.append(column, `cd.${value}`);\n        }\n        else if (Array.isArray(value)) {\n            // array\n            this.url.searchParams.append(column, `cd.{${value.join(',')}}`);\n        }\n        else {\n            // json\n            this.url.searchParams.append(column, `cd.${JSON.stringify(value)}`);\n        }\n        return this;\n    }\n    rangeGt(column, range) {\n        this.url.searchParams.append(column, `sr.${range}`);\n        return this;\n    }\n    rangeGte(column, range) {\n        this.url.searchParams.append(column, `nxl.${range}`);\n        return this;\n    }\n    rangeLt(column, range) {\n        this.url.searchParams.append(column, `sl.${range}`);\n        return this;\n    }\n    rangeLte(column, range) {\n        this.url.searchParams.append(column, `nxr.${range}`);\n        return this;\n    }\n    rangeAdjacent(column, range) {\n        this.url.searchParams.append(column, `adj.${range}`);\n        return this;\n    }\n    overlaps(column, value) {\n        if (typeof value === 'string') {\n            // range\n            this.url.searchParams.append(column, `ov.${value}`);\n        }\n        else {\n            // array\n            this.url.searchParams.append(column, `ov.{${value.join(',')}}`);\n        }\n        return this;\n    }\n    textSearch(column, query, { config, type } = {}) {\n        let typePart = '';\n        if (type === 'plain') {\n            typePart = 'pl';\n        }\n        else if (type === 'phrase') {\n            typePart = 'ph';\n        }\n        else if (type === 'websearch') {\n            typePart = 'w';\n        }\n        const configPart = config === undefined ? '' : `(${config})`;\n        this.url.searchParams.append(column, `${typePart}fts${configPart}.${query}`);\n        return this;\n    }\n    match(query) {\n        Object.entries(query).forEach(([column, value]) => {\n            this.url.searchParams.append(column, `eq.${value}`);\n        });\n        return this;\n    }\n    not(column, operator, value) {\n        this.url.searchParams.append(column, `not.${operator}.${value}`);\n        return this;\n    }\n    /**\n     * Match only rows which satisfy at least one of the filters.\n     *\n     * Unlike most filters, `filters` is used as-is and needs to follow [PostgREST\n     * syntax](https://postgrest.org/en/stable/api.html#operators). You also need\n     * to make sure it's properly sanitized.\n     *\n     * It's currently not possible to do an `.or()` filter across multiple tables.\n     *\n     * @param filters - The filters to use, following PostgREST syntax\n     * @param foreignTable - Set this to filter on foreign tables instead of the\n     * current table\n     */\n    or(filters, { foreignTable } = {}) {\n        const key = foreignTable ? `${foreignTable}.or` : 'or';\n        this.url.searchParams.append(key, `(${filters})`);\n        return this;\n    }\n    filter(column, operator, value) {\n        this.url.searchParams.append(column, `${operator}.${value}`);\n        return this;\n    }\n}\n//# sourceMappingURL=PostgrestFilterBuilder.js.map","import PostgrestFilterBuilder from './PostgrestFilterBuilder';\nexport default class PostgrestQueryBuilder {\n    constructor(url, { headers = {}, schema, fetch, }) {\n        this.url = url;\n        this.headers = headers;\n        this.schema = schema;\n        this.fetch = fetch;\n    }\n    /**\n     * Perform a SELECT query on the table or view.\n     *\n     * @param columns - The columns to retrieve, separated by commas\n     *\n     * @param options - Named parameters\n     *\n     * @param options.head - When set to `true`, `data` will not be returned.\n     * Useful if you only need the count.\n     *\n     * @param options.count - Count algorithm to use to count rows in the table or view.\n     *\n     * `\"exact\"`: Exact but slow count algorithm. Performs a `COUNT(*)` under the\n     * hood.\n     *\n     * `\"planned\"`: Approximated but fast count algorithm. Uses the Postgres\n     * statistics under the hood.\n     *\n     * `\"estimated\"`: Uses exact count for low numbers and planned count for high\n     * numbers.\n     */\n    select(columns, { head = false, count, } = {}) {\n        const method = head ? 'HEAD' : 'GET';\n        // Remove whitespaces except when quoted\n        let quoted = false;\n        const cleanedColumns = (columns !== null && columns !== void 0 ? columns : '*')\n            .split('')\n            .map((c) => {\n            if (/\\s/.test(c) && !quoted) {\n                return '';\n            }\n            if (c === '\"') {\n                quoted = !quoted;\n            }\n            return c;\n        })\n            .join('');\n        this.url.searchParams.set('select', cleanedColumns);\n        if (count) {\n            this.headers['Prefer'] = `count=${count}`;\n        }\n        return new PostgrestFilterBuilder({\n            method,\n            url: this.url,\n            headers: this.headers,\n            schema: this.schema,\n            fetch: this.fetch,\n            allowEmpty: false,\n        });\n    }\n    /**\n     * Perform an INSERT into the table or view.\n     *\n     * By default, inserted rows are not returned. To return it, chain the call\n     * with `.select()`.\n     *\n     * @param values - The values to insert. Pass an object to insert a single row\n     * or an array to insert multiple rows.\n     *\n     * @param options - Named parameters\n     *\n     * @param options.count - Count algorithm to use to count inserted rows.\n     *\n     * `\"exact\"`: Exact but slow count algorithm. Performs a `COUNT(*)` under the\n     * hood.\n     *\n     * `\"planned\"`: Approximated but fast count algorithm. Uses the Postgres\n     * statistics under the hood.\n     *\n     * `\"estimated\"`: Uses exact count for low numbers and planned count for high\n     * numbers.\n     */\n    insert(values, { count, } = {}) {\n        const method = 'POST';\n        const prefersHeaders = [];\n        const body = values;\n        if (count) {\n            prefersHeaders.push(`count=${count}`);\n        }\n        if (this.headers['Prefer']) {\n            prefersHeaders.unshift(this.headers['Prefer']);\n        }\n        this.headers['Prefer'] = prefersHeaders.join(',');\n        if (Array.isArray(values)) {\n            const columns = values.reduce((acc, x) => acc.concat(Object.keys(x)), []);\n            if (columns.length > 0) {\n                const uniqueColumns = [...new Set(columns)].map((column) => `\"${column}\"`);\n                this.url.searchParams.set('columns', uniqueColumns.join(','));\n            }\n        }\n        return new PostgrestFilterBuilder({\n            method,\n            url: this.url,\n            headers: this.headers,\n            schema: this.schema,\n            body,\n            fetch: this.fetch,\n            allowEmpty: false,\n        });\n    }\n    /**\n     * Perform an UPSERT on the table or view. Depending on the column(s) passed\n     * to `onConflict`, `.upsert()` allows you to perform the equivalent of\n     * `.insert()` if a row with the corresponding `onConflict` columns doesn't\n     * exist, or if it does exist, perform an alternative action depending on\n     * `ignoreDuplicates`.\n     *\n     * By default, upserted rows are not returned. To return it, chain the call\n     * with `.select()`.\n     *\n     * @param values - The values to upsert with. Pass an object to upsert a\n     * single row or an array to upsert multiple rows.\n     *\n     * @param options - Named parameters\n     *\n     * @param options.onConflict - Comma-separated UNIQUE column(s) to specify how\n     * duplicate rows are determined. Two rows are duplicates if all the\n     * `onConflict` columns are equal.\n     *\n     * @param options.ignoreDuplicates - If `true`, duplicate rows are ignored. If\n     * `false`, duplicate rows are merged with existing rows.\n     *\n     * @param options.count - Count algorithm to use to count upserted rows.\n     *\n     * `\"exact\"`: Exact but slow count algorithm. Performs a `COUNT(*)` under the\n     * hood.\n     *\n     * `\"planned\"`: Approximated but fast count algorithm. Uses the Postgres\n     * statistics under the hood.\n     *\n     * `\"estimated\"`: Uses exact count for low numbers and planned count for high\n     * numbers.\n     */\n    upsert(values, { onConflict, ignoreDuplicates = false, count, } = {}) {\n        const method = 'POST';\n        const prefersHeaders = [`resolution=${ignoreDuplicates ? 'ignore' : 'merge'}-duplicates`];\n        if (onConflict !== undefined)\n            this.url.searchParams.set('on_conflict', onConflict);\n        const body = values;\n        if (count) {\n            prefersHeaders.push(`count=${count}`);\n        }\n        if (this.headers['Prefer']) {\n            prefersHeaders.unshift(this.headers['Prefer']);\n        }\n        this.headers['Prefer'] = prefersHeaders.join(',');\n        return new PostgrestFilterBuilder({\n            method,\n            url: this.url,\n            headers: this.headers,\n            schema: this.schema,\n            body,\n            fetch: this.fetch,\n            allowEmpty: false,\n        });\n    }\n    /**\n     * Perform an UPDATE on the table or view.\n     *\n     * By default, updated rows are not returned. To return it, chain the call\n     * with `.select()` after filters.\n     *\n     * @param values - The values to update with\n     *\n     * @param options - Named parameters\n     *\n     * @param options.count - Count algorithm to use to count updated rows.\n     *\n     * `\"exact\"`: Exact but slow count algorithm. Performs a `COUNT(*)` under the\n     * hood.\n     *\n     * `\"planned\"`: Approximated but fast count algorithm. Uses the Postgres\n     * statistics under the hood.\n     *\n     * `\"estimated\"`: Uses exact count for low numbers and planned count for high\n     * numbers.\n     */\n    update(values, { count, } = {}) {\n        const method = 'PATCH';\n        const prefersHeaders = [];\n        const body = values;\n        if (count) {\n            prefersHeaders.push(`count=${count}`);\n        }\n        if (this.headers['Prefer']) {\n            prefersHeaders.unshift(this.headers['Prefer']);\n        }\n        this.headers['Prefer'] = prefersHeaders.join(',');\n        return new PostgrestFilterBuilder({\n            method,\n            url: this.url,\n            headers: this.headers,\n            schema: this.schema,\n            body,\n            fetch: this.fetch,\n            allowEmpty: false,\n        });\n    }\n    /**\n     * Perform a DELETE on the table or view.\n     *\n     * By default, deleted rows are not returned. To return it, chain the call\n     * with `.select()` after filters.\n     *\n     * @param options - Named parameters\n     *\n     * @param options.count - Count algorithm to use to count deleted rows.\n     *\n     * `\"exact\"`: Exact but slow count algorithm. Performs a `COUNT(*)` under the\n     * hood.\n     *\n     * `\"planned\"`: Approximated but fast count algorithm. Uses the Postgres\n     * statistics under the hood.\n     *\n     * `\"estimated\"`: Uses exact count for low numbers and planned count for high\n     * numbers.\n     */\n    delete({ count, } = {}) {\n        const method = 'DELETE';\n        const prefersHeaders = [];\n        if (count) {\n            prefersHeaders.push(`count=${count}`);\n        }\n        if (this.headers['Prefer']) {\n            prefersHeaders.unshift(this.headers['Prefer']);\n        }\n        this.headers['Prefer'] = prefersHeaders.join(',');\n        return new PostgrestFilterBuilder({\n            method,\n            url: this.url,\n            headers: this.headers,\n            schema: this.schema,\n            fetch: this.fetch,\n            allowEmpty: false,\n        });\n    }\n}\n//# sourceMappingURL=PostgrestQueryBuilder.js.map","export const version = '1.1.0';\n//# sourceMappingURL=version.js.map","import { version } from './version';\nexport const DEFAULT_HEADERS = { 'X-Client-Info': `postgrest-js/${version}` };\n//# sourceMappingURL=constants.js.map","import PostgrestQueryBuilder from './PostgrestQueryBuilder';\nimport PostgrestFilterBuilder from './PostgrestFilterBuilder';\nimport { DEFAULT_HEADERS } from './constants';\n/**\n * PostgREST client.\n *\n * @typeParam Database - Types for the schema from the [type\n * generator](https://supabase.com/docs/reference/javascript/next/typescript-support)\n *\n * @typeParam SchemaName - Postgres schema to switch to. Must be a string\n * literal, the same one passed to the constructor. If the schema is not\n * `\"public\"`, this must be supplied manually.\n */\nexport default class PostgrestClient {\n    // TODO: Add back shouldThrowOnError once we figure out the typings\n    /**\n     * Creates a PostgREST client.\n     *\n     * @param url - URL of the PostgREST endpoint\n     * @param options - Named parameters\n     * @param options.headers - Custom headers\n     * @param options.schema - Postgres schema to switch to\n     * @param options.fetch - Custom fetch\n     */\n    constructor(url, { headers = {}, schema, fetch, } = {}) {\n        this.url = url;\n        this.headers = Object.assign(Object.assign({}, DEFAULT_HEADERS), headers);\n        this.schema = schema;\n        this.fetch = fetch;\n    }\n    from(relation) {\n        const url = new URL(`${this.url}/${relation}`);\n        return new PostgrestQueryBuilder(url, {\n            headers: Object.assign({}, this.headers),\n            schema: this.schema,\n            fetch: this.fetch,\n        });\n    }\n    /**\n     * Perform a function call.\n     *\n     * @param fn - The function name to call\n     * @param args - The arguments to pass to the function call\n     * @param options - Named parameters\n     * @param options.head - When set to `true`, `data` will not be returned.\n     * Useful if you only need the count.\n     * @param options.count - Count algorithm to use to count rows returned by the\n     * function. Only applicable for [set-returning\n     * functions](https://www.postgresql.org/docs/current/functions-srf.html).\n     *\n     * `\"exact\"`: Exact but slow count algorithm. Performs a `COUNT(*)` under the\n     * hood.\n     *\n     * `\"planned\"`: Approximated but fast count algorithm. Uses the Postgres\n     * statistics under the hood.\n     *\n     * `\"estimated\"`: Uses exact count for low numbers and planned count for high\n     * numbers.\n     */\n    rpc(fn, args = {}, { head = false, count, } = {}) {\n        let method;\n        const url = new URL(`${this.url}/rpc/${fn}`);\n        let body;\n        if (head) {\n            method = 'HEAD';\n            Object.entries(args).forEach(([name, value]) => {\n                url.searchParams.append(name, `${value}`);\n            });\n        }\n        else {\n            method = 'POST';\n            body = args;\n        }\n        const headers = Object.assign({}, this.headers);\n        if (count) {\n            headers['Prefer'] = `count=${count}`;\n        }\n        return new PostgrestFilterBuilder({\n            method,\n            url,\n            headers,\n            schema: this.schema,\n            body,\n            fetch: this.fetch,\n            allowEmpty: false,\n        });\n    }\n}\n//# sourceMappingURL=PostgrestClient.js.map","var noop = exports.noop = function(){};\n\nexports.extend = function extend(dest, source) {\n    for (var prop in source) {\n        dest[prop] = source[prop];\n    }\n};\n\nexports.eventEmitterListenerCount =\n    require('events').EventEmitter.listenerCount ||\n    function(emitter, type) { return emitter.listeners(type).length; };\n\nexports.bufferAllocUnsafe = Buffer.allocUnsafe ?\n    Buffer.allocUnsafe :\n    function oldBufferAllocUnsafe(size) { return new Buffer(size); };\n\nexports.bufferFromString = Buffer.from ?\n    Buffer.from :\n    function oldBufferFromString(string, encoding) {\n      return new Buffer(string, encoding);\n    };\n\nexports.BufferingLogger = function createBufferingLogger(identifier, uniqueID) {\n    var logFunction = require('debug')(identifier);\n    if (logFunction.enabled) {\n        var logger = new BufferingLogger(identifier, uniqueID, logFunction);\n        var debug = logger.log.bind(logger);\n        debug.printOutput = logger.printOutput.bind(logger);\n        debug.enabled = logFunction.enabled;\n        return debug;\n    }\n    logFunction.printOutput = noop;\n    return logFunction;\n};\n\nfunction BufferingLogger(identifier, uniqueID, logFunction) {\n    this.logFunction = logFunction;\n    this.identifier = identifier;\n    this.uniqueID = uniqueID;\n    this.buffer = [];\n}\n\nBufferingLogger.prototype.log = function() {\n  this.buffer.push([ new Date(), Array.prototype.slice.call(arguments) ]);\n  return this;\n};\n\nBufferingLogger.prototype.clear = function() {\n  this.buffer = [];\n  return this;\n};\n\nBufferingLogger.prototype.printOutput = function(logFunction) {\n    if (!logFunction) { logFunction = this.logFunction; }\n    var uniqueID = this.uniqueID;\n    this.buffer.forEach(function(entry) {\n        var date = entry[0].toLocaleString();\n        var args = entry[1].slice();\n        var formatString = args[0];\n        if (formatString !== (void 0) && formatString !== null) {\n            formatString = '%s - %s - ' + formatString.toString();\n            args.splice(0, 1, formatString, date, uniqueID);\n            logFunction.apply(global, args);\n        }\n    });\n};\n","/************************************************************************\n *  Copyright 2010-2015 Brian McKelvey.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n ***********************************************************************/\n\nvar bufferUtil = require('bufferutil');\nvar bufferAllocUnsafe = require('./utils').bufferAllocUnsafe;\n\nconst DECODE_HEADER = 1;\nconst WAITING_FOR_16_BIT_LENGTH = 2;\nconst WAITING_FOR_64_BIT_LENGTH = 3;\nconst WAITING_FOR_MASK_KEY = 4;\nconst WAITING_FOR_PAYLOAD = 5;\nconst COMPLETE = 6;\n\n// WebSocketConnection will pass shared buffer objects for maskBytes and\n// frameHeader into the constructor to avoid tons of small memory allocations\n// for each frame we have to parse.  This is only used for parsing frames\n// we receive off the wire.\nfunction WebSocketFrame(maskBytes, frameHeader, config) {\n    this.maskBytes = maskBytes;\n    this.frameHeader = frameHeader;\n    this.config = config;\n    this.maxReceivedFrameSize = config.maxReceivedFrameSize;\n    this.protocolError = false;\n    this.frameTooLarge = false;\n    this.invalidCloseFrameLength = false;\n    this.parseState = DECODE_HEADER;\n    this.closeStatus = -1;\n}\n\nWebSocketFrame.prototype.addData = function(bufferList) {\n    if (this.parseState === DECODE_HEADER) {\n        if (bufferList.length >= 2) {\n            bufferList.joinInto(this.frameHeader, 0, 0, 2);\n            bufferList.advance(2);\n            var firstByte = this.frameHeader[0];\n            var secondByte = this.frameHeader[1];\n\n            this.fin     = Boolean(firstByte  & 0x80);\n            this.rsv1    = Boolean(firstByte  & 0x40);\n            this.rsv2    = Boolean(firstByte  & 0x20);\n            this.rsv3    = Boolean(firstByte  & 0x10);\n            this.mask    = Boolean(secondByte & 0x80);\n\n            this.opcode  = firstByte  & 0x0F;\n            this.length = secondByte & 0x7F;\n\n            // Control frame sanity check\n            if (this.opcode >= 0x08) {\n                if (this.length > 125) {\n                    this.protocolError = true;\n                    this.dropReason = 'Illegal control frame longer than 125 bytes.';\n                    return true;\n                }\n                if (!this.fin) {\n                    this.protocolError = true;\n                    this.dropReason = 'Control frames must not be fragmented.';\n                    return true;\n                }\n            }\n\n            if (this.length === 126) {\n                this.parseState = WAITING_FOR_16_BIT_LENGTH;\n            }\n            else if (this.length === 127) {\n                this.parseState = WAITING_FOR_64_BIT_LENGTH;\n            }\n            else {\n                this.parseState = WAITING_FOR_MASK_KEY;\n            }\n        }\n    }\n    if (this.parseState === WAITING_FOR_16_BIT_LENGTH) {\n        if (bufferList.length >= 2) {\n            bufferList.joinInto(this.frameHeader, 2, 0, 2);\n            bufferList.advance(2);\n            this.length = this.frameHeader.readUInt16BE(2);\n            this.parseState = WAITING_FOR_MASK_KEY;\n        }\n    }\n    else if (this.parseState === WAITING_FOR_64_BIT_LENGTH) {\n        if (bufferList.length >= 8) {\n            bufferList.joinInto(this.frameHeader, 2, 0, 8);\n            bufferList.advance(8);\n            var lengthPair = [\n              this.frameHeader.readUInt32BE(2),\n              this.frameHeader.readUInt32BE(2+4)\n            ];\n\n            if (lengthPair[0] !== 0) {\n                this.protocolError = true;\n                this.dropReason = 'Unsupported 64-bit length frame received';\n                return true;\n            }\n            this.length = lengthPair[1];\n            this.parseState = WAITING_FOR_MASK_KEY;\n        }\n    }\n\n    if (this.parseState === WAITING_FOR_MASK_KEY) {\n        if (this.mask) {\n            if (bufferList.length >= 4) {\n                bufferList.joinInto(this.maskBytes, 0, 0, 4);\n                bufferList.advance(4);\n                this.parseState = WAITING_FOR_PAYLOAD;\n            }\n        }\n        else {\n            this.parseState = WAITING_FOR_PAYLOAD;\n        }\n    }\n\n    if (this.parseState === WAITING_FOR_PAYLOAD) {\n        if (this.length > this.maxReceivedFrameSize) {\n            this.frameTooLarge = true;\n            this.dropReason = 'Frame size of ' + this.length.toString(10) +\n                              ' bytes exceeds maximum accepted frame size';\n            return true;\n        }\n\n        if (this.length === 0) {\n            this.binaryPayload = bufferAllocUnsafe(0);\n            this.parseState = COMPLETE;\n            return true;\n        }\n        if (bufferList.length >= this.length) {\n            this.binaryPayload = bufferList.take(this.length);\n            bufferList.advance(this.length);\n            if (this.mask) {\n                bufferUtil.unmask(this.binaryPayload, this.maskBytes);\n                // xor(this.binaryPayload, this.maskBytes, 0);\n            }\n\n            if (this.opcode === 0x08) { // WebSocketOpcode.CONNECTION_CLOSE\n                if (this.length === 1) {\n                    // Invalid length for a close frame.  Must be zero or at least two.\n                    this.binaryPayload = bufferAllocUnsafe(0);\n                    this.invalidCloseFrameLength = true;\n                }\n                if (this.length >= 2) {\n                    this.closeStatus = this.binaryPayload.readUInt16BE(0);\n                    this.binaryPayload = this.binaryPayload.slice(2);\n                }\n            }\n\n            this.parseState = COMPLETE;\n            return true;\n        }\n    }\n    return false;\n};\n\nWebSocketFrame.prototype.throwAwayPayload = function(bufferList) {\n    if (bufferList.length >= this.length) {\n        bufferList.advance(this.length);\n        this.parseState = COMPLETE;\n        return true;\n    }\n    return false;\n};\n\nWebSocketFrame.prototype.toBuffer = function(nullMask) {\n    var maskKey;\n    var headerLength = 2;\n    var data;\n    var outputPos;\n    var firstByte = 0x00;\n    var secondByte = 0x00;\n\n    if (this.fin) {\n        firstByte |= 0x80;\n    }\n    if (this.rsv1) {\n        firstByte |= 0x40;\n    }\n    if (this.rsv2) {\n        firstByte |= 0x20;\n    }\n    if (this.rsv3) {\n        firstByte |= 0x10;\n    }\n    if (this.mask) {\n        secondByte |= 0x80;\n    }\n\n    firstByte |= (this.opcode & 0x0F);\n\n    // the close frame is a special case because the close reason is\n    // prepended to the payload data.\n    if (this.opcode === 0x08) {\n        this.length = 2;\n        if (this.binaryPayload) {\n            this.length += this.binaryPayload.length;\n        }\n        data = bufferAllocUnsafe(this.length);\n        data.writeUInt16BE(this.closeStatus, 0);\n        if (this.length > 2) {\n            this.binaryPayload.copy(data, 2);\n        }\n    }\n    else if (this.binaryPayload) {\n        data = this.binaryPayload;\n        this.length = data.length;\n    }\n    else {\n        this.length = 0;\n    }\n\n    if (this.length <= 125) {\n        // encode the length directly into the two-byte frame header\n        secondByte |= (this.length & 0x7F);\n    }\n    else if (this.length > 125 && this.length <= 0xFFFF) {\n        // Use 16-bit length\n        secondByte |= 126;\n        headerLength += 2;\n    }\n    else if (this.length > 0xFFFF) {\n        // Use 64-bit length\n        secondByte |= 127;\n        headerLength += 8;\n    }\n\n    var output = bufferAllocUnsafe(this.length + headerLength + (this.mask ? 4 : 0));\n\n    // write the frame header\n    output[0] = firstByte;\n    output[1] = secondByte;\n\n    outputPos = 2;\n\n    if (this.length > 125 && this.length <= 0xFFFF) {\n        // write 16-bit length\n        output.writeUInt16BE(this.length, outputPos);\n        outputPos += 2;\n    }\n    else if (this.length > 0xFFFF) {\n        // write 64-bit length\n        output.writeUInt32BE(0x00000000, outputPos);\n        output.writeUInt32BE(this.length, outputPos + 4);\n        outputPos += 8;\n    }\n\n    if (this.mask) {\n        maskKey = nullMask ? 0 : ((Math.random() * 0xFFFFFFFF) >>> 0);\n        this.maskBytes.writeUInt32BE(maskKey, 0);\n\n        // write the mask key\n        this.maskBytes.copy(output, outputPos);\n        outputPos += 4;\n\n        if (data) {\n          bufferUtil.mask(data, this.maskBytes, output, outputPos, this.length);\n        }\n    }\n    else if (data) {\n        data.copy(output, outputPos);\n    }\n\n    return output;\n};\n\nWebSocketFrame.prototype.toString = function() {\n    return 'Opcode: ' + this.opcode + ', fin: ' + this.fin + ', length: ' + this.length + ', hasPayload: ' + Boolean(this.binaryPayload) + ', masked: ' + this.mask;\n};\n\n\nmodule.exports = WebSocketFrame;\n","// This file was copied from https://github.com/substack/node-bufferlist\n// and modified to be able to copy bytes from the bufferlist directly into\n// a pre-existing fixed-size buffer without an additional memory allocation.\n\n// bufferlist.js\n// Treat a linked list of buffers as a single variable-size buffer.\nvar Buffer = require('buffer').Buffer;\nvar EventEmitter = require('events').EventEmitter;\nvar bufferAllocUnsafe = require('../lib/utils').bufferAllocUnsafe;\n\nmodule.exports = BufferList;\nmodule.exports.BufferList = BufferList; // backwards compatibility\n\nfunction BufferList(opts) {\n    if (!(this instanceof BufferList)) return new BufferList(opts);\n    EventEmitter.call(this);\n    var self = this;\n    \n    if (typeof(opts) == 'undefined') opts = {};\n    \n    // default encoding to use for take(). Leaving as 'undefined'\n    // makes take() return a Buffer instead.\n    self.encoding = opts.encoding;\n    \n    var head = { next : null, buffer : null };\n    var last = { next : null, buffer : null };\n    \n    // length can get negative when advanced past the end\n    // and this is the desired behavior\n    var length = 0;\n    self.__defineGetter__('length', function () {\n        return length;\n    });\n    \n    // keep an offset of the head to decide when to head = head.next\n    var offset = 0;\n    \n    // Write to the bufferlist. Emits 'write'. Always returns true.\n    self.write = function (buf) {\n        if (!head.buffer) {\n            head.buffer = buf;\n            last = head;\n        }\n        else {\n            last.next = { next : null, buffer : buf };\n            last = last.next;\n        }\n        length += buf.length;\n        self.emit('write', buf);\n        return true;\n    };\n    \n    self.end = function (buf) {\n        if (Buffer.isBuffer(buf)) self.write(buf);\n    };\n    \n    // Push buffers to the end of the linked list. (deprecated)\n    // Return this (self).\n    self.push = function () {\n        var args = [].concat.apply([], arguments);\n        args.forEach(self.write);\n        return self;\n    };\n    \n    // For each buffer, perform some action.\n    // If fn's result is a true value, cut out early.\n    // Returns this (self).\n    self.forEach = function (fn) {\n        if (!head.buffer) return bufferAllocUnsafe(0);\n        \n        if (head.buffer.length - offset <= 0) return self;\n        var firstBuf = head.buffer.slice(offset);\n        \n        var b = { buffer : firstBuf, next : head.next };\n        \n        while (b && b.buffer) {\n            var r = fn(b.buffer);\n            if (r) break;\n            b = b.next;\n        }\n        \n        return self;\n    };\n    \n    // Create a single Buffer out of all the chunks or some subset specified by\n    // start and one-past the end (like slice) in bytes.\n    self.join = function (start, end) {\n        if (!head.buffer) return bufferAllocUnsafe(0);\n        if (start == undefined) start = 0;\n        if (end == undefined) end = self.length;\n        \n        var big = bufferAllocUnsafe(end - start);\n        var ix = 0;\n        self.forEach(function (buffer) {\n            if (start < (ix + buffer.length) && ix < end) {\n                // at least partially contained in the range\n                buffer.copy(\n                    big,\n                    Math.max(0, ix - start),\n                    Math.max(0, start - ix),\n                    Math.min(buffer.length, end - ix)\n                );\n            }\n            ix += buffer.length;\n            if (ix > end) return true; // stop processing past end\n        });\n        \n        return big;\n    };\n    \n    self.joinInto = function (targetBuffer, targetStart, sourceStart, sourceEnd) {\n        if (!head.buffer) return new bufferAllocUnsafe(0);\n        if (sourceStart == undefined) sourceStart = 0;\n        if (sourceEnd == undefined) sourceEnd = self.length;\n        \n        var big = targetBuffer;\n        if (big.length - targetStart < sourceEnd - sourceStart) {\n            throw new Error(\"Insufficient space available in target Buffer.\");\n        }\n        var ix = 0;\n        self.forEach(function (buffer) {\n            if (sourceStart < (ix + buffer.length) && ix < sourceEnd) {\n                // at least partially contained in the range\n                buffer.copy(\n                    big,\n                    Math.max(targetStart, targetStart + ix - sourceStart),\n                    Math.max(0, sourceStart - ix),\n                    Math.min(buffer.length, sourceEnd - ix)\n                );\n            }\n            ix += buffer.length;\n            if (ix > sourceEnd) return true; // stop processing past end\n        });\n        \n        return big;\n    };\n    \n    // Advance the buffer stream by n bytes.\n    // If n the aggregate advance offset passes the end of the buffer list,\n    // operations such as .take() will return empty strings until enough data is\n    // pushed.\n    // Returns this (self).\n    self.advance = function (n) {\n        offset += n;\n        length -= n;\n        while (head.buffer && offset >= head.buffer.length) {\n            offset -= head.buffer.length;\n            head = head.next\n                ? head.next\n                : { buffer : null, next : null }\n            ;\n        }\n        if (head.buffer === null) last = { next : null, buffer : null };\n        self.emit('advance', n);\n        return self;\n    };\n    \n    // Take n bytes from the start of the buffers.\n    // Returns a string.\n    // If there are less than n bytes in all the buffers or n is undefined,\n    // returns the entire concatenated buffer string.\n    self.take = function (n, encoding) {\n        if (n == undefined) n = self.length;\n        else if (typeof n !== 'number') {\n            encoding = n;\n            n = self.length;\n        }\n        var b = head;\n        if (!encoding) encoding = self.encoding;\n        if (encoding) {\n            var acc = '';\n            self.forEach(function (buffer) {\n                if (n <= 0) return true;\n                acc += buffer.toString(\n                    encoding, 0, Math.min(n,buffer.length)\n                );\n                n -= buffer.length;\n            });\n            return acc;\n        } else {\n            // If no 'encoding' is specified, then return a Buffer.\n            return self.join(0, n);\n        }\n    };\n    \n    // The entire concatenated buffer as a string.\n    self.toString = function () {\n        return self.take('binary');\n    };\n}\nrequire('util').inherits(BufferList, EventEmitter);\n","/************************************************************************\n *  Copyright 2010-2015 Brian McKelvey.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n ***********************************************************************/\n\nvar util = require('util');\nvar utils = require('./utils');\nvar EventEmitter = require('events').EventEmitter;\nvar WebSocketFrame = require('./WebSocketFrame');\nvar BufferList = require('../vendor/FastBufferList');\nvar isValidUTF8 = require('utf-8-validate');\nvar bufferAllocUnsafe = utils.bufferAllocUnsafe;\nvar bufferFromString = utils.bufferFromString;\n\n// Connected, fully-open, ready to send and receive frames\nconst STATE_OPEN = 'open';\n// Received a close frame from the remote peer\nconst STATE_PEER_REQUESTED_CLOSE = 'peer_requested_close';\n// Sent close frame to remote peer.  No further data can be sent.\nconst STATE_ENDING = 'ending';\n// Connection is fully closed.  No further data can be sent or received.\nconst STATE_CLOSED = 'closed';\n\nvar setImmediateImpl = ('setImmediate' in global) ?\n                            global.setImmediate.bind(global) :\n                            process.nextTick.bind(process);\n\nvar idCounter = 0;\n\nfunction WebSocketConnection(socket, extensions, protocol, maskOutgoingPackets, config) {\n    this._debug = utils.BufferingLogger('websocket:connection', ++idCounter);\n    this._debug('constructor');\n    \n    if (this._debug.enabled) {\n        instrumentSocketForDebugging(this, socket);\n    }\n    \n    // Superclass Constructor\n    EventEmitter.call(this);\n\n    this._pingListenerCount = 0;\n    this.on('newListener', function(ev) {\n        if (ev === 'ping'){\n            this._pingListenerCount++;\n        }\n      }).on('removeListener', function(ev) {\n        if (ev === 'ping') {\n            this._pingListenerCount--;\n        }\n    });\n\n    this.config = config;\n    this.socket = socket;\n    this.protocol = protocol;\n    this.extensions = extensions;\n    this.remoteAddress = socket.remoteAddress;\n    this.closeReasonCode = -1;\n    this.closeDescription = null;\n    this.closeEventEmitted = false;\n\n    // We have to mask outgoing packets if we're acting as a WebSocket client.\n    this.maskOutgoingPackets = maskOutgoingPackets;\n\n    // We re-use the same buffers for the mask and frame header for all frames\n    // received on each connection to avoid a small memory allocation for each\n    // frame.\n    this.maskBytes = bufferAllocUnsafe(4);\n    this.frameHeader = bufferAllocUnsafe(10);\n\n    // the BufferList will handle the data streaming in\n    this.bufferList = new BufferList();\n\n    // Prepare for receiving first frame\n    this.currentFrame = new WebSocketFrame(this.maskBytes, this.frameHeader, this.config);\n    this.fragmentationSize = 0; // data received so far...\n    this.frameQueue = [];\n    \n    // Various bits of connection state\n    this.connected = true;\n    this.state = STATE_OPEN;\n    this.waitingForCloseResponse = false;\n    // Received TCP FIN, socket's readable stream is finished.\n    this.receivedEnd = false;\n\n    this.closeTimeout = this.config.closeTimeout;\n    this.assembleFragments = this.config.assembleFragments;\n    this.maxReceivedMessageSize = this.config.maxReceivedMessageSize;\n\n    this.outputBufferFull = false;\n    this.inputPaused = false;\n    this.receivedDataHandler = this.processReceivedData.bind(this);\n    this._closeTimerHandler = this.handleCloseTimer.bind(this);\n\n    // Disable nagle algorithm?\n    this.socket.setNoDelay(this.config.disableNagleAlgorithm);\n\n    // Make sure there is no socket inactivity timeout\n    this.socket.setTimeout(0);\n\n    if (this.config.keepalive && !this.config.useNativeKeepalive) {\n        if (typeof(this.config.keepaliveInterval) !== 'number') {\n            throw new Error('keepaliveInterval must be specified and numeric ' +\n                            'if keepalive is true.');\n        }\n        this._keepaliveTimerHandler = this.handleKeepaliveTimer.bind(this);\n        this.setKeepaliveTimer();\n\n        if (this.config.dropConnectionOnKeepaliveTimeout) {\n            if (typeof(this.config.keepaliveGracePeriod) !== 'number') {\n                throw new Error('keepaliveGracePeriod  must be specified and ' +\n                                'numeric if dropConnectionOnKeepaliveTimeout ' +\n                                'is true.');\n            }\n            this._gracePeriodTimerHandler = this.handleGracePeriodTimer.bind(this);\n        }\n    }\n    else if (this.config.keepalive && this.config.useNativeKeepalive) {\n        if (!('setKeepAlive' in this.socket)) {\n            throw new Error('Unable to use native keepalive: unsupported by ' +\n                            'this version of Node.');\n        }\n        this.socket.setKeepAlive(true, this.config.keepaliveInterval);\n    }\n    \n    // The HTTP Client seems to subscribe to socket error events\n    // and re-dispatch them in such a way that doesn't make sense\n    // for users of our client, so we want to make sure nobody\n    // else is listening for error events on the socket besides us.\n    this.socket.removeAllListeners('error');\n}\n\nWebSocketConnection.CLOSE_REASON_NORMAL = 1000;\nWebSocketConnection.CLOSE_REASON_GOING_AWAY = 1001;\nWebSocketConnection.CLOSE_REASON_PROTOCOL_ERROR = 1002;\nWebSocketConnection.CLOSE_REASON_UNPROCESSABLE_INPUT = 1003;\nWebSocketConnection.CLOSE_REASON_RESERVED = 1004; // Reserved value.  Undefined meaning.\nWebSocketConnection.CLOSE_REASON_NOT_PROVIDED = 1005; // Not to be used on the wire\nWebSocketConnection.CLOSE_REASON_ABNORMAL = 1006; // Not to be used on the wire\nWebSocketConnection.CLOSE_REASON_INVALID_DATA = 1007;\nWebSocketConnection.CLOSE_REASON_POLICY_VIOLATION = 1008;\nWebSocketConnection.CLOSE_REASON_MESSAGE_TOO_BIG = 1009;\nWebSocketConnection.CLOSE_REASON_EXTENSION_REQUIRED = 1010;\nWebSocketConnection.CLOSE_REASON_INTERNAL_SERVER_ERROR = 1011;\nWebSocketConnection.CLOSE_REASON_TLS_HANDSHAKE_FAILED = 1015; // Not to be used on the wire\n\nWebSocketConnection.CLOSE_DESCRIPTIONS = {\n    1000: 'Normal connection closure',\n    1001: 'Remote peer is going away',\n    1002: 'Protocol error',\n    1003: 'Unprocessable input',\n    1004: 'Reserved',\n    1005: 'Reason not provided',\n    1006: 'Abnormal closure, no further detail available',\n    1007: 'Invalid data received',\n    1008: 'Policy violation',\n    1009: 'Message too big',\n    1010: 'Extension requested by client is required',\n    1011: 'Internal Server Error',\n    1015: 'TLS Handshake Failed'\n};\n\nfunction validateCloseReason(code) {\n    if (code < 1000) {\n        // Status codes in the range 0-999 are not used\n        return false;\n    }\n    if (code >= 1000 && code <= 2999) {\n        // Codes from 1000 - 2999 are reserved for use by the protocol.  Only\n        // a few codes are defined, all others are currently illegal.\n        return [1000, 1001, 1002, 1003, 1007, 1008, 1009, 1010, 1011, 1012, 1013, 1014, 1015].indexOf(code) !== -1;\n    }\n    if (code >= 3000 && code <= 3999) {\n        // Reserved for use by libraries, frameworks, and applications.\n        // Should be registered with IANA.  Interpretation of these codes is\n        // undefined by the WebSocket protocol.\n        return true;\n    }\n    if (code >= 4000 && code <= 4999) {\n        // Reserved for private use.  Interpretation of these codes is\n        // undefined by the WebSocket protocol.\n        return true;\n    }\n    if (code >= 5000) {\n        return false;\n    }\n}\n\nutil.inherits(WebSocketConnection, EventEmitter);\n\nWebSocketConnection.prototype._addSocketEventListeners = function() {\n    this.socket.on('error', this.handleSocketError.bind(this));\n    this.socket.on('end', this.handleSocketEnd.bind(this));\n    this.socket.on('close', this.handleSocketClose.bind(this));\n    this.socket.on('drain', this.handleSocketDrain.bind(this));\n    this.socket.on('pause', this.handleSocketPause.bind(this));\n    this.socket.on('resume', this.handleSocketResume.bind(this));\n    this.socket.on('data', this.handleSocketData.bind(this));\n};\n\n// set or reset the keepalive timer when data is received.\nWebSocketConnection.prototype.setKeepaliveTimer = function() {\n    this._debug('setKeepaliveTimer');\n    if (!this.config.keepalive  || this.config.useNativeKeepalive) { return; }\n    this.clearKeepaliveTimer();\n    this.clearGracePeriodTimer();\n    this._keepaliveTimeoutID = setTimeout(this._keepaliveTimerHandler, this.config.keepaliveInterval);\n};\n\nWebSocketConnection.prototype.clearKeepaliveTimer = function() {\n    if (this._keepaliveTimeoutID) {\n        clearTimeout(this._keepaliveTimeoutID);\n    }\n};\n\n// No data has been received within config.keepaliveTimeout ms.\nWebSocketConnection.prototype.handleKeepaliveTimer = function() {\n    this._debug('handleKeepaliveTimer');\n    this._keepaliveTimeoutID = null;\n    this.ping();\n\n    // If we are configured to drop connections if the client doesn't respond\n    // then set the grace period timer.\n    if (this.config.dropConnectionOnKeepaliveTimeout) {\n        this.setGracePeriodTimer();\n    }\n    else {\n        // Otherwise reset the keepalive timer to send the next ping.\n        this.setKeepaliveTimer();\n    }\n};\n\nWebSocketConnection.prototype.setGracePeriodTimer = function() {\n    this._debug('setGracePeriodTimer');\n    this.clearGracePeriodTimer();\n    this._gracePeriodTimeoutID = setTimeout(this._gracePeriodTimerHandler, this.config.keepaliveGracePeriod);\n};\n\nWebSocketConnection.prototype.clearGracePeriodTimer = function() {\n    if (this._gracePeriodTimeoutID) {\n        clearTimeout(this._gracePeriodTimeoutID);\n    }\n};\n\nWebSocketConnection.prototype.handleGracePeriodTimer = function() {\n    this._debug('handleGracePeriodTimer');\n    // If this is called, the client has not responded and is assumed dead.\n    this._gracePeriodTimeoutID = null;\n    this.drop(WebSocketConnection.CLOSE_REASON_ABNORMAL, 'Peer not responding.', true);\n};\n\nWebSocketConnection.prototype.handleSocketData = function(data) {\n    this._debug('handleSocketData');\n    // Reset the keepalive timer when receiving data of any kind.\n    this.setKeepaliveTimer();\n\n    // Add received data to our bufferList, which efficiently holds received\n    // data chunks in a linked list of Buffer objects.\n    this.bufferList.write(data);\n\n    this.processReceivedData();\n};\n\nWebSocketConnection.prototype.processReceivedData = function() {\n    this._debug('processReceivedData');\n    // If we're not connected, we should ignore any data remaining on the buffer.\n    if (!this.connected) { return; }\n\n    // Receiving/parsing is expected to be halted when paused.\n    if (this.inputPaused) { return; }\n\n    var frame = this.currentFrame;\n\n    // WebSocketFrame.prototype.addData returns true if all data necessary to\n    // parse the frame was available.  It returns false if we are waiting for\n    // more data to come in on the wire.\n    if (!frame.addData(this.bufferList)) { this._debug('-- insufficient data for frame'); return; }\n\n    var self = this;\n\n    // Handle possible parsing errors\n    if (frame.protocolError) {\n        // Something bad happened.. get rid of this client.\n        this._debug('-- protocol error');\n        process.nextTick(function() {\n            self.drop(WebSocketConnection.CLOSE_REASON_PROTOCOL_ERROR, frame.dropReason);\n        });\n        return;\n    }\n    else if (frame.frameTooLarge) {\n        this._debug('-- frame too large');\n        process.nextTick(function() {\n            self.drop(WebSocketConnection.CLOSE_REASON_MESSAGE_TOO_BIG, frame.dropReason);\n        });\n        return;\n    }\n\n    // For now since we don't support extensions, all RSV bits are illegal\n    if (frame.rsv1 || frame.rsv2 || frame.rsv3) {\n        this._debug('-- illegal rsv flag');\n        process.nextTick(function() {\n            self.drop(WebSocketConnection.CLOSE_REASON_PROTOCOL_ERROR,\n              'Unsupported usage of rsv bits without negotiated extension.');\n        });\n        return;\n    }\n\n    if (!this.assembleFragments) {\n        this._debug('-- emitting frame');\n        process.nextTick(function() { self.emit('frame', frame); });\n    }\n\n    process.nextTick(function() { self.processFrame(frame); });\n    \n    this.currentFrame = new WebSocketFrame(this.maskBytes, this.frameHeader, this.config);\n\n    // If there's data remaining, schedule additional processing, but yield\n    // for now so that other connections have a chance to have their data\n    // processed.  We use setImmediate here instead of process.nextTick to\n    // explicitly indicate that we wish for other I/O to be handled first.\n    if (this.bufferList.length > 0) {\n        setImmediateImpl(this.receivedDataHandler);\n    }\n};\n\nWebSocketConnection.prototype.handleSocketError = function(error) {\n    this._debug('handleSocketError: %j', error);\n    if (this.state === STATE_CLOSED) {\n\t\t// See https://github.com/theturtle32/WebSocket-Node/issues/288\n        this._debug('  --- Socket \\'error\\' after \\'close\\'');\n        return;\n    }\n    this.closeReasonCode = WebSocketConnection.CLOSE_REASON_ABNORMAL;\n    this.closeDescription = 'Socket Error: ' + error.syscall + ' ' + error.code;\n    this.connected = false;\n    this.state = STATE_CLOSED;\n    this.fragmentationSize = 0;\n    if (utils.eventEmitterListenerCount(this, 'error') > 0) {\n        this.emit('error', error);\n    }\n    this.socket.destroy();\n    this._debug.printOutput();\n};\n\nWebSocketConnection.prototype.handleSocketEnd = function() {\n    this._debug('handleSocketEnd: received socket end.  state = %s', this.state);\n    this.receivedEnd = true;\n    if (this.state === STATE_CLOSED) {\n        // When using the TLS module, sometimes the socket will emit 'end'\n        // after it emits 'close'.  I don't think that's correct behavior,\n        // but we should deal with it gracefully by ignoring it.\n        this._debug('  --- Socket \\'end\\' after \\'close\\'');\n        return;\n    }\n    if (this.state !== STATE_PEER_REQUESTED_CLOSE &&\n        this.state !== STATE_ENDING) {\n      this._debug('  --- UNEXPECTED socket end.');\n      this.socket.end();\n    }\n};\n\nWebSocketConnection.prototype.handleSocketClose = function(hadError) {\n    this._debug('handleSocketClose: received socket close');\n    this.socketHadError = hadError;\n    this.connected = false;\n    this.state = STATE_CLOSED;\n    // If closeReasonCode is still set to -1 at this point then we must\n    // not have received a close frame!!\n    if (this.closeReasonCode === -1) {\n        this.closeReasonCode = WebSocketConnection.CLOSE_REASON_ABNORMAL;\n        this.closeDescription = 'Connection dropped by remote peer.';\n    }\n    this.clearCloseTimer();\n    this.clearKeepaliveTimer();\n    this.clearGracePeriodTimer();\n    if (!this.closeEventEmitted) {\n        this.closeEventEmitted = true;\n        this._debug('-- Emitting WebSocketConnection close event');\n        this.emit('close', this.closeReasonCode, this.closeDescription);\n    }\n};\n\nWebSocketConnection.prototype.handleSocketDrain = function() {\n    this._debug('handleSocketDrain: socket drain event');\n    this.outputBufferFull = false;\n    this.emit('drain');\n};\n\nWebSocketConnection.prototype.handleSocketPause = function() {\n    this._debug('handleSocketPause: socket pause event');\n    this.inputPaused = true;\n    this.emit('pause');\n};\n\nWebSocketConnection.prototype.handleSocketResume = function() {\n    this._debug('handleSocketResume: socket resume event');\n    this.inputPaused = false;\n    this.emit('resume');\n    this.processReceivedData();\n};\n\nWebSocketConnection.prototype.pause = function() {\n    this._debug('pause: pause requested');\n    this.socket.pause();\n};\n\nWebSocketConnection.prototype.resume = function() {\n    this._debug('resume: resume requested');\n    this.socket.resume();\n};\n\nWebSocketConnection.prototype.close = function(reasonCode, description) {\n    if (this.connected) {\n        this._debug('close: Initating clean WebSocket close sequence.');\n        if ('number' !== typeof reasonCode) {\n            reasonCode = WebSocketConnection.CLOSE_REASON_NORMAL;\n        }\n        if (!validateCloseReason(reasonCode)) {\n            throw new Error('Close code ' + reasonCode + ' is not valid.');\n        }\n        if ('string' !== typeof description) {\n            description = WebSocketConnection.CLOSE_DESCRIPTIONS[reasonCode];\n        }\n        this.closeReasonCode = reasonCode;\n        this.closeDescription = description;\n        this.setCloseTimer();\n        this.sendCloseFrame(this.closeReasonCode, this.closeDescription);\n        this.state = STATE_ENDING;\n        this.connected = false;\n    }\n};\n\nWebSocketConnection.prototype.drop = function(reasonCode, description, skipCloseFrame) {\n    this._debug('drop');\n    if (typeof(reasonCode) !== 'number') {\n        reasonCode = WebSocketConnection.CLOSE_REASON_PROTOCOL_ERROR;\n    }\n\n    if (typeof(description) !== 'string') {\n        // If no description is provided, try to look one up based on the\n        // specified reasonCode.\n        description = WebSocketConnection.CLOSE_DESCRIPTIONS[reasonCode];\n    }\n\n    this._debug('Forcefully dropping connection. skipCloseFrame: %s, code: %d, description: %s',\n        skipCloseFrame, reasonCode, description\n    );\n\n    this.closeReasonCode = reasonCode;\n    this.closeDescription = description;\n    this.frameQueue = [];\n    this.fragmentationSize = 0;\n    if (!skipCloseFrame) {\n        this.sendCloseFrame(reasonCode, description);\n    }\n    this.connected = false;\n    this.state = STATE_CLOSED;\n    this.clearCloseTimer();\n    this.clearKeepaliveTimer();\n    this.clearGracePeriodTimer();\n\n    if (!this.closeEventEmitted) {\n        this.closeEventEmitted = true;\n        this._debug('Emitting WebSocketConnection close event');\n        this.emit('close', this.closeReasonCode, this.closeDescription);\n    }\n    \n    this._debug('Drop: destroying socket');\n    this.socket.destroy();\n};\n\nWebSocketConnection.prototype.setCloseTimer = function() {\n    this._debug('setCloseTimer');\n    this.clearCloseTimer();\n    this._debug('Setting close timer');\n    this.waitingForCloseResponse = true;\n    this.closeTimer = setTimeout(this._closeTimerHandler, this.closeTimeout);\n};\n\nWebSocketConnection.prototype.clearCloseTimer = function() {\n    this._debug('clearCloseTimer');\n    if (this.closeTimer) {\n        this._debug('Clearing close timer');\n        clearTimeout(this.closeTimer);\n        this.waitingForCloseResponse = false;\n        this.closeTimer = null;\n    }\n};\n\nWebSocketConnection.prototype.handleCloseTimer = function() {\n    this._debug('handleCloseTimer');\n    this.closeTimer = null;\n    if (this.waitingForCloseResponse) {\n        this._debug('Close response not received from client.  Forcing socket end.');\n        this.waitingForCloseResponse = false;\n        this.state = STATE_CLOSED;\n        this.socket.end();\n    }\n};\n\nWebSocketConnection.prototype.processFrame = function(frame) {\n    this._debug('processFrame');\n    this._debug(' -- frame: %s', frame);\n    \n    // Any non-control opcode besides 0x00 (continuation) received in the\n    // middle of a fragmented message is illegal.\n    if (this.frameQueue.length !== 0 && (frame.opcode > 0x00 && frame.opcode < 0x08)) {\n        this.drop(WebSocketConnection.CLOSE_REASON_PROTOCOL_ERROR,\n          'Illegal frame opcode 0x' + frame.opcode.toString(16) + ' ' +\n          'received in middle of fragmented message.');\n        return;\n    }\n\n    switch(frame.opcode) {\n        case 0x02: // WebSocketFrame.BINARY_FRAME\n            this._debug('-- Binary Frame');\n            if (this.assembleFragments) {\n                if (frame.fin) {\n                    // Complete single-frame message received\n                    this._debug('---- Emitting \\'message\\' event');\n                    this.emit('message', {\n                        type: 'binary',\n                        binaryData: frame.binaryPayload\n                    });\n                }\n                else {\n                    // beginning of a fragmented message\n                    this.frameQueue.push(frame);\n                    this.fragmentationSize = frame.length;\n                }\n            }\n            break;\n        case 0x01: // WebSocketFrame.TEXT_FRAME\n            this._debug('-- Text Frame');\n            if (this.assembleFragments) {\n                if (frame.fin) {\n                    if (!isValidUTF8(frame.binaryPayload)) {\n                        this.drop(WebSocketConnection.CLOSE_REASON_INVALID_DATA,\n                          'Invalid UTF-8 Data Received');\n                        return;\n                    }\n                    // Complete single-frame message received\n                    this._debug('---- Emitting \\'message\\' event');\n                    this.emit('message', {\n                        type: 'utf8',\n                        utf8Data: frame.binaryPayload.toString('utf8')\n                    });\n                }\n                else {\n                    // beginning of a fragmented message\n                    this.frameQueue.push(frame);\n                    this.fragmentationSize = frame.length;\n                }\n            }\n            break;\n        case 0x00: // WebSocketFrame.CONTINUATION\n            this._debug('-- Continuation Frame');\n            if (this.assembleFragments) {\n                if (this.frameQueue.length === 0) {\n                    this.drop(WebSocketConnection.CLOSE_REASON_PROTOCOL_ERROR,\n                      'Unexpected Continuation Frame');\n                    return;\n                }\n\n                this.fragmentationSize += frame.length;\n\n                if (this.fragmentationSize > this.maxReceivedMessageSize) {\n                    this.drop(WebSocketConnection.CLOSE_REASON_MESSAGE_TOO_BIG,\n                      'Maximum message size exceeded.');\n                    return;\n                }\n\n                this.frameQueue.push(frame);\n\n                if (frame.fin) {\n                    // end of fragmented message, so we process the whole\n                    // message now.  We also have to decode the utf-8 data\n                    // for text frames after combining all the fragments.\n                    var bytesCopied = 0;\n                    var binaryPayload = bufferAllocUnsafe(this.fragmentationSize);\n                    var opcode = this.frameQueue[0].opcode;\n                    this.frameQueue.forEach(function (currentFrame) {\n                        currentFrame.binaryPayload.copy(binaryPayload, bytesCopied);\n                        bytesCopied += currentFrame.binaryPayload.length;\n                    });\n                    this.frameQueue = [];\n                    this.fragmentationSize = 0;\n\n                    switch (opcode) {\n                        case 0x02: // WebSocketOpcode.BINARY_FRAME\n                            this.emit('message', {\n                                type: 'binary',\n                                binaryData: binaryPayload\n                            });\n                            break;\n                        case 0x01: // WebSocketOpcode.TEXT_FRAME\n                            if (!isValidUTF8(binaryPayload)) {\n                                this.drop(WebSocketConnection.CLOSE_REASON_INVALID_DATA,\n                                  'Invalid UTF-8 Data Received');\n                                return;\n                            }\n                            this.emit('message', {\n                                type: 'utf8',\n                                utf8Data: binaryPayload.toString('utf8')\n                            });\n                            break;\n                        default:\n                            this.drop(WebSocketConnection.CLOSE_REASON_PROTOCOL_ERROR,\n                              'Unexpected first opcode in fragmentation sequence: 0x' + opcode.toString(16));\n                            return;\n                    }\n                }\n            }\n            break;\n        case 0x09: // WebSocketFrame.PING\n            this._debug('-- Ping Frame');\n\n            if (this._pingListenerCount > 0) {\n                // logic to emit the ping frame: this is only done when a listener is known to exist\n                // Expose a function allowing the user to override the default ping() behavior\n                var cancelled = false;\n                var cancel = function() { \n                  cancelled = true; \n                };\n                this.emit('ping', cancel, frame.binaryPayload);\n\n                // Only send a pong if the client did not indicate that he would like to cancel\n                if (!cancelled) {\n                    this.pong(frame.binaryPayload);\n                }\n            }\n            else {\n                this.pong(frame.binaryPayload);\n            }\n\n            break;\n        case 0x0A: // WebSocketFrame.PONG\n            this._debug('-- Pong Frame');\n            this.emit('pong', frame.binaryPayload);\n            break;\n        case 0x08: // WebSocketFrame.CONNECTION_CLOSE\n            this._debug('-- Close Frame');\n            if (this.waitingForCloseResponse) {\n                // Got response to our request to close the connection.\n                // Close is complete, so we just hang up.\n                this._debug('---- Got close response from peer.  Completing closing handshake.');\n                this.clearCloseTimer();\n                this.waitingForCloseResponse = false;\n                this.state = STATE_CLOSED;\n                this.socket.end();\n                return;\n            }\n            \n            this._debug('---- Closing handshake initiated by peer.');\n            // Got request from other party to close connection.\n            // Send back acknowledgement and then hang up.\n            this.state = STATE_PEER_REQUESTED_CLOSE;\n            var respondCloseReasonCode;\n\n            // Make sure the close reason provided is legal according to\n            // the protocol spec.  Providing no close status is legal.\n            // WebSocketFrame sets closeStatus to -1 by default, so if it\n            // is still -1, then no status was provided.\n            if (frame.invalidCloseFrameLength) {\n                this.closeReasonCode = 1005; // 1005 = No reason provided.\n                respondCloseReasonCode = WebSocketConnection.CLOSE_REASON_PROTOCOL_ERROR;\n            }\n            else if (frame.closeStatus === -1 || validateCloseReason(frame.closeStatus)) {\n                this.closeReasonCode = frame.closeStatus;\n                respondCloseReasonCode = WebSocketConnection.CLOSE_REASON_NORMAL;\n            }\n            else {\n                this.closeReasonCode = frame.closeStatus;\n                respondCloseReasonCode = WebSocketConnection.CLOSE_REASON_PROTOCOL_ERROR;\n            }\n            \n            // If there is a textual description in the close frame, extract it.\n            if (frame.binaryPayload.length > 1) {\n                if (!isValidUTF8(frame.binaryPayload)) {\n                    this.drop(WebSocketConnection.CLOSE_REASON_INVALID_DATA,\n                      'Invalid UTF-8 Data Received');\n                    return;\n                }\n                this.closeDescription = frame.binaryPayload.toString('utf8');\n            }\n            else {\n                this.closeDescription = WebSocketConnection.CLOSE_DESCRIPTIONS[this.closeReasonCode];\n            }\n            this._debug(\n                '------ Remote peer %s - code: %d - %s - close frame payload length: %d',\n                this.remoteAddress, this.closeReasonCode,\n                this.closeDescription, frame.length\n            );\n            this._debug('------ responding to remote peer\\'s close request.');\n            this.sendCloseFrame(respondCloseReasonCode, null);\n            this.connected = false;\n            break;\n        default:\n            this._debug('-- Unrecognized Opcode %d', frame.opcode);\n            this.drop(WebSocketConnection.CLOSE_REASON_PROTOCOL_ERROR,\n              'Unrecognized Opcode: 0x' + frame.opcode.toString(16));\n            break;\n    }\n};\n\nWebSocketConnection.prototype.send = function(data, cb) {\n    this._debug('send');\n    if (Buffer.isBuffer(data)) {\n        this.sendBytes(data, cb);\n    }\n    else if (typeof(data['toString']) === 'function') {\n        this.sendUTF(data, cb);\n    }\n    else {\n        throw new Error('Data provided must either be a Node Buffer or implement toString()');\n    }\n};\n\nWebSocketConnection.prototype.sendUTF = function(data, cb) {\n    data = bufferFromString(data.toString(), 'utf8');\n    this._debug('sendUTF: %d bytes', data.length);\n    var frame = new WebSocketFrame(this.maskBytes, this.frameHeader, this.config);\n    frame.opcode = 0x01; // WebSocketOpcode.TEXT_FRAME\n    frame.binaryPayload = data;\n    this.fragmentAndSend(frame, cb);\n};\n\nWebSocketConnection.prototype.sendBytes = function(data, cb) {\n    this._debug('sendBytes');\n    if (!Buffer.isBuffer(data)) {\n        throw new Error('You must pass a Node Buffer object to WebSocketConnection.prototype.sendBytes()');\n    }\n    var frame = new WebSocketFrame(this.maskBytes, this.frameHeader, this.config);\n    frame.opcode = 0x02; // WebSocketOpcode.BINARY_FRAME\n    frame.binaryPayload = data;\n    this.fragmentAndSend(frame, cb);\n};\n\nWebSocketConnection.prototype.ping = function(data) {\n    this._debug('ping');\n    var frame = new WebSocketFrame(this.maskBytes, this.frameHeader, this.config);\n    frame.opcode = 0x09; // WebSocketOpcode.PING\n    frame.fin = true;\n    if (data) {\n        if (!Buffer.isBuffer(data)) {\n            data = bufferFromString(data.toString(), 'utf8');\n        }\n        if (data.length > 125) {\n            this._debug('WebSocket: Data for ping is longer than 125 bytes.  Truncating.');\n            data = data.slice(0,124);\n        }\n        frame.binaryPayload = data;\n    }\n    this.sendFrame(frame);\n};\n\n// Pong frames have to echo back the contents of the data portion of the\n// ping frame exactly, byte for byte.\nWebSocketConnection.prototype.pong = function(binaryPayload) {\n    this._debug('pong');\n    var frame = new WebSocketFrame(this.maskBytes, this.frameHeader, this.config);\n    frame.opcode = 0x0A; // WebSocketOpcode.PONG\n    if (Buffer.isBuffer(binaryPayload) && binaryPayload.length > 125) {\n        this._debug('WebSocket: Data for pong is longer than 125 bytes.  Truncating.');\n        binaryPayload = binaryPayload.slice(0,124);\n    }\n    frame.binaryPayload = binaryPayload;\n    frame.fin = true;\n    this.sendFrame(frame);\n};\n\nWebSocketConnection.prototype.fragmentAndSend = function(frame, cb) {\n    this._debug('fragmentAndSend');\n    if (frame.opcode > 0x07) {\n        throw new Error('You cannot fragment control frames.');\n    }\n\n    var threshold = this.config.fragmentationThreshold;\n    var length = frame.binaryPayload.length;\n\n    // Send immediately if fragmentation is disabled or the message is not\n    // larger than the fragmentation threshold.\n    if (!this.config.fragmentOutgoingMessages || (frame.binaryPayload && length <= threshold)) {\n        frame.fin = true;\n        this.sendFrame(frame, cb);\n        return;\n    }\n    \n    var numFragments = Math.ceil(length / threshold);\n    var sentFragments = 0;\n    var sentCallback = function fragmentSentCallback(err) {\n        if (err) {\n            if (typeof cb === 'function') {\n                // pass only the first error\n                cb(err);\n                cb = null;\n            }\n            return;\n        }\n        ++sentFragments;\n        if ((sentFragments === numFragments) && (typeof cb === 'function')) {\n            cb();\n        }\n    };\n    for (var i=1; i <= numFragments; i++) {\n        var currentFrame = new WebSocketFrame(this.maskBytes, this.frameHeader, this.config);\n        \n        // continuation opcode except for first frame.\n        currentFrame.opcode = (i === 1) ? frame.opcode : 0x00;\n        \n        // fin set on last frame only\n        currentFrame.fin = (i === numFragments);\n        \n        // length is likely to be shorter on the last fragment\n        var currentLength = (i === numFragments) ? length - (threshold * (i-1)) : threshold;\n        var sliceStart = threshold * (i-1);\n        \n        // Slice the right portion of the original payload\n        currentFrame.binaryPayload = frame.binaryPayload.slice(sliceStart, sliceStart + currentLength);\n        \n        this.sendFrame(currentFrame, sentCallback);\n    }\n};\n\nWebSocketConnection.prototype.sendCloseFrame = function(reasonCode, description, cb) {\n    if (typeof(reasonCode) !== 'number') {\n        reasonCode = WebSocketConnection.CLOSE_REASON_NORMAL;\n    }\n    \n    this._debug('sendCloseFrame state: %s, reasonCode: %d, description: %s', this.state, reasonCode, description);\n    \n    if (this.state !== STATE_OPEN && this.state !== STATE_PEER_REQUESTED_CLOSE) { return; }\n    \n    var frame = new WebSocketFrame(this.maskBytes, this.frameHeader, this.config);\n    frame.fin = true;\n    frame.opcode = 0x08; // WebSocketOpcode.CONNECTION_CLOSE\n    frame.closeStatus = reasonCode;\n    if (typeof(description) === 'string') {\n        frame.binaryPayload = bufferFromString(description, 'utf8');\n    }\n    \n    this.sendFrame(frame, cb);\n    this.socket.end();\n};\n\nWebSocketConnection.prototype.sendFrame = function(frame, cb) {\n    this._debug('sendFrame');\n    frame.mask = this.maskOutgoingPackets;\n    var flushed = this.socket.write(frame.toBuffer(), cb);\n    this.outputBufferFull = !flushed;\n    return flushed;\n};\n\nmodule.exports = WebSocketConnection;\n\n\n\nfunction instrumentSocketForDebugging(connection, socket) {\n    /* jshint loopfunc: true */\n    if (!connection._debug.enabled) { return; }\n    \n    var originalSocketEmit = socket.emit;\n    socket.emit = function(event) {\n        connection._debug('||| Socket Event  \\'%s\\'', event);\n        originalSocketEmit.apply(this, arguments);\n    };\n    \n    for (var key in socket) {\n        if ('function' !== typeof(socket[key])) { continue; }\n        if (['emit'].indexOf(key) !== -1) { continue; }\n        (function(key) {\n            var original = socket[key];\n            if (key === 'on') {\n                socket[key] = function proxyMethod__EventEmitter__On() {\n                    connection._debug('||| Socket method called:  %s (%s)', key, arguments[0]);\n                    return original.apply(this, arguments);\n                };\n                return;\n            }\n            socket[key] = function proxyMethod() {\n                connection._debug('||| Socket method called:  %s', key);\n                return original.apply(this, arguments);\n            };\n        })(key);\n    }\n}\n","/************************************************************************\n *  Copyright 2010-2015 Brian McKelvey.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n ***********************************************************************/\n\nvar crypto = require('crypto');\nvar util = require('util');\nvar url = require('url');\nvar EventEmitter = require('events').EventEmitter;\nvar WebSocketConnection = require('./WebSocketConnection');\n\nvar headerValueSplitRegExp = /,\\s*/;\nvar headerParamSplitRegExp = /;\\s*/;\nvar headerSanitizeRegExp = /[\\r\\n]/g;\nvar xForwardedForSeparatorRegExp = /,\\s*/;\nvar separators = [\n    '(', ')', '<', '>', '@',\n    ',', ';', ':', '\\\\', '\\\"',\n    '/', '[', ']', '?', '=',\n    '{', '}', ' ', String.fromCharCode(9)\n];\nvar controlChars = [String.fromCharCode(127) /* DEL */];\nfor (var i=0; i < 31; i ++) {\n    /* US-ASCII Control Characters */\n    controlChars.push(String.fromCharCode(i));\n}\n\nvar cookieNameValidateRegEx = /([\\x00-\\x20\\x22\\x28\\x29\\x2c\\x2f\\x3a-\\x3f\\x40\\x5b-\\x5e\\x7b\\x7d\\x7f])/;\nvar cookieValueValidateRegEx = /[^\\x21\\x23-\\x2b\\x2d-\\x3a\\x3c-\\x5b\\x5d-\\x7e]/;\nvar cookieValueDQuoteValidateRegEx = /^\"[^\"]*\"$/;\nvar controlCharsAndSemicolonRegEx = /[\\x00-\\x20\\x3b]/g;\n\nvar cookieSeparatorRegEx = /[;,] */;\n\nvar httpStatusDescriptions = {\n    100: 'Continue',\n    101: 'Switching Protocols',\n    200: 'OK',\n    201: 'Created',\n    203: 'Non-Authoritative Information',\n    204: 'No Content',\n    205: 'Reset Content',\n    206: 'Partial Content',\n    300: 'Multiple Choices',\n    301: 'Moved Permanently',\n    302: 'Found',\n    303: 'See Other',\n    304: 'Not Modified',\n    305: 'Use Proxy',\n    307: 'Temporary Redirect',\n    400: 'Bad Request',\n    401: 'Unauthorized',\n    402: 'Payment Required',\n    403: 'Forbidden',\n    404: 'Not Found',\n    406: 'Not Acceptable',\n    407: 'Proxy Authorization Required',\n    408: 'Request Timeout',\n    409: 'Conflict',\n    410: 'Gone',\n    411: 'Length Required',\n    412: 'Precondition Failed',\n    413: 'Request Entity Too Long',\n    414: 'Request-URI Too Long',\n    415: 'Unsupported Media Type',\n    416: 'Requested Range Not Satisfiable',\n    417: 'Expectation Failed',\n    426: 'Upgrade Required',\n    500: 'Internal Server Error',\n    501: 'Not Implemented',\n    502: 'Bad Gateway',\n    503: 'Service Unavailable',\n    504: 'Gateway Timeout',\n    505: 'HTTP Version Not Supported'\n};\n\nfunction WebSocketRequest(socket, httpRequest, serverConfig) {\n    // Superclass Constructor\n    EventEmitter.call(this);\n\n    this.socket = socket;\n    this.httpRequest = httpRequest;\n    this.resource = httpRequest.url;\n    this.remoteAddress = socket.remoteAddress;\n    this.remoteAddresses = [this.remoteAddress];\n    this.serverConfig = serverConfig;\n\n    // Watch for the underlying TCP socket closing before we call accept\n    this._socketIsClosing = false;\n    this._socketCloseHandler = this._handleSocketCloseBeforeAccept.bind(this);\n    this.socket.on('end', this._socketCloseHandler);\n    this.socket.on('close', this._socketCloseHandler);\n\n    this._resolved = false;\n}\n\nutil.inherits(WebSocketRequest, EventEmitter);\n\nWebSocketRequest.prototype.readHandshake = function() {\n    var self = this;\n    var request = this.httpRequest;\n\n    // Decode URL\n    this.resourceURL = url.parse(this.resource, true);\n\n    this.host = request.headers['host'];\n    if (!this.host) {\n        throw new Error('Client must provide a Host header.');\n    }\n\n    this.key = request.headers['sec-websocket-key'];\n    if (!this.key) {\n        throw new Error('Client must provide a value for Sec-WebSocket-Key.');\n    }\n\n    this.webSocketVersion = parseInt(request.headers['sec-websocket-version'], 10);\n\n    if (!this.webSocketVersion || isNaN(this.webSocketVersion)) {\n        throw new Error('Client must provide a value for Sec-WebSocket-Version.');\n    }\n\n    switch (this.webSocketVersion) {\n        case 8:\n        case 13:\n            break;\n        default:\n            var e = new Error('Unsupported websocket client version: ' + this.webSocketVersion +\n                              'Only versions 8 and 13 are supported.');\n            e.httpCode = 426;\n            e.headers = {\n                'Sec-WebSocket-Version': '13'\n            };\n            throw e;\n    }\n\n    if (this.webSocketVersion === 13) {\n        this.origin = request.headers['origin'];\n    }\n    else if (this.webSocketVersion === 8) {\n        this.origin = request.headers['sec-websocket-origin'];\n    }\n\n    // Protocol is optional.\n    var protocolString = request.headers['sec-websocket-protocol'];\n    this.protocolFullCaseMap = {};\n    this.requestedProtocols = [];\n    if (protocolString) {\n        var requestedProtocolsFullCase = protocolString.split(headerValueSplitRegExp);\n        requestedProtocolsFullCase.forEach(function(protocol) {\n            var lcProtocol = protocol.toLocaleLowerCase();\n            self.requestedProtocols.push(lcProtocol);\n            self.protocolFullCaseMap[lcProtocol] = protocol;\n        });\n    }\n\n    if (!this.serverConfig.ignoreXForwardedFor &&\n        request.headers['x-forwarded-for']) {\n        var immediatePeerIP = this.remoteAddress;\n        this.remoteAddresses = request.headers['x-forwarded-for']\n            .split(xForwardedForSeparatorRegExp);\n        this.remoteAddresses.push(immediatePeerIP);\n        this.remoteAddress = this.remoteAddresses[0];\n    }\n\n    // Extensions are optional.\n    if (this.serverConfig.parseExtensions) {\n        var extensionsString = request.headers['sec-websocket-extensions'];\n        this.requestedExtensions = this.parseExtensions(extensionsString);\n    } else {\n        this.requestedExtensions = [];\n    }\n\n    // Cookies are optional\n    if (this.serverConfig.parseCookies) {\n        var cookieString = request.headers['cookie'];\n        this.cookies = this.parseCookies(cookieString);\n    } else {\n        this.cookies = [];\n    }\n};\n\nWebSocketRequest.prototype.parseExtensions = function(extensionsString) {\n    if (!extensionsString || extensionsString.length === 0) {\n        return [];\n    }\n    var extensions = extensionsString.toLocaleLowerCase().split(headerValueSplitRegExp);\n    extensions.forEach(function(extension, index, array) {\n        var params = extension.split(headerParamSplitRegExp);\n        var extensionName = params[0];\n        var extensionParams = params.slice(1);\n        extensionParams.forEach(function(rawParam, index, array) {\n            var arr = rawParam.split('=');\n            var obj = {\n                name: arr[0],\n                value: arr[1]\n            };\n            array.splice(index, 1, obj);\n        });\n        var obj = {\n            name: extensionName,\n            params: extensionParams\n        };\n        array.splice(index, 1, obj);\n    });\n    return extensions;\n};\n\n// This function adapted from node-cookie\n// https://github.com/shtylman/node-cookie\nWebSocketRequest.prototype.parseCookies = function(str) {\n    // Sanity Check\n    if (!str || typeof(str) !== 'string') {\n        return [];\n    }\n\n    var cookies = [];\n    var pairs = str.split(cookieSeparatorRegEx);\n\n    pairs.forEach(function(pair) {\n        var eq_idx = pair.indexOf('=');\n        if (eq_idx === -1) {\n            cookies.push({\n                name: pair,\n                value: null\n            });\n            return;\n        }\n\n        var key = pair.substr(0, eq_idx).trim();\n        var val = pair.substr(++eq_idx, pair.length).trim();\n\n        // quoted values\n        if ('\"' === val[0]) {\n            val = val.slice(1, -1);\n        }\n\n        cookies.push({\n            name: key,\n            value: decodeURIComponent(val)\n        });\n    });\n\n    return cookies;\n};\n\nWebSocketRequest.prototype.accept = function(acceptedProtocol, allowedOrigin, cookies) {\n    this._verifyResolution();\n\n    // TODO: Handle extensions\n\n    var protocolFullCase;\n\n    if (acceptedProtocol) {\n        protocolFullCase = this.protocolFullCaseMap[acceptedProtocol.toLocaleLowerCase()];\n        if (typeof(protocolFullCase) === 'undefined') {\n            protocolFullCase = acceptedProtocol;\n        }\n    }\n    else {\n        protocolFullCase = acceptedProtocol;\n    }\n    this.protocolFullCaseMap = null;\n\n    // Create key validation hash\n    var sha1 = crypto.createHash('sha1');\n    sha1.update(this.key + '258EAFA5-E914-47DA-95CA-C5AB0DC85B11');\n    var acceptKey = sha1.digest('base64');\n\n    var response = 'HTTP/1.1 101 Switching Protocols\\r\\n' +\n                   'Upgrade: websocket\\r\\n' +\n                   'Connection: Upgrade\\r\\n' +\n                   'Sec-WebSocket-Accept: ' + acceptKey + '\\r\\n';\n\n    if (protocolFullCase) {\n        // validate protocol\n        for (var i=0; i < protocolFullCase.length; i++) {\n            var charCode = protocolFullCase.charCodeAt(i);\n            var character = protocolFullCase.charAt(i);\n            if (charCode < 0x21 || charCode > 0x7E || separators.indexOf(character) !== -1) {\n                this.reject(500);\n                throw new Error('Illegal character \"' + String.fromCharCode(character) + '\" in subprotocol.');\n            }\n        }\n        if (this.requestedProtocols.indexOf(acceptedProtocol) === -1) {\n            this.reject(500);\n            throw new Error('Specified protocol was not requested by the client.');\n        }\n\n        protocolFullCase = protocolFullCase.replace(headerSanitizeRegExp, '');\n        response += 'Sec-WebSocket-Protocol: ' + protocolFullCase + '\\r\\n';\n    }\n    this.requestedProtocols = null;\n\n    if (allowedOrigin) {\n        allowedOrigin = allowedOrigin.replace(headerSanitizeRegExp, '');\n        if (this.webSocketVersion === 13) {\n            response += 'Origin: ' + allowedOrigin + '\\r\\n';\n        }\n        else if (this.webSocketVersion === 8) {\n            response += 'Sec-WebSocket-Origin: ' + allowedOrigin + '\\r\\n';\n        }\n    }\n\n    if (cookies) {\n        if (!Array.isArray(cookies)) {\n            this.reject(500);\n            throw new Error('Value supplied for \"cookies\" argument must be an array.');\n        }\n        var seenCookies = {};\n        cookies.forEach(function(cookie) {\n            if (!cookie.name || !cookie.value) {\n                this.reject(500);\n                throw new Error('Each cookie to set must at least provide a \"name\" and \"value\"');\n            }\n\n            // Make sure there are no \\r\\n sequences inserted\n            cookie.name = cookie.name.replace(controlCharsAndSemicolonRegEx, '');\n            cookie.value = cookie.value.replace(controlCharsAndSemicolonRegEx, '');\n\n            if (seenCookies[cookie.name]) {\n                this.reject(500);\n                throw new Error('You may not specify the same cookie name twice.');\n            }\n            seenCookies[cookie.name] = true;\n\n            // token (RFC 2616, Section 2.2)\n            var invalidChar = cookie.name.match(cookieNameValidateRegEx);\n            if (invalidChar) {\n                this.reject(500);\n                throw new Error('Illegal character ' + invalidChar[0] + ' in cookie name');\n            }\n\n            // RFC 6265, Section 4.1.1\n            // *cookie-octet / ( DQUOTE *cookie-octet DQUOTE ) | %x21 / %x23-2B / %x2D-3A / %x3C-5B / %x5D-7E\n            if (cookie.value.match(cookieValueDQuoteValidateRegEx)) {\n                invalidChar = cookie.value.slice(1, -1).match(cookieValueValidateRegEx);\n            } else {\n                invalidChar = cookie.value.match(cookieValueValidateRegEx);\n            }\n            if (invalidChar) {\n                this.reject(500);\n                throw new Error('Illegal character ' + invalidChar[0] + ' in cookie value');\n            }\n\n            var cookieParts = [cookie.name + '=' + cookie.value];\n\n            // RFC 6265, Section 4.1.1\n            // 'Path=' path-value | <any CHAR except CTLs or ';'>\n            if(cookie.path){\n                invalidChar = cookie.path.match(controlCharsAndSemicolonRegEx);\n                if (invalidChar) {\n                    this.reject(500);\n                    throw new Error('Illegal character ' + invalidChar[0] + ' in cookie path');\n                }\n                cookieParts.push('Path=' + cookie.path);\n            }\n\n            // RFC 6265, Section 4.1.2.3\n            // 'Domain=' subdomain\n            if (cookie.domain) {\n                if (typeof(cookie.domain) !== 'string') {\n                    this.reject(500);\n                    throw new Error('Domain must be specified and must be a string.');\n                }\n                invalidChar = cookie.domain.match(controlCharsAndSemicolonRegEx);\n                if (invalidChar) {\n                    this.reject(500);\n                    throw new Error('Illegal character ' + invalidChar[0] + ' in cookie domain');\n                }\n                cookieParts.push('Domain=' + cookie.domain.toLowerCase());\n            }\n\n            // RFC 6265, Section 4.1.1\n            //'Expires=' sane-cookie-date | Force Date object requirement by using only epoch\n            if (cookie.expires) {\n                if (!(cookie.expires instanceof Date)){\n                    this.reject(500);\n                    throw new Error('Value supplied for cookie \"expires\" must be a vaild date object');\n                }\n                cookieParts.push('Expires=' + cookie.expires.toGMTString());\n            }\n\n            // RFC 6265, Section 4.1.1\n            //'Max-Age=' non-zero-digit *DIGIT\n            if (cookie.maxage) {\n                var maxage = cookie.maxage;\n                if (typeof(maxage) === 'string') {\n                    maxage = parseInt(maxage, 10);\n                }\n                if (isNaN(maxage) || maxage <= 0 ) {\n                    this.reject(500);\n                    throw new Error('Value supplied for cookie \"maxage\" must be a non-zero number');\n                }\n                maxage = Math.round(maxage);\n                cookieParts.push('Max-Age=' + maxage.toString(10));\n            }\n\n            // RFC 6265, Section 4.1.1\n            //'Secure;'\n            if (cookie.secure) {\n                if (typeof(cookie.secure) !== 'boolean') {\n                    this.reject(500);\n                    throw new Error('Value supplied for cookie \"secure\" must be of type boolean');\n                }\n                cookieParts.push('Secure');\n            }\n\n            // RFC 6265, Section 4.1.1\n            //'HttpOnly;'\n            if (cookie.httponly) {\n                if (typeof(cookie.httponly) !== 'boolean') {\n                    this.reject(500);\n                    throw new Error('Value supplied for cookie \"httponly\" must be of type boolean');\n                }\n                cookieParts.push('HttpOnly');\n            }\n\n            response += ('Set-Cookie: ' + cookieParts.join(';') + '\\r\\n');\n        }.bind(this));\n    }\n\n    // TODO: handle negotiated extensions\n    // if (negotiatedExtensions) {\n    //     response += 'Sec-WebSocket-Extensions: ' + negotiatedExtensions.join(', ') + '\\r\\n';\n    // }\n\n    // Mark the request resolved now so that the user can't call accept or\n    // reject a second time.\n    this._resolved = true;\n    this.emit('requestResolved', this);\n\n    response += '\\r\\n';\n\n    var connection = new WebSocketConnection(this.socket, [], acceptedProtocol, false, this.serverConfig);\n    connection.webSocketVersion = this.webSocketVersion;\n    connection.remoteAddress = this.remoteAddress;\n    connection.remoteAddresses = this.remoteAddresses;\n\n    var self = this;\n\n    if (this._socketIsClosing) {\n        // Handle case when the client hangs up before we get a chance to\n        // accept the connection and send our side of the opening handshake.\n        cleanupFailedConnection(connection);\n    }\n    else {\n        this.socket.write(response, 'ascii', function(error) {\n            if (error) {\n                cleanupFailedConnection(connection);\n                return;\n            }\n\n            self._removeSocketCloseListeners();\n            connection._addSocketEventListeners();\n        });\n    }\n\n    this.emit('requestAccepted', connection);\n    return connection;\n};\n\nWebSocketRequest.prototype.reject = function(status, reason, extraHeaders) {\n    this._verifyResolution();\n\n    // Mark the request resolved now so that the user can't call accept or\n    // reject a second time.\n    this._resolved = true;\n    this.emit('requestResolved', this);\n\n    if (typeof(status) !== 'number') {\n        status = 403;\n    }\n    var response = 'HTTP/1.1 ' + status + ' ' + httpStatusDescriptions[status] + '\\r\\n' +\n                   'Connection: close\\r\\n';\n    if (reason) {\n        reason = reason.replace(headerSanitizeRegExp, '');\n        response += 'X-WebSocket-Reject-Reason: ' + reason + '\\r\\n';\n    }\n\n    if (extraHeaders) {\n        for (var key in extraHeaders) {\n            var sanitizedValue = extraHeaders[key].toString().replace(headerSanitizeRegExp, '');\n            var sanitizedKey = key.replace(headerSanitizeRegExp, '');\n            response += (sanitizedKey + ': ' + sanitizedValue + '\\r\\n');\n        }\n    }\n\n    response += '\\r\\n';\n    this.socket.end(response, 'ascii');\n\n    this.emit('requestRejected', this);\n};\n\nWebSocketRequest.prototype._handleSocketCloseBeforeAccept = function() {\n    this._socketIsClosing = true;\n    this._removeSocketCloseListeners();\n};\n\nWebSocketRequest.prototype._removeSocketCloseListeners = function() {\n    this.socket.removeListener('end', this._socketCloseHandler);\n    this.socket.removeListener('close', this._socketCloseHandler);\n};\n\nWebSocketRequest.prototype._verifyResolution = function() {\n    if (this._resolved) {\n        throw new Error('WebSocketRequest may only be accepted or rejected one time.');\n    }\n};\n\nfunction cleanupFailedConnection(connection) {\n    // Since we have to return a connection object even if the socket is\n    // already dead in order not to break the API, we schedule a 'close'\n    // event on the connection object to occur immediately.\n    process.nextTick(function() {\n        // WebSocketConnection.CLOSE_REASON_ABNORMAL = 1006\n        // Third param: Skip sending the close frame to a dead socket\n        connection.drop(1006, 'TCP connection lost before handshake completed.', true);\n    });\n}\n\nmodule.exports = WebSocketRequest;\n","/************************************************************************\n *  Copyright 2010-2015 Brian McKelvey.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n ***********************************************************************/\n\nvar extend = require('./utils').extend;\nvar utils = require('./utils');\nvar util = require('util');\nvar debug = require('debug')('websocket:server');\nvar EventEmitter = require('events').EventEmitter;\nvar WebSocketRequest = require('./WebSocketRequest');\n\nvar WebSocketServer = function WebSocketServer(config) {\n    // Superclass Constructor\n    EventEmitter.call(this);\n\n    this._handlers = {\n        upgrade: this.handleUpgrade.bind(this),\n        requestAccepted: this.handleRequestAccepted.bind(this),\n        requestResolved: this.handleRequestResolved.bind(this)\n    };\n    this.connections = [];\n    this.pendingRequests = [];\n    if (config) {\n        this.mount(config);\n    }\n};\n\nutil.inherits(WebSocketServer, EventEmitter);\n\nWebSocketServer.prototype.mount = function(config) {\n    this.config = {\n        // The http server instance to attach to.  Required.\n        httpServer: null,\n\n        // 64KiB max frame size.\n        maxReceivedFrameSize: 0x10000,\n\n        // 1MiB max message size, only applicable if\n        // assembleFragments is true\n        maxReceivedMessageSize: 0x100000,\n\n        // Outgoing messages larger than fragmentationThreshold will be\n        // split into multiple fragments.\n        fragmentOutgoingMessages: true,\n\n        // Outgoing frames are fragmented if they exceed this threshold.\n        // Default is 16KiB\n        fragmentationThreshold: 0x4000,\n\n        // If true, the server will automatically send a ping to all\n        // clients every 'keepaliveInterval' milliseconds.  The timer is\n        // reset on any received data from the client.\n        keepalive: true,\n\n        // The interval to send keepalive pings to connected clients if the\n        // connection is idle.  Any received data will reset the counter.\n        keepaliveInterval: 20000,\n\n        // If true, the server will consider any connection that has not\n        // received any data within the amount of time specified by\n        // 'keepaliveGracePeriod' after a keepalive ping has been sent to\n        // be dead, and will drop the connection.\n        // Ignored if keepalive is false.\n        dropConnectionOnKeepaliveTimeout: true,\n\n        // The amount of time to wait after sending a keepalive ping before\n        // closing the connection if the connected peer does not respond.\n        // Ignored if keepalive is false.\n        keepaliveGracePeriod: 10000,\n\n        // Whether to use native TCP keep-alive instead of WebSockets ping\n        // and pong packets.  Native TCP keep-alive sends smaller packets\n        // on the wire and so uses bandwidth more efficiently.  This may\n        // be more important when talking to mobile devices.\n        // If this value is set to true, then these values will be ignored:\n        //   keepaliveGracePeriod\n        //   dropConnectionOnKeepaliveTimeout\n        useNativeKeepalive: false,\n\n        // If true, fragmented messages will be automatically assembled\n        // and the full message will be emitted via a 'message' event.\n        // If false, each frame will be emitted via a 'frame' event and\n        // the application will be responsible for aggregating multiple\n        // fragmented frames.  Single-frame messages will emit a 'message'\n        // event in addition to the 'frame' event.\n        // Most users will want to leave this set to 'true'\n        assembleFragments: true,\n\n        // If this is true, websocket connections will be accepted\n        // regardless of the path and protocol specified by the client.\n        // The protocol accepted will be the first that was requested\n        // by the client.  Clients from any origin will be accepted.\n        // This should only be used in the simplest of cases.  You should\n        // probably leave this set to 'false' and inspect the request\n        // object to make sure it's acceptable before accepting it.\n        autoAcceptConnections: false,\n\n        // Whether or not the X-Forwarded-For header should be respected.\n        // It's important to set this to 'true' when accepting connections\n        // from untrusted clients, as a malicious client could spoof its\n        // IP address by simply setting this header.  It's meant to be added\n        // by a trusted proxy or other intermediary within your own\n        // infrastructure.\n        // See:  http://en.wikipedia.org/wiki/X-Forwarded-For\n        ignoreXForwardedFor: false,\n\n        // If this is true, 'cookie' headers are parsed and exposed as WebSocketRequest.cookies\n        parseCookies: true,\n\n        // If this is true, 'sec-websocket-extensions' headers are parsed and exposed as WebSocketRequest.requestedExtensions\n        parseExtensions: true,\n\n        // The Nagle Algorithm makes more efficient use of network resources\n        // by introducing a small delay before sending small packets so that\n        // multiple messages can be batched together before going onto the\n        // wire.  This however comes at the cost of latency, so the default\n        // is to disable it.  If you don't need low latency and are streaming\n        // lots of small messages, you can change this to 'false'\n        disableNagleAlgorithm: true,\n\n        // The number of milliseconds to wait after sending a close frame\n        // for an acknowledgement to come back before giving up and just\n        // closing the socket.\n        closeTimeout: 5000\n    };\n    extend(this.config, config);\n\n    if (this.config.httpServer) {\n        if (!Array.isArray(this.config.httpServer)) {\n            this.config.httpServer = [this.config.httpServer];\n        }\n        var upgradeHandler = this._handlers.upgrade;\n        this.config.httpServer.forEach(function(httpServer) {\n            httpServer.on('upgrade', upgradeHandler);\n        });\n    }\n    else {\n        throw new Error('You must specify an httpServer on which to mount the WebSocket server.');\n    }\n};\n\nWebSocketServer.prototype.unmount = function() {\n    var upgradeHandler = this._handlers.upgrade;\n    this.config.httpServer.forEach(function(httpServer) {\n        httpServer.removeListener('upgrade', upgradeHandler);\n    });\n};\n\nWebSocketServer.prototype.closeAllConnections = function() {\n    this.connections.forEach(function(connection) {\n        connection.close();\n    });\n    this.pendingRequests.forEach(function(request) {\n        process.nextTick(function() {\n          request.reject(503); // HTTP 503 Service Unavailable\n        });\n    });\n};\n\nWebSocketServer.prototype.broadcast = function(data) {\n    if (Buffer.isBuffer(data)) {\n        this.broadcastBytes(data);\n    }\n    else if (typeof(data.toString) === 'function') {\n        this.broadcastUTF(data);\n    }\n};\n\nWebSocketServer.prototype.broadcastUTF = function(utfData) {\n    this.connections.forEach(function(connection) {\n        connection.sendUTF(utfData);\n    });\n};\n\nWebSocketServer.prototype.broadcastBytes = function(binaryData) {\n    this.connections.forEach(function(connection) {\n        connection.sendBytes(binaryData);\n    });\n};\n\nWebSocketServer.prototype.shutDown = function() {\n    this.unmount();\n    this.closeAllConnections();\n};\n\nWebSocketServer.prototype.handleUpgrade = function(request, socket) {\n    var self = this;\n    var wsRequest = new WebSocketRequest(socket, request, this.config);\n    try {\n        wsRequest.readHandshake();\n    }\n    catch(e) {\n        wsRequest.reject(\n            e.httpCode ? e.httpCode : 400,\n            e.message,\n            e.headers\n        );\n        debug('Invalid handshake: %s', e.message);\n        this.emit('upgradeError', e);\n        return;\n    }\n\n    this.pendingRequests.push(wsRequest);\n\n    wsRequest.once('requestAccepted', this._handlers.requestAccepted);\n    wsRequest.once('requestResolved', this._handlers.requestResolved);\n    socket.once('close', function () {\n        self._handlers.requestResolved(wsRequest);\n    });\n\n    if (!this.config.autoAcceptConnections && utils.eventEmitterListenerCount(this, 'request') > 0) {\n        this.emit('request', wsRequest);\n    }\n    else if (this.config.autoAcceptConnections) {\n        wsRequest.accept(wsRequest.requestedProtocols[0], wsRequest.origin);\n    }\n    else {\n        wsRequest.reject(404, 'No handler is configured to accept the connection.');\n    }\n};\n\nWebSocketServer.prototype.handleRequestAccepted = function(connection) {\n    var self = this;\n    connection.once('close', function(closeReason, description) {\n        self.handleConnectionClose(connection, closeReason, description);\n    });\n    this.connections.push(connection);\n    this.emit('connect', connection);\n};\n\nWebSocketServer.prototype.handleConnectionClose = function(connection, closeReason, description) {\n    var index = this.connections.indexOf(connection);\n    if (index !== -1) {\n        this.connections.splice(index, 1);\n    }\n    this.emit('close', connection, closeReason, description);\n};\n\nWebSocketServer.prototype.handleRequestResolved = function(request) {\n    var index = this.pendingRequests.indexOf(request);\n    if (index !== -1) { this.pendingRequests.splice(index, 1); }\n};\n\nmodule.exports = WebSocketServer;\n","/************************************************************************\n *  Copyright 2010-2015 Brian McKelvey.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n ***********************************************************************/\n\nvar utils = require('./utils');\nvar extend = utils.extend;\nvar util = require('util');\nvar EventEmitter = require('events').EventEmitter;\nvar http = require('http');\nvar https = require('https');\nvar url = require('url');\nvar crypto = require('crypto');\nvar WebSocketConnection = require('./WebSocketConnection');\nvar bufferAllocUnsafe = utils.bufferAllocUnsafe;\n\nvar protocolSeparators = [\n    '(', ')', '<', '>', '@',\n    ',', ';', ':', '\\\\', '\\\"',\n    '/', '[', ']', '?', '=',\n    '{', '}', ' ', String.fromCharCode(9)\n];\n\nvar excludedTlsOptions = ['hostname','port','method','path','headers'];\n\nfunction WebSocketClient(config) {\n    // Superclass Constructor\n    EventEmitter.call(this);\n\n    // TODO: Implement extensions\n\n    this.config = {\n        // 1MiB max frame size.\n        maxReceivedFrameSize: 0x100000,\n\n        // 8MiB max message size, only applicable if\n        // assembleFragments is true\n        maxReceivedMessageSize: 0x800000,\n\n        // Outgoing messages larger than fragmentationThreshold will be\n        // split into multiple fragments.\n        fragmentOutgoingMessages: true,\n\n        // Outgoing frames are fragmented if they exceed this threshold.\n        // Default is 16KiB\n        fragmentationThreshold: 0x4000,\n\n        // Which version of the protocol to use for this session.  This\n        // option will be removed once the protocol is finalized by the IETF\n        // It is only available to ease the transition through the\n        // intermediate draft protocol versions.\n        // At present, it only affects the name of the Origin header.\n        webSocketVersion: 13,\n\n        // If true, fragmented messages will be automatically assembled\n        // and the full message will be emitted via a 'message' event.\n        // If false, each frame will be emitted via a 'frame' event and\n        // the application will be responsible for aggregating multiple\n        // fragmented frames.  Single-frame messages will emit a 'message'\n        // event in addition to the 'frame' event.\n        // Most users will want to leave this set to 'true'\n        assembleFragments: true,\n\n        // The Nagle Algorithm makes more efficient use of network resources\n        // by introducing a small delay before sending small packets so that\n        // multiple messages can be batched together before going onto the\n        // wire.  This however comes at the cost of latency, so the default\n        // is to disable it.  If you don't need low latency and are streaming\n        // lots of small messages, you can change this to 'false'\n        disableNagleAlgorithm: true,\n\n        // The number of milliseconds to wait after sending a close frame\n        // for an acknowledgement to come back before giving up and just\n        // closing the socket.\n        closeTimeout: 5000,\n\n        // Options to pass to https.connect if connecting via TLS\n        tlsOptions: {}\n    };\n\n    if (config) {\n        var tlsOptions;\n        if (config.tlsOptions) {\n          tlsOptions = config.tlsOptions;\n          delete config.tlsOptions;\n        }\n        else {\n          tlsOptions = {};\n        }\n        extend(this.config, config);\n        extend(this.config.tlsOptions, tlsOptions);\n    }\n\n    this._req = null;\n    \n    switch (this.config.webSocketVersion) {\n        case 8:\n        case 13:\n            break;\n        default:\n            throw new Error('Requested webSocketVersion is not supported. Allowed values are 8 and 13.');\n    }\n}\n\nutil.inherits(WebSocketClient, EventEmitter);\n\nWebSocketClient.prototype.connect = function(requestUrl, protocols, origin, headers, extraRequestOptions) {\n    var self = this;\n    \n    if (typeof(protocols) === 'string') {\n        if (protocols.length > 0) {\n            protocols = [protocols];\n        }\n        else {\n            protocols = [];\n        }\n    }\n    if (!(protocols instanceof Array)) {\n        protocols = [];\n    }\n    this.protocols = protocols;\n    this.origin = origin;\n\n    if (typeof(requestUrl) === 'string') {\n        this.url = url.parse(requestUrl);\n    }\n    else {\n        this.url = requestUrl; // in case an already parsed url is passed in.\n    }\n    if (!this.url.protocol) {\n        throw new Error('You must specify a full WebSocket URL, including protocol.');\n    }\n    if (!this.url.host) {\n        throw new Error('You must specify a full WebSocket URL, including hostname. Relative URLs are not supported.');\n    }\n\n    this.secure = (this.url.protocol === 'wss:');\n\n    // validate protocol characters:\n    this.protocols.forEach(function(protocol) {\n        for (var i=0; i < protocol.length; i ++) {\n            var charCode = protocol.charCodeAt(i);\n            var character = protocol.charAt(i);\n            if (charCode < 0x0021 || charCode > 0x007E || protocolSeparators.indexOf(character) !== -1) {\n                throw new Error('Protocol list contains invalid character \"' + String.fromCharCode(charCode) + '\"');\n            }\n        }\n    });\n\n    var defaultPorts = {\n        'ws:': '80',\n        'wss:': '443'\n    };\n\n    if (!this.url.port) {\n        this.url.port = defaultPorts[this.url.protocol];\n    }\n\n    var nonce = bufferAllocUnsafe(16);\n    for (var i=0; i < 16; i++) {\n        nonce[i] = Math.round(Math.random()*0xFF);\n    }\n    this.base64nonce = nonce.toString('base64');\n\n    var hostHeaderValue = this.url.hostname;\n    if ((this.url.protocol === 'ws:' && this.url.port !== '80') ||\n        (this.url.protocol === 'wss:' && this.url.port !== '443'))  {\n        hostHeaderValue += (':' + this.url.port);\n    }\n\n    var reqHeaders = {};\n    if (this.secure && this.config.tlsOptions.hasOwnProperty('headers')) {\n      // Allow for additional headers to be provided when connecting via HTTPS\n      extend(reqHeaders, this.config.tlsOptions.headers);\n    }\n    if (headers) {\n      // Explicitly provided headers take priority over any from tlsOptions\n      extend(reqHeaders, headers);\n    }\n    extend(reqHeaders, {\n        'Upgrade': 'websocket',\n        'Connection': 'Upgrade',\n        'Sec-WebSocket-Version': this.config.webSocketVersion.toString(10),\n        'Sec-WebSocket-Key': this.base64nonce,\n        'Host': reqHeaders.Host || hostHeaderValue\n    });\n\n    if (this.protocols.length > 0) {\n        reqHeaders['Sec-WebSocket-Protocol'] = this.protocols.join(', ');\n    }\n    if (this.origin) {\n        if (this.config.webSocketVersion === 13) {\n            reqHeaders['Origin'] = this.origin;\n        }\n        else if (this.config.webSocketVersion === 8) {\n            reqHeaders['Sec-WebSocket-Origin'] = this.origin;\n        }\n    }\n\n    // TODO: Implement extensions\n\n    var pathAndQuery;\n    // Ensure it begins with '/'.\n    if (this.url.pathname) {\n        pathAndQuery = this.url.path;\n    }\n    else if (this.url.path) {\n        pathAndQuery = '/' + this.url.path;\n    }\n    else {\n        pathAndQuery = '/';\n    }\n\n    function handleRequestError(error) {\n        self._req = null;\n        self.emit('connectFailed', error);\n    }\n\n    var requestOptions = {\n        agent: false\n    };\n    if (extraRequestOptions) {\n        extend(requestOptions, extraRequestOptions);\n    }\n    // These options are always overridden by the library.  The user is not\n    // allowed to specify these directly.\n    extend(requestOptions, {\n        hostname: this.url.hostname,\n        port: this.url.port,\n        method: 'GET',\n        path: pathAndQuery,\n        headers: reqHeaders\n    });\n    if (this.secure) {\n        var tlsOptions = this.config.tlsOptions;\n        for (var key in tlsOptions) {\n            if (tlsOptions.hasOwnProperty(key) && excludedTlsOptions.indexOf(key) === -1) {\n                requestOptions[key] = tlsOptions[key];\n            }\n        }\n    }\n\n    var req = this._req = (this.secure ? https : http).request(requestOptions);\n    req.on('upgrade', function handleRequestUpgrade(response, socket, head) {\n        self._req = null;\n        req.removeListener('error', handleRequestError);\n        self.socket = socket;\n        self.response = response;\n        self.firstDataChunk = head;\n        self.validateHandshake();\n    });\n    req.on('error', handleRequestError);\n\n    req.on('response', function(response) {\n        self._req = null;\n        if (utils.eventEmitterListenerCount(self, 'httpResponse') > 0) {\n            self.emit('httpResponse', response, self);\n            if (response.socket) {\n                response.socket.end();\n            }\n        }\n        else {\n            var headerDumpParts = [];\n            for (var headerName in response.headers) {\n                headerDumpParts.push(headerName + ': ' + response.headers[headerName]);\n            }\n            self.failHandshake(\n                'Server responded with a non-101 status: ' +\n                response.statusCode + ' ' + response.statusMessage +\n                '\\nResponse Headers Follow:\\n' +\n                headerDumpParts.join('\\n') + '\\n'\n            );\n        }\n    });\n    req.end();\n};\n\nWebSocketClient.prototype.validateHandshake = function() {\n    var headers = this.response.headers;\n\n    if (this.protocols.length > 0) {\n        this.protocol = headers['sec-websocket-protocol'];\n        if (this.protocol) {\n            if (this.protocols.indexOf(this.protocol) === -1) {\n                this.failHandshake('Server did not respond with a requested protocol.');\n                return;\n            }\n        }\n        else {\n            this.failHandshake('Expected a Sec-WebSocket-Protocol header.');\n            return;\n        }\n    }\n\n    if (!(headers['connection'] && headers['connection'].toLocaleLowerCase() === 'upgrade')) {\n        this.failHandshake('Expected a Connection: Upgrade header from the server');\n        return;\n    }\n\n    if (!(headers['upgrade'] && headers['upgrade'].toLocaleLowerCase() === 'websocket')) {\n        this.failHandshake('Expected an Upgrade: websocket header from the server');\n        return;\n    }\n\n    var sha1 = crypto.createHash('sha1');\n    sha1.update(this.base64nonce + '258EAFA5-E914-47DA-95CA-C5AB0DC85B11');\n    var expectedKey = sha1.digest('base64');\n\n    if (!headers['sec-websocket-accept']) {\n        this.failHandshake('Expected Sec-WebSocket-Accept header from server');\n        return;\n    }\n\n    if (headers['sec-websocket-accept'] !== expectedKey) {\n        this.failHandshake('Sec-WebSocket-Accept header from server didn\\'t match expected value of ' + expectedKey);\n        return;\n    }\n\n    // TODO: Support extensions\n\n    this.succeedHandshake();\n};\n\nWebSocketClient.prototype.failHandshake = function(errorDescription) {\n    if (this.socket && this.socket.writable) {\n        this.socket.end();\n    }\n    this.emit('connectFailed', new Error(errorDescription));\n};\n\nWebSocketClient.prototype.succeedHandshake = function() {\n    var connection = new WebSocketConnection(this.socket, [], this.protocol, true, this.config);\n\n    connection.webSocketVersion = this.config.webSocketVersion;\n    connection._addSocketEventListeners();\n\n    this.emit('connect', connection);\n    if (this.firstDataChunk.length > 0) {\n        connection.handleSocketData(this.firstDataChunk);\n    }\n    this.firstDataChunk = null;\n};\n\nWebSocketClient.prototype.abort = function() {\n    if (this._req) {\n        this._req.abort();\n    }\n};\n\nmodule.exports = WebSocketClient;\n","/************************************************************************\n *  Copyright 2010-2015 Brian McKelvey.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n ***********************************************************************/\n\nvar util = require('util');\nvar EventEmitter = require('events').EventEmitter;\n\nfunction WebSocketRouterRequest(webSocketRequest, resolvedProtocol) {\n    // Superclass Constructor\n    EventEmitter.call(this);\n\n    this.webSocketRequest = webSocketRequest;\n    if (resolvedProtocol === '____no_protocol____') {\n        this.protocol = null;\n    }\n    else {\n        this.protocol = resolvedProtocol;\n    }\n    this.origin = webSocketRequest.origin;\n    this.resource = webSocketRequest.resource;\n    this.resourceURL = webSocketRequest.resourceURL;\n    this.httpRequest = webSocketRequest.httpRequest;\n    this.remoteAddress = webSocketRequest.remoteAddress;\n    this.webSocketVersion = webSocketRequest.webSocketVersion;\n    this.requestedExtensions = webSocketRequest.requestedExtensions;\n    this.cookies = webSocketRequest.cookies;\n}\n\nutil.inherits(WebSocketRouterRequest, EventEmitter);\n\nWebSocketRouterRequest.prototype.accept = function(origin, cookies) {\n    var connection = this.webSocketRequest.accept(this.protocol, origin, cookies);\n    this.emit('requestAccepted', connection);\n    return connection;\n};\n\nWebSocketRouterRequest.prototype.reject = function(status, reason, extraHeaders) {\n    this.webSocketRequest.reject(status, reason, extraHeaders);\n    this.emit('requestRejected', this);\n};\n\nmodule.exports = WebSocketRouterRequest;\n","/************************************************************************\n *  Copyright 2010-2015 Brian McKelvey.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n ***********************************************************************/\n\nvar extend = require('./utils').extend;\nvar util = require('util');\nvar EventEmitter = require('events').EventEmitter;\nvar WebSocketRouterRequest = require('./WebSocketRouterRequest');\n\nfunction WebSocketRouter(config) {\n    // Superclass Constructor\n    EventEmitter.call(this);\n\n    this.config = {\n        // The WebSocketServer instance to attach to.\n        server: null\n    };\n    if (config) {\n        extend(this.config, config);\n    }\n    this.handlers = [];\n\n    this._requestHandler = this.handleRequest.bind(this);\n    if (this.config.server) {\n        this.attachServer(this.config.server);\n    }\n}\n\nutil.inherits(WebSocketRouter, EventEmitter);\n\nWebSocketRouter.prototype.attachServer = function(server) {\n    if (server) {\n        this.server = server;\n        this.server.on('request', this._requestHandler);\n    }\n    else {\n        throw new Error('You must specify a WebSocketServer instance to attach to.');\n    }\n};\n\nWebSocketRouter.prototype.detachServer = function() {\n    if (this.server) {\n        this.server.removeListener('request', this._requestHandler);\n        this.server = null;\n    }\n    else {\n        throw new Error('Cannot detach from server: not attached.');\n    }\n};\n\nWebSocketRouter.prototype.mount = function(path, protocol, callback) {\n    if (!path) {\n        throw new Error('You must specify a path for this handler.');\n    }\n    if (!protocol) {\n        protocol = '____no_protocol____';\n    }\n    if (!callback) {\n        throw new Error('You must specify a callback for this handler.');\n    }\n\n    path = this.pathToRegExp(path);\n    if (!(path instanceof RegExp)) {\n        throw new Error('Path must be specified as either a string or a RegExp.');\n    }\n    var pathString = path.toString();\n\n    // normalize protocol to lower-case\n    protocol = protocol.toLocaleLowerCase();\n\n    if (this.findHandlerIndex(pathString, protocol) !== -1) {\n        throw new Error('You may only mount one handler per path/protocol combination.');\n    }\n\n    this.handlers.push({\n        'path': path,\n        'pathString': pathString,\n        'protocol': protocol,\n        'callback': callback\n    });\n};\nWebSocketRouter.prototype.unmount = function(path, protocol) {\n    var index = this.findHandlerIndex(this.pathToRegExp(path).toString(), protocol);\n    if (index !== -1) {\n        this.handlers.splice(index, 1);\n    }\n    else {\n        throw new Error('Unable to find a route matching the specified path and protocol.');\n    }\n};\n\nWebSocketRouter.prototype.findHandlerIndex = function(pathString, protocol) {\n    protocol = protocol.toLocaleLowerCase();\n    for (var i=0, len=this.handlers.length; i < len; i++) {\n        var handler = this.handlers[i];\n        if (handler.pathString === pathString && handler.protocol === protocol) {\n            return i;\n        }\n    }\n    return -1;\n};\n\nWebSocketRouter.prototype.pathToRegExp = function(path) {\n    if (typeof(path) === 'string') {\n        if (path === '*') {\n            path = /^.*$/;\n        }\n        else {\n            path = path.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&');\n            path = new RegExp('^' + path + '$');\n        }\n    }\n    return path;\n};\n\nWebSocketRouter.prototype.handleRequest = function(request) {\n    var requestedProtocols = request.requestedProtocols;\n    if (requestedProtocols.length === 0) {\n        requestedProtocols = ['____no_protocol____'];\n    }\n\n    // Find a handler with the first requested protocol first\n    for (var i=0; i < requestedProtocols.length; i++) {\n        var requestedProtocol = requestedProtocols[i].toLocaleLowerCase();\n\n        // find the first handler that can process this request\n        for (var j=0, len=this.handlers.length; j < len; j++) {\n            var handler = this.handlers[j];\n            if (handler.path.test(request.resourceURL.pathname)) {\n                if (requestedProtocol === handler.protocol ||\n                    handler.protocol === '*')\n                {\n                    var routerRequest = new WebSocketRouterRequest(request, requestedProtocol);\n                    handler.callback(routerRequest);\n                    return;\n                }\n            }\n        }\n    }\n\n    // If we get here we were unable to find a suitable handler.\n    request.reject(404, 'No handler is available for the given request.');\n};\n\nmodule.exports = WebSocketRouter;\n","/************************************************************************\n *  Copyright 2010-2015 Brian McKelvey.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n ***********************************************************************/\n\nvar WebSocketClient = require('./WebSocketClient');\nvar toBuffer = require('typedarray-to-buffer');\nvar yaeti = require('yaeti');\n\n\nconst CONNECTING = 0;\nconst OPEN = 1;\nconst CLOSING = 2;\nconst CLOSED = 3;\n\n\nmodule.exports = W3CWebSocket;\n\n\nfunction W3CWebSocket(url, protocols, origin, headers, requestOptions, clientConfig) {\n    // Make this an EventTarget.\n    yaeti.EventTarget.call(this);\n\n    // Sanitize clientConfig.\n    clientConfig = clientConfig || {};\n    clientConfig.assembleFragments = true;  // Required in the W3C API.\n\n    var self = this;\n\n    this._url = url;\n    this._readyState = CONNECTING;\n    this._protocol = undefined;\n    this._extensions = '';\n    this._bufferedAmount = 0;  // Hack, always 0.\n    this._binaryType = 'arraybuffer';  // TODO: Should be 'blob' by default, but Node has no Blob.\n\n    // The WebSocketConnection instance.\n    this._connection = undefined;\n\n    // WebSocketClient instance.\n    this._client = new WebSocketClient(clientConfig);\n\n    this._client.on('connect', function(connection) {\n        onConnect.call(self, connection);\n    });\n\n    this._client.on('connectFailed', function() {\n        onConnectFailed.call(self);\n    });\n\n    this._client.connect(url, protocols, origin, headers, requestOptions);\n}\n\n\n// Expose W3C read only attributes.\nObject.defineProperties(W3CWebSocket.prototype, {\n    url:            { get: function() { return this._url;            } },\n    readyState:     { get: function() { return this._readyState;     } },\n    protocol:       { get: function() { return this._protocol;       } },\n    extensions:     { get: function() { return this._extensions;     } },\n    bufferedAmount: { get: function() { return this._bufferedAmount; } }\n});\n\n\n// Expose W3C write/read attributes.\nObject.defineProperties(W3CWebSocket.prototype, {\n    binaryType: {\n        get: function() {\n            return this._binaryType;\n        },\n        set: function(type) {\n            // TODO: Just 'arraybuffer' supported.\n            if (type !== 'arraybuffer') {\n                throw new SyntaxError('just \"arraybuffer\" type allowed for \"binaryType\" attribute');\n            }\n            this._binaryType = type;\n        }\n    }\n});\n\n\n// Expose W3C readyState constants into the WebSocket instance as W3C states.\n[['CONNECTING',CONNECTING], ['OPEN',OPEN], ['CLOSING',CLOSING], ['CLOSED',CLOSED]].forEach(function(property) {\n    Object.defineProperty(W3CWebSocket.prototype, property[0], {\n        get: function() { return property[1]; }\n    });\n});\n\n// Also expose W3C readyState constants into the WebSocket class (not defined by the W3C,\n// but there are so many libs relying on them).\n[['CONNECTING',CONNECTING], ['OPEN',OPEN], ['CLOSING',CLOSING], ['CLOSED',CLOSED]].forEach(function(property) {\n    Object.defineProperty(W3CWebSocket, property[0], {\n        get: function() { return property[1]; }\n    });\n});\n\n\nW3CWebSocket.prototype.send = function(data) {\n    if (this._readyState !== OPEN) {\n        throw new Error('cannot call send() while not connected');\n    }\n\n    // Text.\n    if (typeof data === 'string' || data instanceof String) {\n        this._connection.sendUTF(data);\n    }\n    // Binary.\n    else {\n        // Node Buffer.\n        if (data instanceof Buffer) {\n            this._connection.sendBytes(data);\n        }\n        // If ArrayBuffer or ArrayBufferView convert it to Node Buffer.\n        else if (data.byteLength || data.byteLength === 0) {\n            data = toBuffer(data);\n            this._connection.sendBytes(data);\n        }\n        else {\n            throw new Error('unknown binary data:', data);\n        }\n    }\n};\n\n\nW3CWebSocket.prototype.close = function(code, reason) {\n    switch(this._readyState) {\n        case CONNECTING:\n            // NOTE: We don't have the WebSocketConnection instance yet so no\n            // way to close the TCP connection.\n            // Artificially invoke the onConnectFailed event.\n            onConnectFailed.call(this);\n            // And close if it connects after a while.\n            this._client.on('connect', function(connection) {\n                if (code) {\n                    connection.close(code, reason);\n                } else {\n                    connection.close();\n                }\n            });\n            break;\n        case OPEN:\n            this._readyState = CLOSING;\n            if (code) {\n                this._connection.close(code, reason);\n            } else {\n                this._connection.close();\n            }\n            break;\n        case CLOSING:\n        case CLOSED:\n            break;\n    }\n};\n\n\n/**\n * Private API.\n */\n\n\nfunction createCloseEvent(code, reason) {\n    var event = new yaeti.Event('close');\n\n    event.code = code;\n    event.reason = reason;\n    event.wasClean = (typeof code === 'undefined' || code === 1000);\n\n    return event;\n}\n\n\nfunction createMessageEvent(data) {\n    var event = new yaeti.Event('message');\n\n    event.data = data;\n\n    return event;\n}\n\n\nfunction onConnect(connection) {\n    var self = this;\n\n    this._readyState = OPEN;\n    this._connection = connection;\n    this._protocol = connection.protocol;\n    this._extensions = connection.extensions;\n\n    this._connection.on('close', function(code, reason) {\n        onClose.call(self, code, reason);\n    });\n\n    this._connection.on('message', function(msg) {\n        onMessage.call(self, msg);\n    });\n\n    this.dispatchEvent(new yaeti.Event('open'));\n}\n\n\nfunction onConnectFailed() {\n    destroy.call(this);\n    this._readyState = CLOSED;\n\n    try {\n        this.dispatchEvent(new yaeti.Event('error'));\n    } finally {\n        this.dispatchEvent(createCloseEvent(1006, 'connection failed'));\n    }\n}\n\n\nfunction onClose(code, reason) {\n    destroy.call(this);\n    this._readyState = CLOSED;\n\n    this.dispatchEvent(createCloseEvent(code, reason || ''));\n}\n\n\nfunction onMessage(message) {\n    if (message.utf8Data) {\n        this.dispatchEvent(createMessageEvent(message.utf8Data));\n    }\n    else if (message.binaryData) {\n        // Must convert from Node Buffer to ArrayBuffer.\n        // TODO: or to a Blob (which does not exist in Node!).\n        if (this.binaryType === 'arraybuffer') {\n            var buffer = message.binaryData;\n            var arraybuffer = new ArrayBuffer(buffer.length);\n            var view = new Uint8Array(arraybuffer);\n            for (var i=0, len=buffer.length; i<len; ++i) {\n                view[i] = buffer[i];\n            }\n            this.dispatchEvent(createMessageEvent(arraybuffer));\n        }\n    }\n}\n\n\nfunction destroy() {\n    this._client.removeAllListeners();\n    if (this._connection) {\n        this._connection.removeAllListeners();\n    }\n}\n","/************************************************************************\n *  Copyright 2010-2015 Brian McKelvey.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n ***********************************************************************/\n\nvar Deprecation = {\n    disableWarnings: false,\n\n    deprecationWarningMap: {\n\n    },\n\n    warn: function(deprecationName) {\n        if (!this.disableWarnings && this.deprecationWarningMap[deprecationName]) {\n            console.warn('DEPRECATION WARNING: ' + this.deprecationWarningMap[deprecationName]);\n            this.deprecationWarningMap[deprecationName] = false;\n        }\n    }\n};\n\nmodule.exports = Deprecation;\n","module.exports = require('../package.json').version;\n","module.exports = {\n    'server'       : require('./WebSocketServer'),\n    'client'       : require('./WebSocketClient'),\n    'router'       : require('./WebSocketRouter'),\n    'frame'        : require('./WebSocketFrame'),\n    'request'      : require('./WebSocketRequest'),\n    'connection'   : require('./WebSocketConnection'),\n    'w3cwebsocket' : require('./W3CWebSocket'),\n    'deprecation'  : require('./Deprecation'),\n    'version'      : require('./version')\n};\n","module.exports = require('./lib/websocket');","export const version = '2.1.0';\n//# sourceMappingURL=version.js.map","import { version } from './version';\nexport const DEFAULT_HEADERS = { 'X-Client-Info': `realtime-js/${version}` };\nexport const VSN = '1.0.0';\nexport const DEFAULT_TIMEOUT = 10000;\nexport const WS_CLOSE_NORMAL = 1000;\nexport var SOCKET_STATES;\n(function (SOCKET_STATES) {\n    SOCKET_STATES[SOCKET_STATES[\"connecting\"] = 0] = \"connecting\";\n    SOCKET_STATES[SOCKET_STATES[\"open\"] = 1] = \"open\";\n    SOCKET_STATES[SOCKET_STATES[\"closing\"] = 2] = \"closing\";\n    SOCKET_STATES[SOCKET_STATES[\"closed\"] = 3] = \"closed\";\n})(SOCKET_STATES || (SOCKET_STATES = {}));\nexport var CHANNEL_STATES;\n(function (CHANNEL_STATES) {\n    CHANNEL_STATES[\"closed\"] = \"closed\";\n    CHANNEL_STATES[\"errored\"] = \"errored\";\n    CHANNEL_STATES[\"joined\"] = \"joined\";\n    CHANNEL_STATES[\"joining\"] = \"joining\";\n    CHANNEL_STATES[\"leaving\"] = \"leaving\";\n})(CHANNEL_STATES || (CHANNEL_STATES = {}));\nexport var CHANNEL_EVENTS;\n(function (CHANNEL_EVENTS) {\n    CHANNEL_EVENTS[\"close\"] = \"phx_close\";\n    CHANNEL_EVENTS[\"error\"] = \"phx_error\";\n    CHANNEL_EVENTS[\"join\"] = \"phx_join\";\n    CHANNEL_EVENTS[\"reply\"] = \"phx_reply\";\n    CHANNEL_EVENTS[\"leave\"] = \"phx_leave\";\n    CHANNEL_EVENTS[\"access_token\"] = \"access_token\";\n})(CHANNEL_EVENTS || (CHANNEL_EVENTS = {}));\nexport var TRANSPORTS;\n(function (TRANSPORTS) {\n    TRANSPORTS[\"websocket\"] = \"websocket\";\n})(TRANSPORTS || (TRANSPORTS = {}));\nexport var CONNECTION_STATE;\n(function (CONNECTION_STATE) {\n    CONNECTION_STATE[\"Connecting\"] = \"connecting\";\n    CONNECTION_STATE[\"Open\"] = \"open\";\n    CONNECTION_STATE[\"Closing\"] = \"closing\";\n    CONNECTION_STATE[\"Closed\"] = \"closed\";\n})(CONNECTION_STATE || (CONNECTION_STATE = {}));\n//# sourceMappingURL=constants.js.map","/**\n * Creates a timer that accepts a `timerCalc` function to perform calculated timeout retries, such as exponential backoff.\n *\n * @example\n *    let reconnectTimer = new Timer(() => this.connect(), function(tries){\n *      return [1000, 5000, 10000][tries - 1] || 10000\n *    })\n *    reconnectTimer.scheduleTimeout() // fires after 1000\n *    reconnectTimer.scheduleTimeout() // fires after 5000\n *    reconnectTimer.reset()\n *    reconnectTimer.scheduleTimeout() // fires after 1000\n */\nexport default class Timer {\n    constructor(callback, timerCalc) {\n        this.callback = callback;\n        this.timerCalc = timerCalc;\n        this.timer = undefined;\n        this.tries = 0;\n        this.callback = callback;\n        this.timerCalc = timerCalc;\n    }\n    reset() {\n        this.tries = 0;\n        clearTimeout(this.timer);\n    }\n    // Cancels any previous scheduleTimeout and schedules callback\n    scheduleTimeout() {\n        clearTimeout(this.timer);\n        this.timer = setTimeout(() => {\n            this.tries = this.tries + 1;\n            this.callback();\n        }, this.timerCalc(this.tries + 1));\n    }\n}\n//# sourceMappingURL=timer.js.map","// This file draws heavily from https://github.com/phoenixframework/phoenix/commit/cf098e9cf7a44ee6479d31d911a97d3c7430c6fe\n// License: https://github.com/phoenixframework/phoenix/blob/master/LICENSE.md\nexport default class Serializer {\n    constructor() {\n        this.HEADER_LENGTH = 1;\n    }\n    decode(rawPayload, callback) {\n        if (rawPayload.constructor === ArrayBuffer) {\n            return callback(this._binaryDecode(rawPayload));\n        }\n        if (typeof rawPayload === 'string') {\n            return callback(JSON.parse(rawPayload));\n        }\n        return callback({});\n    }\n    _binaryDecode(buffer) {\n        const view = new DataView(buffer);\n        const decoder = new TextDecoder();\n        return this._decodeBroadcast(buffer, view, decoder);\n    }\n    _decodeBroadcast(buffer, view, decoder) {\n        const topicSize = view.getUint8(1);\n        const eventSize = view.getUint8(2);\n        let offset = this.HEADER_LENGTH + 2;\n        const topic = decoder.decode(buffer.slice(offset, offset + topicSize));\n        offset = offset + topicSize;\n        const event = decoder.decode(buffer.slice(offset, offset + eventSize));\n        offset = offset + eventSize;\n        const data = JSON.parse(decoder.decode(buffer.slice(offset, buffer.byteLength)));\n        return { ref: null, topic: topic, event: event, payload: data };\n    }\n}\n//# sourceMappingURL=serializer.js.map","import { DEFAULT_TIMEOUT } from '../lib/constants';\nexport default class Push {\n    /**\n     * Initializes the Push\n     *\n     * @param channel The Channel\n     * @param event The event, for example `\"phx_join\"`\n     * @param payload The payload, for example `{user_id: 123}`\n     * @param timeout The push timeout in milliseconds\n     */\n    constructor(channel, event, payload = {}, timeout = DEFAULT_TIMEOUT) {\n        this.channel = channel;\n        this.event = event;\n        this.payload = payload;\n        this.timeout = timeout;\n        this.sent = false;\n        this.timeoutTimer = undefined;\n        this.ref = '';\n        this.receivedResp = null;\n        this.recHooks = [];\n        this.refEvent = null;\n        this.rateLimited = false;\n    }\n    resend(timeout) {\n        this.timeout = timeout;\n        this._cancelRefEvent();\n        this.ref = '';\n        this.refEvent = null;\n        this.receivedResp = null;\n        this.sent = false;\n        this.send();\n    }\n    send() {\n        if (this._hasReceived('timeout')) {\n            return;\n        }\n        this.startTimeout();\n        this.sent = true;\n        const status = this.channel.socket.push({\n            topic: this.channel.topic,\n            event: this.event,\n            payload: this.payload,\n            ref: this.ref,\n            join_ref: this.channel._joinRef(),\n        });\n        if (status === 'rate limited') {\n            this.rateLimited = true;\n        }\n    }\n    updatePayload(payload) {\n        this.payload = Object.assign(Object.assign({}, this.payload), payload);\n    }\n    receive(status, callback) {\n        var _a;\n        if (this._hasReceived(status)) {\n            callback((_a = this.receivedResp) === null || _a === void 0 ? void 0 : _a.response);\n        }\n        this.recHooks.push({ status, callback });\n        return this;\n    }\n    startTimeout() {\n        if (this.timeoutTimer) {\n            return;\n        }\n        this.ref = this.channel.socket._makeRef();\n        this.refEvent = this.channel._replyEventName(this.ref);\n        const callback = (payload) => {\n            this._cancelRefEvent();\n            this._cancelTimeout();\n            this.receivedResp = payload;\n            this._matchReceive(payload);\n        };\n        this.channel._on(this.refEvent, {}, callback);\n        this.timeoutTimer = setTimeout(() => {\n            this.trigger('timeout', {});\n        }, this.timeout);\n    }\n    trigger(status, response) {\n        if (this.refEvent)\n            this.channel._trigger(this.refEvent, { status, response });\n    }\n    destroy() {\n        this._cancelRefEvent();\n        this._cancelTimeout();\n    }\n    _cancelRefEvent() {\n        if (!this.refEvent) {\n            return;\n        }\n        this.channel._off(this.refEvent, {});\n    }\n    _cancelTimeout() {\n        clearTimeout(this.timeoutTimer);\n        this.timeoutTimer = undefined;\n    }\n    _matchReceive({ status, response, }) {\n        this.recHooks\n            .filter((h) => h.status === status)\n            .forEach((h) => h.callback(response));\n    }\n    _hasReceived(status) {\n        return this.receivedResp && this.receivedResp.status === status;\n    }\n}\n//# sourceMappingURL=push.js.map","/*\n  This file draws heavily from https://github.com/phoenixframework/phoenix/blob/d344ec0a732ab4ee204215b31de69cf4be72e3bf/assets/js/phoenix/presence.js\n  License: https://github.com/phoenixframework/phoenix/blob/d344ec0a732ab4ee204215b31de69cf4be72e3bf/LICENSE.md\n*/\nexport var REALTIME_PRESENCE_LISTEN_EVENTS;\n(function (REALTIME_PRESENCE_LISTEN_EVENTS) {\n    REALTIME_PRESENCE_LISTEN_EVENTS[\"SYNC\"] = \"sync\";\n    REALTIME_PRESENCE_LISTEN_EVENTS[\"JOIN\"] = \"join\";\n    REALTIME_PRESENCE_LISTEN_EVENTS[\"LEAVE\"] = \"leave\";\n})(REALTIME_PRESENCE_LISTEN_EVENTS || (REALTIME_PRESENCE_LISTEN_EVENTS = {}));\nexport default class RealtimePresence {\n    /**\n     * Initializes the Presence.\n     *\n     * @param channel - The RealtimeChannel\n     * @param opts - The options,\n     *        for example `{events: {state: 'state', diff: 'diff'}}`\n     */\n    constructor(channel, opts) {\n        this.channel = channel;\n        this.state = {};\n        this.pendingDiffs = [];\n        this.joinRef = null;\n        this.caller = {\n            onJoin: () => { },\n            onLeave: () => { },\n            onSync: () => { },\n        };\n        const events = (opts === null || opts === void 0 ? void 0 : opts.events) || {\n            state: 'presence_state',\n            diff: 'presence_diff',\n        };\n        this.channel._on(events.state, {}, (newState) => {\n            const { onJoin, onLeave, onSync } = this.caller;\n            this.joinRef = this.channel._joinRef();\n            this.state = RealtimePresence.syncState(this.state, newState, onJoin, onLeave);\n            this.pendingDiffs.forEach((diff) => {\n                this.state = RealtimePresence.syncDiff(this.state, diff, onJoin, onLeave);\n            });\n            this.pendingDiffs = [];\n            onSync();\n        });\n        this.channel._on(events.diff, {}, (diff) => {\n            const { onJoin, onLeave, onSync } = this.caller;\n            if (this.inPendingSyncState()) {\n                this.pendingDiffs.push(diff);\n            }\n            else {\n                this.state = RealtimePresence.syncDiff(this.state, diff, onJoin, onLeave);\n                onSync();\n            }\n        });\n        this.onJoin((key, currentPresences, newPresences) => {\n            this.channel._trigger('presence', {\n                event: 'join',\n                key,\n                currentPresences,\n                newPresences,\n            });\n        });\n        this.onLeave((key, currentPresences, leftPresences) => {\n            this.channel._trigger('presence', {\n                event: 'leave',\n                key,\n                currentPresences,\n                leftPresences,\n            });\n        });\n        this.onSync(() => {\n            this.channel._trigger('presence', { event: 'sync' });\n        });\n    }\n    /**\n     * Used to sync the list of presences on the server with the\n     * client's state.\n     *\n     * An optional `onJoin` and `onLeave` callback can be provided to\n     * react to changes in the client's local presences across\n     * disconnects and reconnects with the server.\n     *\n     * @internal\n     */\n    static syncState(currentState, newState, onJoin, onLeave) {\n        const state = this.cloneDeep(currentState);\n        const transformedState = this.transformState(newState);\n        const joins = {};\n        const leaves = {};\n        this.map(state, (key, presences) => {\n            if (!transformedState[key]) {\n                leaves[key] = presences;\n            }\n        });\n        this.map(transformedState, (key, newPresences) => {\n            const currentPresences = state[key];\n            if (currentPresences) {\n                const newPresenceRefs = newPresences.map((m) => m.presence_ref);\n                const curPresenceRefs = currentPresences.map((m) => m.presence_ref);\n                const joinedPresences = newPresences.filter((m) => curPresenceRefs.indexOf(m.presence_ref) < 0);\n                const leftPresences = currentPresences.filter((m) => newPresenceRefs.indexOf(m.presence_ref) < 0);\n                if (joinedPresences.length > 0) {\n                    joins[key] = joinedPresences;\n                }\n                if (leftPresences.length > 0) {\n                    leaves[key] = leftPresences;\n                }\n            }\n            else {\n                joins[key] = newPresences;\n            }\n        });\n        return this.syncDiff(state, { joins, leaves }, onJoin, onLeave);\n    }\n    /**\n     * Used to sync a diff of presence join and leave events from the\n     * server, as they happen.\n     *\n     * Like `syncState`, `syncDiff` accepts optional `onJoin` and\n     * `onLeave` callbacks to react to a user joining or leaving from a\n     * device.\n     *\n     * @internal\n     */\n    static syncDiff(state, diff, onJoin, onLeave) {\n        const { joins, leaves } = {\n            joins: this.transformState(diff.joins),\n            leaves: this.transformState(diff.leaves),\n        };\n        if (!onJoin) {\n            onJoin = () => { };\n        }\n        if (!onLeave) {\n            onLeave = () => { };\n        }\n        this.map(joins, (key, newPresences) => {\n            var _a;\n            const currentPresences = (_a = state[key]) !== null && _a !== void 0 ? _a : [];\n            state[key] = this.cloneDeep(newPresences);\n            if (currentPresences.length > 0) {\n                const joinedPresenceRefs = state[key].map((m) => m.presence_ref);\n                const curPresences = currentPresences.filter((m) => joinedPresenceRefs.indexOf(m.presence_ref) < 0);\n                state[key].unshift(...curPresences);\n            }\n            onJoin(key, currentPresences, newPresences);\n        });\n        this.map(leaves, (key, leftPresences) => {\n            let currentPresences = state[key];\n            if (!currentPresences)\n                return;\n            const presenceRefsToRemove = leftPresences.map((m) => m.presence_ref);\n            currentPresences = currentPresences.filter((m) => presenceRefsToRemove.indexOf(m.presence_ref) < 0);\n            state[key] = currentPresences;\n            onLeave(key, currentPresences, leftPresences);\n            if (currentPresences.length === 0)\n                delete state[key];\n        });\n        return state;\n    }\n    /** @internal */\n    static map(obj, func) {\n        return Object.getOwnPropertyNames(obj).map((key) => func(key, obj[key]));\n    }\n    /**\n     * Remove 'metas' key\n     * Change 'phx_ref' to 'presence_ref'\n     * Remove 'phx_ref' and 'phx_ref_prev'\n     *\n     * @example\n     * // returns {\n     *  abc123: [\n     *    { presence_ref: '2', user_id: 1 },\n     *    { presence_ref: '3', user_id: 2 }\n     *  ]\n     * }\n     * RealtimePresence.transformState({\n     *  abc123: {\n     *    metas: [\n     *      { phx_ref: '2', phx_ref_prev: '1' user_id: 1 },\n     *      { phx_ref: '3', user_id: 2 }\n     *    ]\n     *  }\n     * })\n     *\n     * @internal\n     */\n    static transformState(state) {\n        state = this.cloneDeep(state);\n        return Object.getOwnPropertyNames(state).reduce((newState, key) => {\n            const presences = state[key];\n            if ('metas' in presences) {\n                newState[key] = presences.metas.map((presence) => {\n                    presence['presence_ref'] = presence['phx_ref'];\n                    delete presence['phx_ref'];\n                    delete presence['phx_ref_prev'];\n                    return presence;\n                });\n            }\n            else {\n                newState[key] = presences;\n            }\n            return newState;\n        }, {});\n    }\n    /** @internal */\n    static cloneDeep(obj) {\n        return JSON.parse(JSON.stringify(obj));\n    }\n    /** @internal */\n    onJoin(callback) {\n        this.caller.onJoin = callback;\n    }\n    /** @internal */\n    onLeave(callback) {\n        this.caller.onLeave = callback;\n    }\n    /** @internal */\n    onSync(callback) {\n        this.caller.onSync = callback;\n    }\n    /** @internal */\n    inPendingSyncState() {\n        return !this.joinRef || this.joinRef !== this.channel._joinRef();\n    }\n}\n//# sourceMappingURL=RealtimePresence.js.map","/**\n * Helpers to convert the change Payload into native JS types.\n */\n// Adapted from epgsql (src/epgsql_binary.erl), this module licensed under\n// 3-clause BSD found here: https://raw.githubusercontent.com/epgsql/epgsql/devel/LICENSE\nexport var PostgresTypes;\n(function (PostgresTypes) {\n    PostgresTypes[\"abstime\"] = \"abstime\";\n    PostgresTypes[\"bool\"] = \"bool\";\n    PostgresTypes[\"date\"] = \"date\";\n    PostgresTypes[\"daterange\"] = \"daterange\";\n    PostgresTypes[\"float4\"] = \"float4\";\n    PostgresTypes[\"float8\"] = \"float8\";\n    PostgresTypes[\"int2\"] = \"int2\";\n    PostgresTypes[\"int4\"] = \"int4\";\n    PostgresTypes[\"int4range\"] = \"int4range\";\n    PostgresTypes[\"int8\"] = \"int8\";\n    PostgresTypes[\"int8range\"] = \"int8range\";\n    PostgresTypes[\"json\"] = \"json\";\n    PostgresTypes[\"jsonb\"] = \"jsonb\";\n    PostgresTypes[\"money\"] = \"money\";\n    PostgresTypes[\"numeric\"] = \"numeric\";\n    PostgresTypes[\"oid\"] = \"oid\";\n    PostgresTypes[\"reltime\"] = \"reltime\";\n    PostgresTypes[\"text\"] = \"text\";\n    PostgresTypes[\"time\"] = \"time\";\n    PostgresTypes[\"timestamp\"] = \"timestamp\";\n    PostgresTypes[\"timestamptz\"] = \"timestamptz\";\n    PostgresTypes[\"timetz\"] = \"timetz\";\n    PostgresTypes[\"tsrange\"] = \"tsrange\";\n    PostgresTypes[\"tstzrange\"] = \"tstzrange\";\n})(PostgresTypes || (PostgresTypes = {}));\n/**\n * Takes an array of columns and an object of string values then converts each string value\n * to its mapped type.\n *\n * @param {{name: String, type: String}[]} columns\n * @param {Object} record\n * @param {Object} options The map of various options that can be applied to the mapper\n * @param {Array} options.skipTypes The array of types that should not be converted\n *\n * @example convertChangeData([{name: 'first_name', type: 'text'}, {name: 'age', type: 'int4'}], {first_name: 'Paul', age:'33'}, {})\n * //=>{ first_name: 'Paul', age: 33 }\n */\nexport const convertChangeData = (columns, record, options = {}) => {\n    var _a;\n    const skipTypes = (_a = options.skipTypes) !== null && _a !== void 0 ? _a : [];\n    return Object.keys(record).reduce((acc, rec_key) => {\n        acc[rec_key] = convertColumn(rec_key, columns, record, skipTypes);\n        return acc;\n    }, {});\n};\n/**\n * Converts the value of an individual column.\n *\n * @param {String} columnName The column that you want to convert\n * @param {{name: String, type: String}[]} columns All of the columns\n * @param {Object} record The map of string values\n * @param {Array} skipTypes An array of types that should not be converted\n * @return {object} Useless information\n *\n * @example convertColumn('age', [{name: 'first_name', type: 'text'}, {name: 'age', type: 'int4'}], {first_name: 'Paul', age: '33'}, [])\n * //=> 33\n * @example convertColumn('age', [{name: 'first_name', type: 'text'}, {name: 'age', type: 'int4'}], {first_name: 'Paul', age: '33'}, ['int4'])\n * //=> \"33\"\n */\nexport const convertColumn = (columnName, columns, record, skipTypes) => {\n    const column = columns.find((x) => x.name === columnName);\n    const colType = column === null || column === void 0 ? void 0 : column.type;\n    const value = record[columnName];\n    if (colType && !skipTypes.includes(colType)) {\n        return convertCell(colType, value);\n    }\n    return noop(value);\n};\n/**\n * If the value of the cell is `null`, returns null.\n * Otherwise converts the string value to the correct type.\n * @param {String} type A postgres column type\n * @param {String} stringValue The cell value\n *\n * @example convertCell('bool', 't')\n * //=> true\n * @example convertCell('int8', '10')\n * //=> 10\n * @example convertCell('_int4', '{1,2,3,4}')\n * //=> [1,2,3,4]\n */\nexport const convertCell = (type, value) => {\n    // if data type is an array\n    if (type.charAt(0) === '_') {\n        const dataType = type.slice(1, type.length);\n        return toArray(value, dataType);\n    }\n    // If not null, convert to correct type.\n    switch (type) {\n        case PostgresTypes.bool:\n            return toBoolean(value);\n        case PostgresTypes.float4:\n        case PostgresTypes.float8:\n        case PostgresTypes.int2:\n        case PostgresTypes.int4:\n        case PostgresTypes.int8:\n        case PostgresTypes.numeric:\n        case PostgresTypes.oid:\n            return toNumber(value);\n        case PostgresTypes.json:\n        case PostgresTypes.jsonb:\n            return toJson(value);\n        case PostgresTypes.timestamp:\n            return toTimestampString(value); // Format to be consistent with PostgREST\n        case PostgresTypes.abstime: // To allow users to cast it based on Timezone\n        case PostgresTypes.date: // To allow users to cast it based on Timezone\n        case PostgresTypes.daterange:\n        case PostgresTypes.int4range:\n        case PostgresTypes.int8range:\n        case PostgresTypes.money:\n        case PostgresTypes.reltime: // To allow users to cast it based on Timezone\n        case PostgresTypes.text:\n        case PostgresTypes.time: // To allow users to cast it based on Timezone\n        case PostgresTypes.timestamptz: // To allow users to cast it based on Timezone\n        case PostgresTypes.timetz: // To allow users to cast it based on Timezone\n        case PostgresTypes.tsrange:\n        case PostgresTypes.tstzrange:\n            return noop(value);\n        default:\n            // Return the value for remaining types\n            return noop(value);\n    }\n};\nconst noop = (value) => {\n    return value;\n};\nexport const toBoolean = (value) => {\n    switch (value) {\n        case 't':\n            return true;\n        case 'f':\n            return false;\n        default:\n            return value;\n    }\n};\nexport const toNumber = (value) => {\n    if (typeof value === 'string') {\n        const parsedValue = parseFloat(value);\n        if (!Number.isNaN(parsedValue)) {\n            return parsedValue;\n        }\n    }\n    return value;\n};\nexport const toJson = (value) => {\n    if (typeof value === 'string') {\n        try {\n            return JSON.parse(value);\n        }\n        catch (error) {\n            console.log(`JSON parse error: ${error}`);\n            return value;\n        }\n    }\n    return value;\n};\n/**\n * Converts a Postgres Array into a native JS array\n *\n * @example toArray('{}', 'int4')\n * //=> []\n * @example toArray('{\"[2021-01-01,2021-12-31)\",\"(2021-01-01,2021-12-32]\"}', 'daterange')\n * //=> ['[2021-01-01,2021-12-31)', '(2021-01-01,2021-12-32]']\n * @example toArray([1,2,3,4], 'int4')\n * //=> [1,2,3,4]\n */\nexport const toArray = (value, type) => {\n    if (typeof value !== 'string') {\n        return value;\n    }\n    const lastIdx = value.length - 1;\n    const closeBrace = value[lastIdx];\n    const openBrace = value[0];\n    // Confirm value is a Postgres array by checking curly brackets\n    if (openBrace === '{' && closeBrace === '}') {\n        let arr;\n        const valTrim = value.slice(1, lastIdx);\n        // TODO: find a better solution to separate Postgres array data\n        try {\n            arr = JSON.parse('[' + valTrim + ']');\n        }\n        catch (_) {\n            // WARNING: splitting on comma does not cover all edge cases\n            arr = valTrim ? valTrim.split(',') : [];\n        }\n        return arr.map((val) => convertCell(type, val));\n    }\n    return value;\n};\n/**\n * Fixes timestamp to be ISO-8601. Swaps the space between the date and time for a 'T'\n * See https://github.com/supabase/supabase/issues/18\n *\n * @example toTimestampString('2019-09-10 00:00:00')\n * //=> '2019-09-10T00:00:00'\n */\nexport const toTimestampString = (value) => {\n    if (typeof value === 'string') {\n        return value.replace(' ', 'T');\n    }\n    return value;\n};\n//# sourceMappingURL=transformers.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CHANNEL_EVENTS, CHANNEL_STATES } from './lib/constants';\nimport Push from './lib/push';\nimport Timer from './lib/timer';\nimport RealtimePresence from './RealtimePresence';\nimport * as Transformers from './lib/transformers';\nexport var REALTIME_POSTGRES_CHANGES_LISTEN_EVENT;\n(function (REALTIME_POSTGRES_CHANGES_LISTEN_EVENT) {\n    REALTIME_POSTGRES_CHANGES_LISTEN_EVENT[\"ALL\"] = \"*\";\n    REALTIME_POSTGRES_CHANGES_LISTEN_EVENT[\"INSERT\"] = \"INSERT\";\n    REALTIME_POSTGRES_CHANGES_LISTEN_EVENT[\"UPDATE\"] = \"UPDATE\";\n    REALTIME_POSTGRES_CHANGES_LISTEN_EVENT[\"DELETE\"] = \"DELETE\";\n})(REALTIME_POSTGRES_CHANGES_LISTEN_EVENT || (REALTIME_POSTGRES_CHANGES_LISTEN_EVENT = {}));\nexport var REALTIME_LISTEN_TYPES;\n(function (REALTIME_LISTEN_TYPES) {\n    REALTIME_LISTEN_TYPES[\"BROADCAST\"] = \"broadcast\";\n    REALTIME_LISTEN_TYPES[\"PRESENCE\"] = \"presence\";\n    REALTIME_LISTEN_TYPES[\"POSTGRES_CHANGES\"] = \"postgres_changes\";\n})(REALTIME_LISTEN_TYPES || (REALTIME_LISTEN_TYPES = {}));\nexport var REALTIME_SUBSCRIBE_STATES;\n(function (REALTIME_SUBSCRIBE_STATES) {\n    REALTIME_SUBSCRIBE_STATES[\"SUBSCRIBED\"] = \"SUBSCRIBED\";\n    REALTIME_SUBSCRIBE_STATES[\"TIMED_OUT\"] = \"TIMED_OUT\";\n    REALTIME_SUBSCRIBE_STATES[\"CLOSED\"] = \"CLOSED\";\n    REALTIME_SUBSCRIBE_STATES[\"CHANNEL_ERROR\"] = \"CHANNEL_ERROR\";\n})(REALTIME_SUBSCRIBE_STATES || (REALTIME_SUBSCRIBE_STATES = {}));\n/** A channel is the basic building block of Realtime\n * and narrows the scope of data flow to subscribed clients.\n * You can think of a channel as a chatroom where participants are able to see who's online\n * and send and receive messages.\n **/\nexport default class RealtimeChannel {\n    constructor(\n    /** Topic name can be any string. */\n    topic, params = { config: {} }, socket) {\n        this.topic = topic;\n        this.params = params;\n        this.socket = socket;\n        this.bindings = {};\n        this.state = CHANNEL_STATES.closed;\n        this.joinedOnce = false;\n        this.pushBuffer = [];\n        this.params.config = Object.assign({\n            broadcast: { ack: false, self: false },\n            presence: { key: '' },\n        }, params.config);\n        this.timeout = this.socket.timeout;\n        this.joinPush = new Push(this, CHANNEL_EVENTS.join, this.params, this.timeout);\n        this.rejoinTimer = new Timer(() => this._rejoinUntilConnected(), this.socket.reconnectAfterMs);\n        this.joinPush.receive('ok', () => {\n            this.state = CHANNEL_STATES.joined;\n            this.rejoinTimer.reset();\n            this.pushBuffer.forEach((pushEvent) => pushEvent.send());\n            this.pushBuffer = [];\n        });\n        this._onClose(() => {\n            this.rejoinTimer.reset();\n            this.socket.log('channel', `close ${this.topic} ${this._joinRef()}`);\n            this.state = CHANNEL_STATES.closed;\n            this.socket._remove(this);\n        });\n        this._onError((reason) => {\n            if (this._isLeaving() || this._isClosed()) {\n                return;\n            }\n            this.socket.log('channel', `error ${this.topic}`, reason);\n            this.state = CHANNEL_STATES.errored;\n            this.rejoinTimer.scheduleTimeout();\n        });\n        this.joinPush.receive('timeout', () => {\n            if (!this._isJoining()) {\n                return;\n            }\n            this.socket.log('channel', `timeout ${this.topic}`, this.joinPush.timeout);\n            this.state = CHANNEL_STATES.errored;\n            this.rejoinTimer.scheduleTimeout();\n        });\n        this._on(CHANNEL_EVENTS.reply, {}, (payload, ref) => {\n            this._trigger(this._replyEventName(ref), payload);\n        });\n        this.presence = new RealtimePresence(this);\n    }\n    /** Subscribe registers your client with the server */\n    subscribe(callback, timeout = this.timeout) {\n        var _a, _b;\n        if (this.joinedOnce) {\n            throw `tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance`;\n        }\n        else {\n            const { config: { broadcast, presence }, } = this.params;\n            this._onError((e) => callback && callback('CHANNEL_ERROR', e));\n            this._onClose(() => callback && callback('CLOSED'));\n            const accessTokenPayload = {};\n            const config = {\n                broadcast,\n                presence,\n                postgres_changes: (_b = (_a = this.bindings.postgres_changes) === null || _a === void 0 ? void 0 : _a.map((r) => r.filter)) !== null && _b !== void 0 ? _b : [],\n            };\n            if (this.socket.accessToken) {\n                accessTokenPayload.access_token = this.socket.accessToken;\n            }\n            this.updateJoinPayload(Object.assign({ config }, accessTokenPayload));\n            this.joinedOnce = true;\n            this._rejoin(timeout);\n            this.joinPush\n                .receive('ok', ({ postgres_changes: serverPostgresFilters, }) => {\n                var _a;\n                this.socket.accessToken &&\n                    this.socket.setAuth(this.socket.accessToken);\n                if (serverPostgresFilters === undefined) {\n                    callback && callback('SUBSCRIBED');\n                    return;\n                }\n                else {\n                    const clientPostgresBindings = this.bindings.postgres_changes;\n                    const bindingsLen = (_a = clientPostgresBindings === null || clientPostgresBindings === void 0 ? void 0 : clientPostgresBindings.length) !== null && _a !== void 0 ? _a : 0;\n                    const newPostgresBindings = [];\n                    for (let i = 0; i < bindingsLen; i++) {\n                        const clientPostgresBinding = clientPostgresBindings[i];\n                        const { filter: { event, schema, table, filter }, } = clientPostgresBinding;\n                        const serverPostgresFilter = serverPostgresFilters && serverPostgresFilters[i];\n                        if (serverPostgresFilter &&\n                            serverPostgresFilter.event === event &&\n                            serverPostgresFilter.schema === schema &&\n                            serverPostgresFilter.table === table &&\n                            serverPostgresFilter.filter === filter) {\n                            newPostgresBindings.push(Object.assign(Object.assign({}, clientPostgresBinding), { id: serverPostgresFilter.id }));\n                        }\n                        else {\n                            this.unsubscribe();\n                            callback &&\n                                callback('CHANNEL_ERROR', new Error('mismatch between server and client bindings for postgres changes'));\n                            return;\n                        }\n                    }\n                    this.bindings.postgres_changes = newPostgresBindings;\n                    callback && callback('SUBSCRIBED');\n                    return;\n                }\n            })\n                .receive('error', (error) => {\n                callback &&\n                    callback('CHANNEL_ERROR', new Error(JSON.stringify(Object.values(error).join(', ') || 'error')));\n                return;\n            })\n                .receive('timeout', () => {\n                callback && callback('TIMED_OUT');\n                return;\n            });\n        }\n        return this;\n    }\n    presenceState() {\n        return this.presence.state;\n    }\n    track(payload, opts = {}) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return yield this.send({\n                type: 'presence',\n                event: 'track',\n                payload,\n            }, opts.timeout || this.timeout);\n        });\n    }\n    untrack(opts = {}) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return yield this.send({\n                type: 'presence',\n                event: 'untrack',\n            }, opts);\n        });\n    }\n    on(type, filter, callback) {\n        return this._on(type, filter, callback);\n    }\n    send(payload, opts = {}) {\n        return new Promise((resolve) => {\n            var _a, _b, _c;\n            const push = this._push(payload.type, payload, opts.timeout || this.timeout);\n            if (push.rateLimited) {\n                resolve('rate limited');\n            }\n            if (payload.type === 'broadcast' &&\n                !((_c = (_b = (_a = this.params) === null || _a === void 0 ? void 0 : _a.config) === null || _b === void 0 ? void 0 : _b.broadcast) === null || _c === void 0 ? void 0 : _c.ack)) {\n                resolve('ok');\n            }\n            push.receive('ok', () => resolve('ok'));\n            push.receive('timeout', () => resolve('timed out'));\n        });\n    }\n    updateJoinPayload(payload) {\n        this.joinPush.updatePayload(payload);\n    }\n    /**\n     * Leaves the channel.\n     *\n     * Unsubscribes from server events, and instructs channel to terminate on server.\n     * Triggers onClose() hooks.\n     *\n     * To receive leave acknowledgements, use the a `receive` hook to bind to the server ack, ie:\n     * channel.unsubscribe().receive(\"ok\", () => alert(\"left!\") )\n     */\n    unsubscribe(timeout = this.timeout) {\n        this.state = CHANNEL_STATES.leaving;\n        const onClose = () => {\n            this.socket.log('channel', `leave ${this.topic}`);\n            this._trigger(CHANNEL_EVENTS.close, 'leave', this._joinRef());\n        };\n        this.rejoinTimer.reset();\n        // Destroy joinPush to avoid connection timeouts during unscription phase\n        this.joinPush.destroy();\n        return new Promise((resolve) => {\n            const leavePush = new Push(this, CHANNEL_EVENTS.leave, {}, timeout);\n            leavePush\n                .receive('ok', () => {\n                onClose();\n                resolve('ok');\n            })\n                .receive('timeout', () => {\n                onClose();\n                resolve('timed out');\n            })\n                .receive('error', () => {\n                resolve('error');\n            });\n            leavePush.send();\n            if (!this._canPush()) {\n                leavePush.trigger('ok', {});\n            }\n        });\n    }\n    /** @internal */\n    _push(event, payload, timeout = this.timeout) {\n        if (!this.joinedOnce) {\n            throw `tried to push '${event}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;\n        }\n        let pushEvent = new Push(this, event, payload, timeout);\n        if (this._canPush()) {\n            pushEvent.send();\n        }\n        else {\n            pushEvent.startTimeout();\n            this.pushBuffer.push(pushEvent);\n        }\n        return pushEvent;\n    }\n    /**\n     * Overridable message hook\n     *\n     * Receives all events for specialized message handling before dispatching to the channel callbacks.\n     * Must return the payload, modified or unmodified.\n     *\n     * @internal\n     */\n    _onMessage(_event, payload, _ref) {\n        return payload;\n    }\n    /** @internal */\n    _isMember(topic) {\n        return this.topic === topic;\n    }\n    /** @internal */\n    _joinRef() {\n        return this.joinPush.ref;\n    }\n    /** @internal */\n    _trigger(type, payload, ref) {\n        var _a, _b;\n        const typeLower = type.toLocaleLowerCase();\n        const { close, error, leave, join } = CHANNEL_EVENTS;\n        const events = [close, error, leave, join];\n        if (ref && events.indexOf(typeLower) >= 0 && ref !== this._joinRef()) {\n            return;\n        }\n        let handledPayload = this._onMessage(typeLower, payload, ref);\n        if (payload && !handledPayload) {\n            throw 'channel onMessage callbacks must return the payload, modified or unmodified';\n        }\n        if (['insert', 'update', 'delete'].includes(typeLower)) {\n            (_a = this.bindings.postgres_changes) === null || _a === void 0 ? void 0 : _a.filter((bind) => {\n                var _a, _b, _c;\n                return (((_a = bind.filter) === null || _a === void 0 ? void 0 : _a.event) === '*' ||\n                    ((_c = (_b = bind.filter) === null || _b === void 0 ? void 0 : _b.event) === null || _c === void 0 ? void 0 : _c.toLocaleLowerCase()) === typeLower);\n            }).map((bind) => bind.callback(handledPayload, ref));\n        }\n        else {\n            (_b = this.bindings[typeLower]) === null || _b === void 0 ? void 0 : _b.filter((bind) => {\n                var _a, _b, _c, _d, _e, _f;\n                if (['broadcast', 'presence', 'postgres_changes'].includes(typeLower)) {\n                    if ('id' in bind) {\n                        const bindId = bind.id;\n                        const bindEvent = (_a = bind.filter) === null || _a === void 0 ? void 0 : _a.event;\n                        return (bindId &&\n                            ((_b = payload.ids) === null || _b === void 0 ? void 0 : _b.includes(bindId)) &&\n                            (bindEvent === '*' ||\n                                (bindEvent === null || bindEvent === void 0 ? void 0 : bindEvent.toLocaleLowerCase()) ===\n                                    ((_c = payload.data) === null || _c === void 0 ? void 0 : _c.type.toLocaleLowerCase())));\n                    }\n                    else {\n                        const bindEvent = (_e = (_d = bind === null || bind === void 0 ? void 0 : bind.filter) === null || _d === void 0 ? void 0 : _d.event) === null || _e === void 0 ? void 0 : _e.toLocaleLowerCase();\n                        return (bindEvent === '*' ||\n                            bindEvent === ((_f = payload === null || payload === void 0 ? void 0 : payload.event) === null || _f === void 0 ? void 0 : _f.toLocaleLowerCase()));\n                    }\n                }\n                else {\n                    return bind.type.toLocaleLowerCase() === typeLower;\n                }\n            }).map((bind) => {\n                if (typeof handledPayload === 'object' && 'ids' in handledPayload) {\n                    const postgresChanges = handledPayload.data;\n                    const { schema, table, commit_timestamp, type, errors } = postgresChanges;\n                    const enrichedPayload = {\n                        schema: schema,\n                        table: table,\n                        commit_timestamp: commit_timestamp,\n                        eventType: type,\n                        new: {},\n                        old: {},\n                        errors: errors,\n                    };\n                    handledPayload = Object.assign(Object.assign({}, enrichedPayload), this._getPayloadRecords(postgresChanges));\n                }\n                bind.callback(handledPayload, ref);\n            });\n        }\n    }\n    /** @internal */\n    _isClosed() {\n        return this.state === CHANNEL_STATES.closed;\n    }\n    /** @internal */\n    _isJoined() {\n        return this.state === CHANNEL_STATES.joined;\n    }\n    /** @internal */\n    _isJoining() {\n        return this.state === CHANNEL_STATES.joining;\n    }\n    /** @internal */\n    _isLeaving() {\n        return this.state === CHANNEL_STATES.leaving;\n    }\n    /** @internal */\n    _replyEventName(ref) {\n        return `chan_reply_${ref}`;\n    }\n    /** @internal */\n    _on(type, filter, callback) {\n        const typeLower = type.toLocaleLowerCase();\n        const binding = {\n            type: typeLower,\n            filter: filter,\n            callback: callback,\n        };\n        if (this.bindings[typeLower]) {\n            this.bindings[typeLower].push(binding);\n        }\n        else {\n            this.bindings[typeLower] = [binding];\n        }\n        return this;\n    }\n    /** @internal */\n    _off(type, filter) {\n        const typeLower = type.toLocaleLowerCase();\n        this.bindings[typeLower] = this.bindings[typeLower].filter((bind) => {\n            var _a;\n            return !(((_a = bind.type) === null || _a === void 0 ? void 0 : _a.toLocaleLowerCase()) === typeLower &&\n                RealtimeChannel.isEqual(bind.filter, filter));\n        });\n        return this;\n    }\n    /** @internal */\n    static isEqual(obj1, obj2) {\n        if (Object.keys(obj1).length !== Object.keys(obj2).length) {\n            return false;\n        }\n        for (const k in obj1) {\n            if (obj1[k] !== obj2[k]) {\n                return false;\n            }\n        }\n        return true;\n    }\n    /** @internal */\n    _rejoinUntilConnected() {\n        this.rejoinTimer.scheduleTimeout();\n        if (this.socket.isConnected()) {\n            this._rejoin();\n        }\n    }\n    /**\n     * Registers a callback that will be executed when the channel closes.\n     *\n     * @internal\n     */\n    _onClose(callback) {\n        this._on(CHANNEL_EVENTS.close, {}, callback);\n    }\n    /**\n     * Registers a callback that will be executed when the channel encounteres an error.\n     *\n     * @internal\n     */\n    _onError(callback) {\n        this._on(CHANNEL_EVENTS.error, {}, (reason) => callback(reason));\n    }\n    /**\n     * Returns `true` if the socket is connected and the channel has been joined.\n     *\n     * @internal\n     */\n    _canPush() {\n        return this.socket.isConnected() && this._isJoined();\n    }\n    /** @internal */\n    _rejoin(timeout = this.timeout) {\n        if (this._isLeaving()) {\n            return;\n        }\n        this.socket._leaveOpenTopic(this.topic);\n        this.state = CHANNEL_STATES.joining;\n        this.joinPush.resend(timeout);\n    }\n    /** @internal */\n    _getPayloadRecords(payload) {\n        const records = {\n            new: {},\n            old: {},\n        };\n        if (payload.type === 'INSERT' || payload.type === 'UPDATE') {\n            records.new = Transformers.convertChangeData(payload.columns, payload.record);\n        }\n        if (payload.type === 'UPDATE' || payload.type === 'DELETE') {\n            records.old = Transformers.convertChangeData(payload.columns, payload.old_record);\n        }\n        return records;\n    }\n}\n//# sourceMappingURL=RealtimeChannel.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { w3cwebsocket } from 'websocket';\nimport { VSN, CHANNEL_EVENTS, TRANSPORTS, SOCKET_STATES, DEFAULT_TIMEOUT, WS_CLOSE_NORMAL, DEFAULT_HEADERS, CONNECTION_STATE, } from './lib/constants';\nimport Timer from './lib/timer';\nimport Serializer from './lib/serializer';\nimport RealtimeChannel from './RealtimeChannel';\nconst noop = () => { };\nexport default class RealtimeClient {\n    /**\n     * Initializes the Socket.\n     *\n     * @param endPoint The string WebSocket endpoint, ie, \"ws://example.com/socket\", \"wss://example.com\", \"/socket\" (inherited host & protocol)\n     * @param options.transport The Websocket Transport, for example WebSocket.\n     * @param options.timeout The default timeout in milliseconds to trigger push timeouts.\n     * @param options.params The optional params to pass when connecting.\n     * @param options.headers The optional headers to pass when connecting.\n     * @param options.heartbeatIntervalMs The millisec interval to send a heartbeat message.\n     * @param options.logger The optional function for specialized logging, ie: logger: (kind, msg, data) => { console.log(`${kind}: ${msg}`, data) }\n     * @param options.encode The function to encode outgoing messages. Defaults to JSON: (payload, callback) => callback(JSON.stringify(payload))\n     * @param options.decode The function to decode incoming messages. Defaults to Serializer's decode.\n     * @param options.reconnectAfterMs he optional function that returns the millsec reconnect interval. Defaults to stepped backoff off.\n     */\n    constructor(endPoint, options) {\n        var _a;\n        this.accessToken = null;\n        this.channels = [];\n        this.endPoint = '';\n        this.headers = DEFAULT_HEADERS;\n        this.params = {};\n        this.timeout = DEFAULT_TIMEOUT;\n        this.transport = w3cwebsocket;\n        this.heartbeatIntervalMs = 30000;\n        this.heartbeatTimer = undefined;\n        this.pendingHeartbeatRef = null;\n        this.ref = 0;\n        this.logger = noop;\n        this.conn = null;\n        this.sendBuffer = [];\n        this.serializer = new Serializer();\n        this.stateChangeCallbacks = {\n            open: [],\n            close: [],\n            error: [],\n            message: [],\n        };\n        this.eventsPerSecondLimitMs = 100;\n        this.inThrottle = false;\n        this.endPoint = `${endPoint}/${TRANSPORTS.websocket}`;\n        if (options === null || options === void 0 ? void 0 : options.params)\n            this.params = options.params;\n        if (options === null || options === void 0 ? void 0 : options.headers)\n            this.headers = Object.assign(Object.assign({}, this.headers), options.headers);\n        if (options === null || options === void 0 ? void 0 : options.timeout)\n            this.timeout = options.timeout;\n        if (options === null || options === void 0 ? void 0 : options.logger)\n            this.logger = options.logger;\n        if (options === null || options === void 0 ? void 0 : options.transport)\n            this.transport = options.transport;\n        if (options === null || options === void 0 ? void 0 : options.heartbeatIntervalMs)\n            this.heartbeatIntervalMs = options.heartbeatIntervalMs;\n        const eventsPerSecond = (_a = options === null || options === void 0 ? void 0 : options.params) === null || _a === void 0 ? void 0 : _a.eventsPerSecond;\n        if (eventsPerSecond)\n            this.eventsPerSecondLimitMs = Math.floor(1000 / eventsPerSecond);\n        this.reconnectAfterMs = (options === null || options === void 0 ? void 0 : options.reconnectAfterMs)\n            ? options.reconnectAfterMs\n            : (tries) => {\n                return [1000, 2000, 5000, 10000][tries - 1] || 10000;\n            };\n        this.encode = (options === null || options === void 0 ? void 0 : options.encode)\n            ? options.encode\n            : (payload, callback) => {\n                return callback(JSON.stringify(payload));\n            };\n        this.decode = (options === null || options === void 0 ? void 0 : options.decode)\n            ? options.decode\n            : this.serializer.decode.bind(this.serializer);\n        this.reconnectTimer = new Timer(() => __awaiter(this, void 0, void 0, function* () {\n            this.disconnect();\n            this.connect();\n        }), this.reconnectAfterMs);\n    }\n    /**\n     * Connects the socket, unless already connected.\n     */\n    connect() {\n        if (this.conn) {\n            return;\n        }\n        this.conn = new this.transport(this._endPointURL(), [], null, this.headers);\n        if (this.conn) {\n            this.conn.binaryType = 'arraybuffer';\n            this.conn.onopen = () => this._onConnOpen();\n            this.conn.onerror = (error) => this._onConnError(error);\n            this.conn.onmessage = (event) => this._onConnMessage(event);\n            this.conn.onclose = (event) => this._onConnClose(event);\n        }\n    }\n    /**\n     * Disconnects the socket.\n     *\n     * @param code A numeric status code to send on disconnect.\n     * @param reason A custom reason for the disconnect.\n     */\n    disconnect(code, reason) {\n        if (this.conn) {\n            this.conn.onclose = function () { }; // noop\n            if (code) {\n                this.conn.close(code, reason !== null && reason !== void 0 ? reason : '');\n            }\n            else {\n                this.conn.close();\n            }\n            this.conn = null;\n            // remove open handles\n            this.heartbeatTimer && clearInterval(this.heartbeatTimer);\n            this.reconnectTimer.reset();\n        }\n    }\n    getChannels() {\n        return this.channels;\n    }\n    removeChannel(channel) {\n        return channel.unsubscribe().then((status) => {\n            if (this.channels.length === 0) {\n                this.disconnect();\n            }\n            return status;\n        });\n    }\n    removeAllChannels() {\n        return Promise.all(this.channels.map((channel) => channel.unsubscribe())).then((values) => {\n            this.disconnect();\n            return values;\n        });\n    }\n    /**\n     * Logs the message.\n     *\n     * For customized logging, `this.logger` can be overriden.\n     */\n    log(kind, msg, data) {\n        this.logger(kind, msg, data);\n    }\n    /**\n     * Returns the current state of the socket.\n     */\n    connectionState() {\n        switch (this.conn && this.conn.readyState) {\n            case SOCKET_STATES.connecting:\n                return CONNECTION_STATE.Connecting;\n            case SOCKET_STATES.open:\n                return CONNECTION_STATE.Open;\n            case SOCKET_STATES.closing:\n                return CONNECTION_STATE.Closing;\n            default:\n                return CONNECTION_STATE.Closed;\n        }\n    }\n    /**\n     * Retuns `true` is the connection is open.\n     */\n    isConnected() {\n        return this.connectionState() === CONNECTION_STATE.Open;\n    }\n    channel(topic, params = { config: {} }) {\n        if (!this.isConnected()) {\n            this.connect();\n        }\n        const chan = new RealtimeChannel(`realtime:${topic}`, params, this);\n        this.channels.push(chan);\n        return chan;\n    }\n    /**\n     * Push out a message if the socket is connected.\n     *\n     * If the socket is not connected, the message gets enqueued within a local buffer, and sent out when a connection is next established.\n     */\n    push(data) {\n        const { topic, event, payload, ref } = data;\n        let callback = () => {\n            this.encode(data, (result) => {\n                var _a;\n                (_a = this.conn) === null || _a === void 0 ? void 0 : _a.send(result);\n            });\n        };\n        this.log('push', `${topic} ${event} (${ref})`, payload);\n        if (this.isConnected()) {\n            if (['broadcast', 'presence', 'postgres_changes'].includes(event)) {\n                const isThrottled = this._throttle(callback)();\n                if (isThrottled) {\n                    return 'rate limited';\n                }\n            }\n            else {\n                callback();\n            }\n        }\n        else {\n            this.sendBuffer.push(callback);\n        }\n    }\n    /**\n     * Sets the JWT access token used for channel subscription authorization and Realtime RLS.\n     *\n     * @param token A JWT string.\n     */\n    setAuth(token) {\n        this.accessToken = token;\n        this.channels.forEach((channel) => {\n            token && channel.updateJoinPayload({ access_token: token });\n            if (channel.joinedOnce && channel._isJoined()) {\n                channel._push(CHANNEL_EVENTS.access_token, { access_token: token });\n            }\n        });\n    }\n    /**\n     * Return the next message ref, accounting for overflows\n     *\n     * @internal\n     */\n    _makeRef() {\n        let newRef = this.ref + 1;\n        if (newRef === this.ref) {\n            this.ref = 0;\n        }\n        else {\n            this.ref = newRef;\n        }\n        return this.ref.toString();\n    }\n    /**\n     * Unsubscribe from channels with the specified topic.\n     *\n     * @internal\n     */\n    _leaveOpenTopic(topic) {\n        let dupChannel = this.channels.find((c) => c.topic === topic && (c._isJoined() || c._isJoining()));\n        if (dupChannel) {\n            this.log('transport', `leaving duplicate topic \"${topic}\"`);\n            dupChannel.unsubscribe();\n        }\n    }\n    /**\n     * Removes a subscription from the socket.\n     *\n     * @param channel An open subscription.\n     *\n     * @internal\n     */\n    _remove(channel) {\n        this.channels = this.channels.filter((c) => c._joinRef() !== channel._joinRef());\n    }\n    /**\n     * Returns the URL of the websocket.\n     *\n     * @internal\n     */\n    _endPointURL() {\n        return this._appendParams(this.endPoint, Object.assign({}, this.params, { vsn: VSN }));\n    }\n    /** @internal */\n    _onConnMessage(rawMessage) {\n        this.decode(rawMessage.data, (msg) => {\n            let { topic, event, payload, ref } = msg;\n            if ((ref && ref === this.pendingHeartbeatRef) ||\n                event === (payload === null || payload === void 0 ? void 0 : payload.type)) {\n                this.pendingHeartbeatRef = null;\n            }\n            this.log('receive', `${payload.status || ''} ${topic} ${event} ${(ref && '(' + ref + ')') || ''}`, payload);\n            this.channels\n                .filter((channel) => channel._isMember(topic))\n                .forEach((channel) => channel._trigger(event, payload, ref));\n            this.stateChangeCallbacks.message.forEach((callback) => callback(msg));\n        });\n    }\n    /** @internal */\n    _onConnOpen() {\n        this.log('transport', `connected to ${this._endPointURL()}`);\n        this._flushSendBuffer();\n        this.reconnectTimer.reset();\n        this.heartbeatTimer && clearInterval(this.heartbeatTimer);\n        this.heartbeatTimer = setInterval(() => this._sendHeartbeat(), this.heartbeatIntervalMs);\n        this.stateChangeCallbacks.open.forEach((callback) => callback());\n    }\n    /** @internal */\n    _onConnClose(event) {\n        this.log('transport', 'close', event);\n        this._triggerChanError();\n        this.heartbeatTimer && clearInterval(this.heartbeatTimer);\n        this.reconnectTimer.scheduleTimeout();\n        this.stateChangeCallbacks.close.forEach((callback) => callback(event));\n    }\n    /** @internal */\n    _onConnError(error) {\n        this.log('transport', error.message);\n        this._triggerChanError();\n        this.stateChangeCallbacks.error.forEach((callback) => callback(error));\n    }\n    /** @internal */\n    _triggerChanError() {\n        this.channels.forEach((channel) => channel._trigger(CHANNEL_EVENTS.error));\n    }\n    /** @internal */\n    _appendParams(url, params) {\n        if (Object.keys(params).length === 0) {\n            return url;\n        }\n        const prefix = url.match(/\\?/) ? '&' : '?';\n        const query = new URLSearchParams(params);\n        return `${url}${prefix}${query}`;\n    }\n    /** @internal */\n    _flushSendBuffer() {\n        if (this.isConnected() && this.sendBuffer.length > 0) {\n            this.sendBuffer.forEach((callback) => callback());\n            this.sendBuffer = [];\n        }\n    }\n    /** @internal */\n    _sendHeartbeat() {\n        var _a;\n        if (!this.isConnected()) {\n            return;\n        }\n        if (this.pendingHeartbeatRef) {\n            this.pendingHeartbeatRef = null;\n            this.log('transport', 'heartbeat timeout. Attempting to re-establish connection');\n            (_a = this.conn) === null || _a === void 0 ? void 0 : _a.close(WS_CLOSE_NORMAL, 'hearbeat timeout');\n            return;\n        }\n        this.pendingHeartbeatRef = this._makeRef();\n        this.push({\n            topic: 'phoenix',\n            event: 'heartbeat',\n            payload: {},\n            ref: this.pendingHeartbeatRef,\n        });\n        this.setAuth(this.accessToken);\n    }\n    /** @internal */\n    _throttle(callback, eventsPerSecondLimit = this.eventsPerSecondLimitMs) {\n        return () => {\n            if (this.inThrottle)\n                return true;\n            callback();\n            this.inThrottle = true;\n            setTimeout(() => {\n                this.inThrottle = false;\n            }, eventsPerSecondLimit);\n            return false;\n        };\n    }\n}\n//# sourceMappingURL=RealtimeClient.js.map","export class StorageError extends Error {\n    constructor(message) {\n        super(message);\n        this.__isStorageError = true;\n        this.name = 'StorageError';\n    }\n}\nexport function isStorageError(error) {\n    return typeof error === 'object' && error !== null && '__isStorageError' in error;\n}\nexport class StorageApiError extends StorageError {\n    constructor(message, status) {\n        super(message);\n        this.name = 'StorageApiError';\n        this.status = status;\n    }\n    toJSON() {\n        return {\n            name: this.name,\n            message: this.message,\n            status: this.status,\n        };\n    }\n}\nexport class StorageUnknownError extends StorageError {\n    constructor(message, originalError) {\n        super(message);\n        this.name = 'StorageUnknownError';\n        this.originalError = originalError;\n    }\n}\n//# sourceMappingURL=errors.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nexport const resolveFetch = (customFetch) => {\n    let _fetch;\n    if (customFetch) {\n        _fetch = customFetch;\n    }\n    else if (typeof fetch === 'undefined') {\n        _fetch = (...args) => __awaiter(void 0, void 0, void 0, function* () { return yield (yield import('cross-fetch')).fetch(...args); });\n    }\n    else {\n        _fetch = fetch;\n    }\n    return (...args) => _fetch(...args);\n};\nexport const resolveResponse = () => __awaiter(void 0, void 0, void 0, function* () {\n    if (typeof Response === 'undefined') {\n        return (yield import('cross-fetch')).Response;\n    }\n    return Response;\n});\n//# sourceMappingURL=helpers.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { StorageApiError, StorageUnknownError } from './errors';\nimport { resolveResponse } from './helpers';\nconst _getErrorMessage = (err) => err.msg || err.message || err.error_description || err.error || JSON.stringify(err);\nconst handleError = (error, reject) => __awaiter(void 0, void 0, void 0, function* () {\n    const Res = yield resolveResponse();\n    if (error instanceof Res) {\n        error.json().then((err) => {\n            reject(new StorageApiError(_getErrorMessage(err), error.status || 500));\n        });\n    }\n    else {\n        reject(new StorageUnknownError(_getErrorMessage(error), error));\n    }\n});\nconst _getRequestParams = (method, options, parameters, body) => {\n    const params = { method, headers: (options === null || options === void 0 ? void 0 : options.headers) || {} };\n    if (method === 'GET') {\n        return params;\n    }\n    params.headers = Object.assign({ 'Content-Type': 'application/json' }, options === null || options === void 0 ? void 0 : options.headers);\n    params.body = JSON.stringify(body);\n    return Object.assign(Object.assign({}, params), parameters);\n};\nfunction _handleRequest(fetcher, method, url, options, parameters, body) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return new Promise((resolve, reject) => {\n            fetcher(url, _getRequestParams(method, options, parameters, body))\n                .then((result) => {\n                if (!result.ok)\n                    throw result;\n                if (options === null || options === void 0 ? void 0 : options.noResolveJson)\n                    return result;\n                return result.json();\n            })\n                .then((data) => resolve(data))\n                .catch((error) => handleError(error, reject));\n        });\n    });\n}\nexport function get(fetcher, url, options, parameters) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return _handleRequest(fetcher, 'GET', url, options, parameters);\n    });\n}\nexport function post(fetcher, url, body, options, parameters) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return _handleRequest(fetcher, 'POST', url, options, parameters, body);\n    });\n}\nexport function put(fetcher, url, body, options, parameters) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return _handleRequest(fetcher, 'PUT', url, options, parameters, body);\n    });\n}\nexport function remove(fetcher, url, body, options, parameters) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return _handleRequest(fetcher, 'DELETE', url, options, parameters, body);\n    });\n}\n//# sourceMappingURL=fetch.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { isStorageError } from '../lib/errors';\nimport { get, post, remove } from '../lib/fetch';\nimport { resolveFetch } from '../lib/helpers';\nconst DEFAULT_SEARCH_OPTIONS = {\n    limit: 100,\n    offset: 0,\n    sortBy: {\n        column: 'name',\n        order: 'asc',\n    },\n};\nconst DEFAULT_FILE_OPTIONS = {\n    cacheControl: '3600',\n    contentType: 'text/plain;charset=UTF-8',\n    upsert: false,\n};\nexport default class StorageFileApi {\n    constructor(url, headers = {}, bucketId, fetch) {\n        this.url = url;\n        this.headers = headers;\n        this.bucketId = bucketId;\n        this.fetch = resolveFetch(fetch);\n    }\n    /**\n     * Uploads a file to an existing bucket or replaces an existing file at the specified path with a new one.\n     *\n     * @param method HTTP method.\n     * @param path The relative file path. Should be of the format `folder/subfolder/filename.png`. The bucket must already exist before attempting to upload.\n     * @param fileBody The body of the file to be stored in the bucket.\n     */\n    uploadOrUpdate(method, path, fileBody, fileOptions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                let body;\n                const options = Object.assign(Object.assign({}, DEFAULT_FILE_OPTIONS), fileOptions);\n                const headers = Object.assign(Object.assign({}, this.headers), (method === 'POST' && { 'x-upsert': String(options.upsert) }));\n                if (typeof Blob !== 'undefined' && fileBody instanceof Blob) {\n                    body = new FormData();\n                    body.append('cacheControl', options.cacheControl);\n                    body.append('', fileBody);\n                }\n                else if (typeof FormData !== 'undefined' && fileBody instanceof FormData) {\n                    body = fileBody;\n                    body.append('cacheControl', options.cacheControl);\n                }\n                else {\n                    body = fileBody;\n                    headers['cache-control'] = `max-age=${options.cacheControl}`;\n                    headers['content-type'] = options.contentType;\n                }\n                const cleanPath = this._removeEmptyFolders(path);\n                const _path = this._getFinalPath(cleanPath);\n                const res = yield this.fetch(`${this.url}/object/${_path}`, {\n                    method,\n                    body: body,\n                    headers,\n                });\n                if (res.ok) {\n                    return {\n                        data: { path: cleanPath },\n                        error: null,\n                    };\n                }\n                else {\n                    const error = yield res.json();\n                    return { data: null, error };\n                }\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Uploads a file to an existing bucket.\n     *\n     * @param path The file path, including the file name. Should be of the format `folder/subfolder/filename.png`. The bucket must already exist before attempting to upload.\n     * @param fileBody The body of the file to be stored in the bucket.\n     */\n    upload(path, fileBody, fileOptions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.uploadOrUpdate('POST', path, fileBody, fileOptions);\n        });\n    }\n    /**\n     * Replaces an existing file at the specified path with a new one.\n     *\n     * @param path The relative file path. Should be of the format `folder/subfolder/filename.png`. The bucket must already exist before attempting to update.\n     * @param fileBody The body of the file to be stored in the bucket.\n     */\n    update(path, fileBody, fileOptions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.uploadOrUpdate('PUT', path, fileBody, fileOptions);\n        });\n    }\n    /**\n     * Moves an existing file to a new path in the same bucket.\n     *\n     * @param fromPath The original file path, including the current file name. For example `folder/image.png`.\n     * @param toPath The new file path, including the new file name. For example `folder/image-new.png`.\n     */\n    move(fromPath, toPath) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield post(this.fetch, `${this.url}/object/move`, { bucketId: this.bucketId, sourceKey: fromPath, destinationKey: toPath }, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Copies an existing file to a new path in the same bucket.\n     *\n     * @param fromPath The original file path, including the current file name. For example `folder/image.png`.\n     * @param toPath The new file path, including the new file name. For example `folder/image-copy.png`.\n     */\n    copy(fromPath, toPath) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield post(this.fetch, `${this.url}/object/copy`, { bucketId: this.bucketId, sourceKey: fromPath, destinationKey: toPath }, { headers: this.headers });\n                return { data: { path: data.Key }, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Creates a signed URL. Use a signed URL to share a file for a fixed amount of time.\n     *\n     * @param path The file path, including the current file name. For example `folder/image.png`.\n     * @param expiresIn The number of seconds until the signed URL expires. For example, `60` for a URL which is valid for one minute.\n     * @param options.download triggers the file as a download if set to true. Set this parameter as the name of the file if you want to trigger the download with a different filename.\n     */\n    createSignedUrl(path, expiresIn, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const _path = this._getFinalPath(path);\n                let data = yield post(this.fetch, `${this.url}/object/sign/${_path}`, { expiresIn }, { headers: this.headers });\n                const downloadQueryParam = (options === null || options === void 0 ? void 0 : options.download)\n                    ? `&download=${options.download === true ? '' : options.download}`\n                    : '';\n                const signedUrl = encodeURI(`${this.url}${data.signedURL}${downloadQueryParam}`);\n                data = { signedUrl };\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Creates multiple signed URLs. Use a signed URL to share a file for a fixed amount of time.\n     *\n     * @param paths The file paths to be downloaded, including the current file names. For example `['folder/image.png', 'folder2/image2.png']`.\n     * @param expiresIn The number of seconds until the signed URLs expire. For example, `60` for URLs which are valid for one minute.\n     * @param options.download triggers the file as a download if set to true. Set this parameter as the name of the file if you want to trigger the download with a different filename.\n     */\n    createSignedUrls(paths, expiresIn, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield post(this.fetch, `${this.url}/object/sign/${this.bucketId}`, { expiresIn, paths }, { headers: this.headers });\n                const downloadQueryParam = (options === null || options === void 0 ? void 0 : options.download)\n                    ? `&download=${options.download === true ? '' : options.download}`\n                    : '';\n                return {\n                    data: data.map((datum) => (Object.assign(Object.assign({}, datum), { signedUrl: datum.signedURL\n                            ? encodeURI(`${this.url}${datum.signedURL}${downloadQueryParam}`)\n                            : null }))),\n                    error: null,\n                };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Downloads a file.\n     *\n     * @param path The full path and file name of the file to be downloaded. For example `folder/image.png`.\n     */\n    download(path) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const _path = this._getFinalPath(path);\n                const res = yield get(this.fetch, `${this.url}/object/${_path}`, {\n                    headers: this.headers,\n                    noResolveJson: true,\n                });\n                const data = yield res.blob();\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Retrieves the URL for an asset in a public bucket.\n     * This function does not verify if the bucket is public. If a public URL is created for a bucket which is not public, you will not be able to download the asset.\n     *\n     * @param path The path and name of the file to generate the public URL for. For example `folder/image.png`.\n     * @param options.download triggers the file as a download if set to true. Set this parameter as the name of the file if you want to trigger the download with a different filename.\n     */\n    getPublicUrl(path, options) {\n        const _path = this._getFinalPath(path);\n        const downloadQueryParam = (options === null || options === void 0 ? void 0 : options.download)\n            ? `?download=${options.download === true ? '' : options.download}`\n            : '';\n        return {\n            data: { publicUrl: encodeURI(`${this.url}/object/public/${_path}${downloadQueryParam}`) },\n        };\n    }\n    /**\n     * Deletes files within the same bucket\n     *\n     * @param paths An array of files to delete, including the path and file name. For example [`'folder/image.png'`].\n     */\n    remove(paths) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield remove(this.fetch, `${this.url}/object/${this.bucketId}`, { prefixes: paths }, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Get file metadata\n     * @param id the file id to retrieve metadata\n     */\n    // async getMetadata(\n    //   id: string\n    // ): Promise<\n    //   | {\n    //       data: Metadata\n    //       error: null\n    //     }\n    //   | {\n    //       data: null\n    //       error: StorageError\n    //     }\n    // > {\n    //   try {\n    //     const data = await get(this.fetch, `${this.url}/metadata/${id}`, { headers: this.headers })\n    //     return { data, error: null }\n    //   } catch (error) {\n    //     if (isStorageError(error)) {\n    //       return { data: null, error }\n    //     }\n    //     throw error\n    //   }\n    // }\n    /**\n     * Update file metadata\n     * @param id the file id to update metadata\n     * @param meta the new file metadata\n     */\n    // async updateMetadata(\n    //   id: string,\n    //   meta: Metadata\n    // ): Promise<\n    //   | {\n    //       data: Metadata\n    //       error: null\n    //     }\n    //   | {\n    //       data: null\n    //       error: StorageError\n    //     }\n    // > {\n    //   try {\n    //     const data = await post(\n    //       this.fetch,\n    //       `${this.url}/metadata/${id}`,\n    //       { ...meta },\n    //       { headers: this.headers }\n    //     )\n    //     return { data, error: null }\n    //   } catch (error) {\n    //     if (isStorageError(error)) {\n    //       return { data: null, error }\n    //     }\n    //     throw error\n    //   }\n    // }\n    /**\n     * Lists all the files within a bucket.\n     * @param path The folder path.\n     */\n    list(path, options, parameters) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const body = Object.assign(Object.assign(Object.assign({}, DEFAULT_SEARCH_OPTIONS), options), { prefix: path || '' });\n                const data = yield post(this.fetch, `${this.url}/object/list/${this.bucketId}`, body, { headers: this.headers }, parameters);\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    _getFinalPath(path) {\n        return `${this.bucketId}/${path}`;\n    }\n    _removeEmptyFolders(path) {\n        return path.replace(/^\\/|\\/$/g, '').replace(/\\/+/g, '/');\n    }\n}\n//# sourceMappingURL=StorageFileApi.js.map","// generated by genversion\nexport const version = '2.0.0';\n//# sourceMappingURL=version.js.map","import { version } from './version';\nexport const DEFAULT_HEADERS = { 'X-Client-Info': `storage-js/${version}` };\n//# sourceMappingURL=constants.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { DEFAULT_HEADERS } from '../lib/constants';\nimport { isStorageError } from '../lib/errors';\nimport { get, post, put, remove } from '../lib/fetch';\nimport { resolveFetch } from '../lib/helpers';\nexport default class StorageBucketApi {\n    constructor(url, headers = {}, fetch) {\n        this.url = url;\n        this.headers = Object.assign(Object.assign({}, DEFAULT_HEADERS), headers);\n        this.fetch = resolveFetch(fetch);\n    }\n    /**\n     * Retrieves the details of all Storage buckets within an existing project.\n     */\n    listBuckets() {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield get(this.fetch, `${this.url}/bucket`, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Retrieves the details of an existing Storage bucket.\n     *\n     * @param id The unique identifier of the bucket you would like to retrieve.\n     */\n    getBucket(id) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield get(this.fetch, `${this.url}/bucket/${id}`, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Creates a new Storage bucket\n     *\n     * @param id A unique identifier for the bucket you are creating.\n     * @param options.public The visibility of the bucket. Public buckets don't require an authorization token to download objects, but still require a valid token for all other operations. By default, buckets are private.\n     * @returns newly created bucket id\n     */\n    createBucket(id, options = { public: false }) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield post(this.fetch, `${this.url}/bucket`, { id, name: id, public: options.public }, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Updates a Storage bucket\n     *\n     * @param id A unique identifier for the bucket you are updating.\n     * @param options.public The visibility of the bucket. Public buckets don't require an authorization token to download objects, but still require a valid token for all other operations.\n     */\n    updateBucket(id, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield put(this.fetch, `${this.url}/bucket/${id}`, { id, name: id, public: options.public }, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Removes all objects inside a single bucket.\n     *\n     * @param id The unique identifier of the bucket you would like to empty.\n     */\n    emptyBucket(id) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield post(this.fetch, `${this.url}/bucket/${id}/empty`, {}, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Deletes an existing bucket. A bucket can't be deleted with existing objects inside it.\n     * You must first `empty()` the bucket.\n     *\n     * @param id The unique identifier of the bucket you would like to delete.\n     */\n    deleteBucket(id) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield remove(this.fetch, `${this.url}/bucket/${id}`, {}, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n}\n//# sourceMappingURL=StorageBucketApi.js.map","import StorageFileApi from './packages/StorageFileApi';\nimport StorageBucketApi from './packages/StorageBucketApi';\nexport class StorageClient extends StorageBucketApi {\n    constructor(url, headers = {}, fetch) {\n        super(url, headers, fetch);\n    }\n    /**\n     * Perform file operation in a bucket.\n     *\n     * @param id The bucket id to operate on.\n     */\n    from(id) {\n        return new StorageFileApi(this.url, this.headers, id, this.fetch);\n    }\n}\n//# sourceMappingURL=StorageClient.js.map","export const version = '2.0.6';\n//# sourceMappingURL=version.js.map","// constants.ts\nimport { version } from './version';\nexport const DEFAULT_HEADERS = { 'X-Client-Info': `supabase-js/${version}` };\n//# sourceMappingURL=constants.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport crossFetch, { Headers as CrossFetchHeaders } from 'cross-fetch';\nexport const resolveFetch = (customFetch) => {\n    let _fetch;\n    if (customFetch) {\n        _fetch = customFetch;\n    }\n    else if (typeof fetch === 'undefined') {\n        _fetch = crossFetch;\n    }\n    else {\n        _fetch = fetch;\n    }\n    return (...args) => _fetch(...args);\n};\nexport const resolveHeadersConstructor = () => {\n    if (typeof Headers === 'undefined') {\n        return CrossFetchHeaders;\n    }\n    return Headers;\n};\nexport const fetchWithAuth = (supabaseKey, getAccessToken, customFetch) => {\n    const fetch = resolveFetch(customFetch);\n    const HeadersConstructor = resolveHeadersConstructor();\n    return (input, init) => __awaiter(void 0, void 0, void 0, function* () {\n        var _a;\n        const accessToken = (_a = (yield getAccessToken())) !== null && _a !== void 0 ? _a : supabaseKey;\n        let headers = new HeadersConstructor(init === null || init === void 0 ? void 0 : init.headers);\n        if (!headers.has('apikey')) {\n            headers.set('apikey', supabaseKey);\n        }\n        if (!headers.has('Authorization')) {\n            headers.set('Authorization', `Bearer ${accessToken}`);\n        }\n        return fetch(input, Object.assign(Object.assign({}, init), { headers }));\n    });\n};\n//# sourceMappingURL=fetch.js.map","export function uuid() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n        var r = (Math.random() * 16) | 0, v = c == 'x' ? r : (r & 0x3) | 0x8;\n        return v.toString(16);\n    });\n}\nexport function stripTrailingSlash(url) {\n    return url.replace(/\\/$/, '');\n}\nexport const isBrowser = () => typeof window !== 'undefined';\nexport function applySettingDefaults(options, defaults) {\n    const { db: dbOptions, auth: authOptions, realtime: realtimeOptions, global: globalOptions, } = options;\n    const { db: DEFAULT_DB_OPTIONS, auth: DEFAULT_AUTH_OPTIONS, realtime: DEFAULT_REALTIME_OPTIONS, global: DEFAULT_GLOBAL_OPTIONS, } = defaults;\n    return {\n        db: Object.assign(Object.assign({}, DEFAULT_DB_OPTIONS), dbOptions),\n        auth: Object.assign(Object.assign({}, DEFAULT_AUTH_OPTIONS), authOptions),\n        realtime: Object.assign(Object.assign({}, DEFAULT_REALTIME_OPTIONS), realtimeOptions),\n        global: Object.assign(Object.assign({}, DEFAULT_GLOBAL_OPTIONS), globalOptions),\n    };\n}\n//# sourceMappingURL=helpers.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nexport function expiresAt(expiresIn) {\n    const timeNow = Math.round(Date.now() / 1000);\n    return timeNow + expiresIn;\n}\nexport function uuid() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n        const r = (Math.random() * 16) | 0, v = c == 'x' ? r : (r & 0x3) | 0x8;\n        return v.toString(16);\n    });\n}\nexport const isBrowser = () => typeof window !== 'undefined';\nexport function getParameterByName(name, url) {\n    var _a;\n    if (!url)\n        url = ((_a = window === null || window === void 0 ? void 0 : window.location) === null || _a === void 0 ? void 0 : _a.href) || '';\n    // eslint-disable-next-line no-useless-escape\n    name = name.replace(/[\\[\\]]/g, '\\\\$&');\n    const regex = new RegExp('[?&#]' + name + '(=([^&#]*)|&|#|$)'), results = regex.exec(url);\n    if (!results)\n        return null;\n    if (!results[2])\n        return '';\n    return decodeURIComponent(results[2].replace(/\\+/g, ' '));\n}\nexport const resolveFetch = (customFetch) => {\n    let _fetch;\n    if (customFetch) {\n        _fetch = customFetch;\n    }\n    else if (typeof fetch === 'undefined') {\n        _fetch = (...args) => __awaiter(void 0, void 0, void 0, function* () { return yield (yield import('cross-fetch')).fetch(...args); });\n    }\n    else {\n        _fetch = fetch;\n    }\n    return (...args) => _fetch(...args);\n};\nexport const looksLikeFetchResponse = (maybeResponse) => {\n    return (typeof maybeResponse === 'object' &&\n        maybeResponse !== null &&\n        'status' in maybeResponse &&\n        'ok' in maybeResponse &&\n        'json' in maybeResponse &&\n        typeof maybeResponse.json === 'function');\n};\n// Storage helpers\nexport const setItemAsync = (storage, key, data) => __awaiter(void 0, void 0, void 0, function* () {\n    yield storage.setItem(key, JSON.stringify(data));\n});\nexport const getItemAsync = (storage, key) => __awaiter(void 0, void 0, void 0, function* () {\n    const value = yield storage.getItem(key);\n    if (!value) {\n        return null;\n    }\n    try {\n        return JSON.parse(value);\n    }\n    catch (_a) {\n        return value;\n    }\n});\nexport const removeItemAsync = (storage, key) => __awaiter(void 0, void 0, void 0, function* () {\n    yield storage.removeItem(key);\n});\nexport const decodeBase64URL = (value) => {\n    try {\n        // atob is present in all browsers and nodejs >= 16\n        // but if it is not it will throw a ReferenceError in which case we can try to use Buffer\n        // replace are here to convert the Base64-URL into Base64 which is what atob supports\n        // replace with //g regex acts like replaceAll\n        // Decoding base64 to UTF8 see https://stackoverflow.com/a/30106551/17622044\n        return decodeURIComponent(atob(value.replace(/[-]/g, '+').replace(/[_]/g, '/'))\n            .split('')\n            .map((c) => '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2))\n            .join(''));\n    }\n    catch (e) {\n        if (e instanceof ReferenceError) {\n            // running on nodejs < 16\n            // Buffer supports Base64-URL transparently\n            return Buffer.from(value, 'base64').toString('utf-8');\n        }\n        else {\n            throw e;\n        }\n    }\n};\n/**\n * A deferred represents some asynchronous work that is not yet finished, which\n * may or may not culminate in a value.\n * Taken from: https://github.com/mike-north/types/blob/master/src/async.ts\n */\nexport class Deferred {\n    constructor() {\n        // eslint-disable-next-line @typescript-eslint/no-extra-semi\n        ;\n        this.promise = new Deferred.promiseConstructor((res, rej) => {\n            // eslint-disable-next-line @typescript-eslint/no-extra-semi\n            ;\n            this.resolve = res;\n            this.reject = rej;\n        });\n    }\n}\nDeferred.promiseConstructor = Promise;\n// Taken from: https://stackoverflow.com/questions/38552003/how-to-decode-jwt-token-in-javascript-without-using-a-library\nexport function decodeJWTPayload(token) {\n    const parts = token.split('.');\n    if (parts.length !== 3) {\n        throw new Error('JWT is not valid: not a JWT structure');\n    }\n    const base64Url = parts[1];\n    return JSON.parse(decodeBase64URL(base64Url));\n}\n//# sourceMappingURL=helpers.js.map","export class AuthError extends Error {\n    constructor(message) {\n        super(message);\n        this.__isAuthError = true;\n        this.name = 'AuthError';\n    }\n}\nexport function isAuthError(error) {\n    return typeof error === 'object' && error !== null && '__isAuthError' in error;\n}\nexport class AuthApiError extends AuthError {\n    constructor(message, status) {\n        super(message);\n        this.name = 'AuthApiError';\n        this.status = status;\n    }\n    toJSON() {\n        return {\n            name: this.name,\n            message: this.message,\n            status: this.status,\n        };\n    }\n}\nexport class AuthUnknownError extends AuthError {\n    constructor(message, originalError) {\n        super(message);\n        this.name = 'AuthUnknownError';\n        this.originalError = originalError;\n    }\n}\nexport class CustomAuthError extends AuthError {\n    constructor(message, name, status) {\n        super(message);\n        this.name = name;\n        this.status = status;\n    }\n    toJSON() {\n        return {\n            name: this.name,\n            message: this.message,\n            status: this.status,\n        };\n    }\n}\nexport class AuthSessionMissingError extends CustomAuthError {\n    constructor() {\n        super('Auth session missing!', 'AuthSessionMissingError', 400);\n    }\n}\nexport class AuthInvalidCredentialsError extends CustomAuthError {\n    constructor(message) {\n        super(message, 'AuthInvalidCredentialsError', 400);\n    }\n}\nexport class AuthImplicitGrantRedirectError extends CustomAuthError {\n    constructor(message, details = null) {\n        super(message, 'AuthImplicitGrantRedirectError', 500);\n        this.details = null;\n        this.details = details;\n    }\n    toJSON() {\n        return {\n            name: this.name,\n            message: this.message,\n            status: this.status,\n            details: this.details,\n        };\n    }\n}\nexport class AuthRetryableFetchError extends CustomAuthError {\n    constructor(message, status) {\n        super(message, 'AuthRetryableFetchError', status);\n    }\n}\n//# sourceMappingURL=errors.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { expiresAt, looksLikeFetchResponse } from './helpers';\nimport { AuthApiError, AuthRetryableFetchError, AuthUnknownError } from './errors';\nconst _getErrorMessage = (err) => err.msg || err.message || err.error_description || err.error || JSON.stringify(err);\nconst handleError = (error, reject) => __awaiter(void 0, void 0, void 0, function* () {\n    const NETWORK_ERROR_CODES = [502, 503, 504];\n    if (!looksLikeFetchResponse(error)) {\n        reject(new AuthRetryableFetchError(_getErrorMessage(error), 0));\n    }\n    else if (NETWORK_ERROR_CODES.includes(error.status)) {\n        // status in 500...599 range - server had an error, request might be retryed.\n        reject(new AuthRetryableFetchError(_getErrorMessage(error), error.status));\n    }\n    else {\n        // got a response from server that is not in the 500...599 range - should not retry\n        error\n            .json()\n            .then((err) => {\n            reject(new AuthApiError(_getErrorMessage(err), error.status || 500));\n        })\n            .catch((e) => {\n            // not a valid json response\n            reject(new AuthUnknownError(_getErrorMessage(e), e));\n        });\n    }\n});\nconst _getRequestParams = (method, options, parameters, body) => {\n    const params = { method, headers: (options === null || options === void 0 ? void 0 : options.headers) || {} };\n    if (method === 'GET') {\n        return params;\n    }\n    params.headers = Object.assign({ 'Content-Type': 'application/json;charset=UTF-8' }, options === null || options === void 0 ? void 0 : options.headers);\n    params.body = JSON.stringify(body);\n    return Object.assign(Object.assign({}, params), parameters);\n};\nexport function _request(fetcher, method, url, options) {\n    var _a, _b;\n    return __awaiter(this, void 0, void 0, function* () {\n        const headers = (_a = options === null || options === void 0 ? void 0 : options.headers) !== null && _a !== void 0 ? _a : {};\n        if (options === null || options === void 0 ? void 0 : options.jwt) {\n            headers['Authorization'] = `Bearer ${options.jwt}`;\n        }\n        const qs = (_b = options === null || options === void 0 ? void 0 : options.query) !== null && _b !== void 0 ? _b : {};\n        if (options === null || options === void 0 ? void 0 : options.redirectTo) {\n            qs['redirect_to'] = options.redirectTo;\n        }\n        const queryString = Object.keys(qs).length ? '?' + new URLSearchParams(qs).toString() : '';\n        const data = yield _handleRequest(fetcher, method, url + queryString, { headers, noResolveJson: options === null || options === void 0 ? void 0 : options.noResolveJson }, {}, options === null || options === void 0 ? void 0 : options.body);\n        return (options === null || options === void 0 ? void 0 : options.xform) ? options === null || options === void 0 ? void 0 : options.xform(data) : { data: Object.assign({}, data), error: null };\n    });\n}\nfunction _handleRequest(fetcher, method, url, options, parameters, body) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return new Promise((resolve, reject) => {\n            fetcher(url, _getRequestParams(method, options, parameters, body))\n                .then((result) => {\n                if (!result.ok)\n                    throw result;\n                if (options === null || options === void 0 ? void 0 : options.noResolveJson)\n                    return result;\n                return result.json();\n            })\n                .then((data) => resolve(data))\n                .catch((error) => handleError(error, reject));\n        });\n    });\n}\nexport function _sessionResponse(data) {\n    var _a;\n    let session = null;\n    if (hasSession(data)) {\n        session = Object.assign({}, data);\n        session.expires_at = expiresAt(data.expires_in);\n    }\n    const user = (_a = data.user) !== null && _a !== void 0 ? _a : data;\n    return { data: { session, user }, error: null };\n}\nexport function _userResponse(data) {\n    var _a;\n    const user = (_a = data.user) !== null && _a !== void 0 ? _a : data;\n    return { data: { user }, error: null };\n}\nexport function _ssoResponse(data) {\n    return { data, error: null };\n}\nexport function _generateLinkResponse(data) {\n    const { action_link, email_otp, hashed_token, redirect_to, verification_type } = data, rest = __rest(data, [\"action_link\", \"email_otp\", \"hashed_token\", \"redirect_to\", \"verification_type\"]);\n    const properties = {\n        action_link,\n        email_otp,\n        hashed_token,\n        redirect_to,\n        verification_type,\n    };\n    const user = Object.assign({}, rest);\n    return {\n        data: {\n            properties,\n            user,\n        },\n        error: null,\n    };\n}\n/**\n * hasSession checks if the response object contains a valid session\n * @param data A response object\n * @returns true if a session is in the response\n */\nfunction hasSession(data) {\n    return data.access_token && data.refresh_token && data.expires_in;\n}\n//# sourceMappingURL=fetch.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { _generateLinkResponse, _request, _userResponse } from './lib/fetch';\nimport { resolveFetch } from './lib/helpers';\nimport { isAuthError } from './lib/errors';\nexport default class GoTrueAdminApi {\n    constructor({ url = '', headers = {}, fetch, }) {\n        this.url = url;\n        this.headers = headers;\n        this.fetch = resolveFetch(fetch);\n        this.mfa = {\n            listFactors: this._listFactors.bind(this),\n            deleteFactor: this._deleteFactor.bind(this),\n        };\n    }\n    /**\n     * Removes a logged-in session.\n     * @param jwt A valid, logged-in JWT.\n     */\n    signOut(jwt) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield _request(this.fetch, 'POST', `${this.url}/logout`, {\n                    headers: this.headers,\n                    jwt,\n                    noResolveJson: true,\n                });\n                return { data: null, error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Sends an invite link to an email address.\n     * @param email The email address of the user.\n     * @param options.redirectTo A URL or mobile deeplink to send the user to after they are confirmed.\n     * @param options.data Optional user metadata\n     */\n    inviteUserByEmail(email, options = {}) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                return yield _request(this.fetch, 'POST', `${this.url}/invite`, {\n                    body: { email, data: options.data },\n                    headers: this.headers,\n                    redirectTo: options.redirectTo,\n                    xform: _userResponse,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Generates email links and OTPs to be sent via a custom email provider.\n     * @param email The user's email.\n     * @param options.password User password. For signup only.\n     * @param options.data Optional user metadata. For signup only.\n     * @param options.redirectTo The redirect url which should be appended to the generated link\n     */\n    generateLink(params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const { options } = params, rest = __rest(params, [\"options\"]);\n                const body = Object.assign(Object.assign({}, rest), options);\n                if ('newEmail' in rest) {\n                    // replace newEmail with new_email in request body\n                    body.new_email = rest === null || rest === void 0 ? void 0 : rest.newEmail;\n                    delete body['newEmail'];\n                }\n                return yield _request(this.fetch, 'POST', `${this.url}/admin/generate_link`, {\n                    body: body,\n                    headers: this.headers,\n                    xform: _generateLinkResponse,\n                    redirectTo: options === null || options === void 0 ? void 0 : options.redirectTo,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return {\n                        data: {\n                            properties: null,\n                            user: null,\n                        },\n                        error,\n                    };\n                }\n                throw error;\n            }\n        });\n    }\n    // User Admin API\n    /**\n     * Creates a new user.\n     * This function should only be called on a server. Never expose your `service_role` key in the browser.\n     */\n    createUser(attributes) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                return yield _request(this.fetch, 'POST', `${this.url}/admin/users`, {\n                    body: attributes,\n                    headers: this.headers,\n                    xform: _userResponse,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Get a list of users.\n     *\n     * This function should only be called on a server. Never expose your `service_role` key in the browser.\n     */\n    listUsers() {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const { data, error } = yield _request(this.fetch, 'GET', `${this.url}/admin/users`, {\n                    headers: this.headers,\n                });\n                if (error)\n                    throw error;\n                return { data: Object.assign({}, data), error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { users: [] }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Get user by id.\n     *\n     * @param uid The user's unique identifier\n     *\n     * This function should only be called on a server. Never expose your `service_role` key in the browser.\n     */\n    getUserById(uid) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                return yield _request(this.fetch, 'GET', `${this.url}/admin/users/${uid}`, {\n                    headers: this.headers,\n                    xform: _userResponse,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Updates the user data.\n     *\n     * @param attributes The data you want to update.\n     *\n     * This function should only be called on a server. Never expose your `service_role` key in the browser.\n     */\n    updateUserById(uid, attributes) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                return yield _request(this.fetch, 'PUT', `${this.url}/admin/users/${uid}`, {\n                    body: attributes,\n                    headers: this.headers,\n                    xform: _userResponse,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Delete a user. Requires a `service_role` key.\n     *\n     * @param id The user id you want to remove.\n     *\n     * This function should only be called on a server. Never expose your `service_role` key in the browser.\n     */\n    deleteUser(id) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                return yield _request(this.fetch, 'DELETE', `${this.url}/admin/users/${id}`, {\n                    headers: this.headers,\n                    xform: _userResponse,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    _listFactors(params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield _request(this.fetch, 'GET', `${this.url}/admin/users/${params.userId}/factors`, {\n                    headers: this.headers,\n                });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    _deleteFactor(params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield _request(this.fetch, 'DELETE', `${this.url}/admin/users/${params.userId}/factors/${params.id}`, {\n                    headers: this.headers,\n                });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n}\n//# sourceMappingURL=GoTrueAdminApi.js.map","// Generated by genversion.\nexport const version = '2.3.0';\n//# sourceMappingURL=version.js.map","import { version } from './version';\nexport const GOTRUE_URL = 'http://localhost:9999';\nexport const STORAGE_KEY = 'supabase.auth.token';\nexport const AUDIENCE = '';\nexport const DEFAULT_HEADERS = { 'X-Client-Info': `gotrue-js/${version}` };\nexport const EXPIRY_MARGIN = 10; // in seconds\nexport const NETWORK_FAILURE = {\n    MAX_RETRIES: 10,\n    RETRY_INTERVAL: 2, // in deciseconds\n};\n//# sourceMappingURL=constants.js.map","import { isBrowser } from './helpers';\nconst localStorageAdapter = {\n    getItem: (key) => {\n        if (!isBrowser()) {\n            return null;\n        }\n        return globalThis.localStorage.getItem(key);\n    },\n    setItem: (key, value) => {\n        if (!isBrowser()) {\n            return;\n        }\n        globalThis.localStorage.setItem(key, value);\n    },\n    removeItem: (key) => {\n        if (!isBrowser()) {\n            return;\n        }\n        globalThis.localStorage.removeItem(key);\n    },\n};\nexport default localStorageAdapter;\n//# sourceMappingURL=local-storage.js.map","/**\n * https://mathiasbynens.be/notes/globalthis\n */\nexport function polyfillGlobalThis() {\n    if (typeof globalThis === 'object')\n        return;\n    try {\n        Object.defineProperty(Object.prototype, '__magic__', {\n            get: function () {\n                return this;\n            },\n            configurable: true,\n        });\n        // @ts-expect-error 'Allow access to magic'\n        __magic__.globalThis = __magic__;\n        // @ts-expect-error 'Allow access to magic'\n        delete Object.prototype.__magic__;\n    }\n    catch (e) {\n        if (typeof self !== 'undefined') {\n            // @ts-expect-error 'Allow access to globals'\n            self.globalThis = self;\n        }\n    }\n}\n//# sourceMappingURL=polyfills.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport GoTrueAdminApi from './GoTrueAdminApi';\nimport { DEFAULT_HEADERS, EXPIRY_MARGIN, GOTRUE_URL, NETWORK_FAILURE, STORAGE_KEY, } from './lib/constants';\nimport { AuthImplicitGrantRedirectError, AuthInvalidCredentialsError, AuthRetryableFetchError, AuthSessionMissingError, AuthUnknownError, isAuthError, } from './lib/errors';\nimport { _request, _sessionResponse, _userResponse, _ssoResponse } from './lib/fetch';\nimport { Deferred, getItemAsync, getParameterByName, isBrowser, removeItemAsync, resolveFetch, setItemAsync, uuid, decodeJWTPayload, } from './lib/helpers';\nimport localStorageAdapter from './lib/local-storage';\nimport { polyfillGlobalThis } from './lib/polyfills';\npolyfillGlobalThis(); // Make \"globalThis\" available\nconst DEFAULT_OPTIONS = {\n    url: GOTRUE_URL,\n    storageKey: STORAGE_KEY,\n    autoRefreshToken: true,\n    persistSession: true,\n    detectSessionInUrl: true,\n    headers: DEFAULT_HEADERS,\n};\nexport default class GoTrueClient {\n    /**\n     * Create a new client for use in the browser.\n     */\n    constructor(options) {\n        this.stateChangeEmitters = new Map();\n        this.networkRetries = 0;\n        this.refreshingDeferred = null;\n        /**\n         * Keeps track of the async client initialization.\n         * When null or not yet resolved the auth state is `unknown`\n         * Once resolved the the auth state is known and it's save to call any further client methods.\n         * Keep extra care to never reject or throw uncaught errors\n         */\n        this.initializePromise = null;\n        this.detectSessionInUrl = true;\n        const settings = Object.assign(Object.assign({}, DEFAULT_OPTIONS), options);\n        this.inMemorySession = null;\n        this.storageKey = settings.storageKey;\n        this.autoRefreshToken = settings.autoRefreshToken;\n        this.persistSession = settings.persistSession;\n        this.storage = settings.storage || localStorageAdapter;\n        this.admin = new GoTrueAdminApi({\n            url: settings.url,\n            headers: settings.headers,\n            fetch: settings.fetch,\n        });\n        this.url = settings.url;\n        this.headers = settings.headers;\n        this.fetch = resolveFetch(settings.fetch);\n        this.detectSessionInUrl = settings.detectSessionInUrl;\n        this.initialize();\n        this.mfa = {\n            verify: this._verify.bind(this),\n            enroll: this._enroll.bind(this),\n            unenroll: this._unenroll.bind(this),\n            challenge: this._challenge.bind(this),\n            listFactors: this._listFactors.bind(this),\n            challengeAndVerify: this._challengeAndVerify.bind(this),\n            getAuthenticatorAssuranceLevel: this._getAuthenticatorAssuranceLevel.bind(this),\n        };\n    }\n    /**\n     * Initializes the client session either from the url or from storage.\n     * This method is automatically called when instantiating the client, but should also be called\n     * manually when checking for an error from an auth redirect (oauth, magiclink, password recovery, etc).\n     */\n    initialize() {\n        if (!this.initializePromise) {\n            this.initializePromise = this._initialize();\n        }\n        return this.initializePromise;\n    }\n    /**\n     * IMPORTANT:\n     * 1. Never throw in this method, as it is called from the constructor\n     * 2. Never return a session from this method as it would be cached over\n     *    the whole lifetime of the client\n     */\n    _initialize() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.initializePromise) {\n                return this.initializePromise;\n            }\n            try {\n                if (this.detectSessionInUrl && this._isImplicitGrantFlow()) {\n                    const { data, error } = yield this._getSessionFromUrl();\n                    if (error) {\n                        // failed login attempt via url,\n                        // remove old session as in verifyOtp, signUp and signInWith*\n                        yield this._removeSession();\n                        return { error };\n                    }\n                    const { session, redirectType } = data;\n                    yield this._saveSession(session);\n                    this._notifyAllSubscribers('SIGNED_IN', session);\n                    if (redirectType === 'recovery') {\n                        this._notifyAllSubscribers('PASSWORD_RECOVERY', session);\n                    }\n                    return { error: null };\n                }\n                // no login attempt via callback url try to recover session from storage\n                yield this._recoverAndRefresh();\n                return { error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { error };\n                }\n                return {\n                    error: new AuthUnknownError('Unexpected error during initialization', error),\n                };\n            }\n            finally {\n                this._handleVisibilityChange();\n            }\n        });\n    }\n    /**\n     * Creates a new user.\n     * @returns A logged-in session if the server has \"autoconfirm\" ON\n     * @returns A user if the server has \"autoconfirm\" OFF\n     */\n    signUp(credentials) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield this._removeSession();\n                let res;\n                if ('email' in credentials) {\n                    const { email, password, options } = credentials;\n                    res = yield _request(this.fetch, 'POST', `${this.url}/signup`, {\n                        headers: this.headers,\n                        redirectTo: options === null || options === void 0 ? void 0 : options.emailRedirectTo,\n                        body: {\n                            email,\n                            password,\n                            data: (_a = options === null || options === void 0 ? void 0 : options.data) !== null && _a !== void 0 ? _a : {},\n                            gotrue_meta_security: { captcha_token: options === null || options === void 0 ? void 0 : options.captchaToken },\n                        },\n                        xform: _sessionResponse,\n                    });\n                }\n                else if ('phone' in credentials) {\n                    const { phone, password, options } = credentials;\n                    res = yield _request(this.fetch, 'POST', `${this.url}/signup`, {\n                        headers: this.headers,\n                        body: {\n                            phone,\n                            password,\n                            data: (_b = options === null || options === void 0 ? void 0 : options.data) !== null && _b !== void 0 ? _b : {},\n                            gotrue_meta_security: { captcha_token: options === null || options === void 0 ? void 0 : options.captchaToken },\n                        },\n                        xform: _sessionResponse,\n                    });\n                }\n                else {\n                    throw new AuthInvalidCredentialsError('You must provide either an email or phone number and a password');\n                }\n                const { data, error } = res;\n                if (error || !data) {\n                    return { data: { user: null, session: null }, error: error };\n                }\n                const session = data.session;\n                const user = data.user;\n                if (data.session) {\n                    yield this._saveSession(data.session);\n                    this._notifyAllSubscribers('SIGNED_IN', session);\n                }\n                return { data: { user, session }, error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null, session: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Log in an existing user with an email and password or phone and password.\n     */\n    signInWithPassword(credentials) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield this._removeSession();\n                let res;\n                if ('email' in credentials) {\n                    const { email, password, options } = credentials;\n                    res = yield _request(this.fetch, 'POST', `${this.url}/token?grant_type=password`, {\n                        headers: this.headers,\n                        body: {\n                            email,\n                            password,\n                            data: (_a = options === null || options === void 0 ? void 0 : options.data) !== null && _a !== void 0 ? _a : {},\n                            gotrue_meta_security: { captcha_token: options === null || options === void 0 ? void 0 : options.captchaToken },\n                        },\n                        xform: _sessionResponse,\n                    });\n                }\n                else if ('phone' in credentials) {\n                    const { phone, password, options } = credentials;\n                    res = yield _request(this.fetch, 'POST', `${this.url}/token?grant_type=password`, {\n                        headers: this.headers,\n                        body: {\n                            phone,\n                            password,\n                            data: (_b = options === null || options === void 0 ? void 0 : options.data) !== null && _b !== void 0 ? _b : {},\n                            gotrue_meta_security: { captcha_token: options === null || options === void 0 ? void 0 : options.captchaToken },\n                        },\n                        xform: _sessionResponse,\n                    });\n                }\n                else {\n                    throw new AuthInvalidCredentialsError('You must provide either an email or phone number and a password');\n                }\n                const { data, error } = res;\n                if (error || !data)\n                    return { data: { user: null, session: null }, error };\n                if (data.session) {\n                    yield this._saveSession(data.session);\n                    this._notifyAllSubscribers('SIGNED_IN', data.session);\n                }\n                return { data, error };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null, session: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Log in an existing user via a third-party provider.\n     */\n    signInWithOAuth(credentials) {\n        var _a, _b, _c;\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this._removeSession();\n            return this._handleProviderSignIn(credentials.provider, {\n                redirectTo: (_a = credentials.options) === null || _a === void 0 ? void 0 : _a.redirectTo,\n                scopes: (_b = credentials.options) === null || _b === void 0 ? void 0 : _b.scopes,\n                queryParams: (_c = credentials.options) === null || _c === void 0 ? void 0 : _c.queryParams,\n            });\n        });\n    }\n    /**\n     * Log in a user using magiclink or a one-time password (OTP).\n     * If the `{{ .ConfirmationURL }}` variable is specified in the email template, a magiclink will be sent.\n     * If the `{{ .Token }}` variable is specified in the email template, an OTP will be sent.\n     * If you're using phone sign-ins, only an OTP will be sent. You won't be able to send a magiclink for phone sign-ins.\n     */\n    signInWithOtp(credentials) {\n        var _a, _b, _c, _d;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield this._removeSession();\n                if ('email' in credentials) {\n                    const { email, options } = credentials;\n                    const { error } = yield _request(this.fetch, 'POST', `${this.url}/otp`, {\n                        headers: this.headers,\n                        body: {\n                            email,\n                            data: (_a = options === null || options === void 0 ? void 0 : options.data) !== null && _a !== void 0 ? _a : {},\n                            create_user: (_b = options === null || options === void 0 ? void 0 : options.shouldCreateUser) !== null && _b !== void 0 ? _b : true,\n                            gotrue_meta_security: { captcha_token: options === null || options === void 0 ? void 0 : options.captchaToken },\n                        },\n                        redirectTo: options === null || options === void 0 ? void 0 : options.emailRedirectTo,\n                    });\n                    return { data: { user: null, session: null }, error };\n                }\n                if ('phone' in credentials) {\n                    const { phone, options } = credentials;\n                    const { error } = yield _request(this.fetch, 'POST', `${this.url}/otp`, {\n                        headers: this.headers,\n                        body: {\n                            phone,\n                            data: (_c = options === null || options === void 0 ? void 0 : options.data) !== null && _c !== void 0 ? _c : {},\n                            create_user: (_d = options === null || options === void 0 ? void 0 : options.shouldCreateUser) !== null && _d !== void 0 ? _d : true,\n                            gotrue_meta_security: { captcha_token: options === null || options === void 0 ? void 0 : options.captchaToken },\n                        },\n                    });\n                    return { data: { user: null, session: null }, error };\n                }\n                throw new AuthInvalidCredentialsError('You must provide either an email or phone number.');\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null, session: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Log in a user given a User supplied OTP received via mobile.\n     */\n    verifyOtp(params) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield this._removeSession();\n                const { data, error } = yield _request(this.fetch, 'POST', `${this.url}/verify`, {\n                    headers: this.headers,\n                    body: Object.assign(Object.assign({}, params), { gotrue_meta_security: { captcha_token: (_a = params.options) === null || _a === void 0 ? void 0 : _a.captchaToken } }),\n                    redirectTo: (_b = params.options) === null || _b === void 0 ? void 0 : _b.redirectTo,\n                    xform: _sessionResponse,\n                });\n                if (error) {\n                    throw error;\n                }\n                if (!data) {\n                    throw 'An error occurred on token verification.';\n                }\n                const session = data.session;\n                const user = data.user;\n                if (session === null || session === void 0 ? void 0 : session.access_token) {\n                    yield this._saveSession(session);\n                    this._notifyAllSubscribers('SIGNED_IN', session);\n                }\n                return { data: { user, session }, error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null, session: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Attempts a single-sign on using an enterprise Identity Provider. A\n     * successful SSO attempt will redirect the current page to the identity\n     * provider authorization page. The redirect URL is implementation and SSO\n     * protocol specific.\n     *\n     * You can use it by providing a SSO domain. Typically you can extract this\n     * domain by asking users for their email address. If this domain is\n     * registered on the Auth instance the redirect will use that organization's\n     * currently active SSO Identity Provider for the login.\n     *\n     * If you have built an organization-specific login page, you can use the\n     * organization's SSO Identity Provider UUID directly instead.\n     *\n     * This API is experimental and availability is conditional on correct\n     * settings on the Auth service.\n     *\n     * @experimental\n     */\n    signInWithSSO(params) {\n        var _a, _b, _c;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield this._removeSession();\n                return yield _request(this.fetch, 'POST', `${this.url}/sso`, {\n                    body: Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({}, ('providerId' in params ? { provider_id: params.providerId } : null)), ('domain' in params ? { domain: params.domain } : null)), { redirect_to: (_b = (_a = params.options) === null || _a === void 0 ? void 0 : _a.redirectTo) !== null && _b !== void 0 ? _b : undefined }), (((_c = params === null || params === void 0 ? void 0 : params.options) === null || _c === void 0 ? void 0 : _c.captchaToken)\n                        ? { gotrue_meta_security: { captcha_token: params.options.captchaToken } }\n                        : null)), { skip_http_redirect: true }),\n                    headers: this.headers,\n                    xform: _ssoResponse,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Returns the session, refreshing it if necessary.\n     * The session returned can be null if the session is not detected which can happen in the event a user is not signed-in or has logged out.\n     */\n    getSession() {\n        return __awaiter(this, void 0, void 0, function* () {\n            // make sure we've read the session from the url if there is one\n            // save to just await, as long we make sure _initialize() never throws\n            yield this.initializePromise;\n            let currentSession = null;\n            if (this.persistSession) {\n                const maybeSession = yield getItemAsync(this.storage, this.storageKey);\n                if (maybeSession !== null) {\n                    if (this._isValidSession(maybeSession)) {\n                        currentSession = maybeSession;\n                    }\n                    else {\n                        yield this._removeSession();\n                    }\n                }\n            }\n            else {\n                currentSession = this.inMemorySession;\n            }\n            if (!currentSession) {\n                return { data: { session: null }, error: null };\n            }\n            const hasExpired = currentSession.expires_at\n                ? currentSession.expires_at <= Date.now() / 1000\n                : false;\n            if (!hasExpired) {\n                return { data: { session: currentSession }, error: null };\n            }\n            const { session, error } = yield this._callRefreshToken(currentSession.refresh_token);\n            if (error) {\n                return { data: { session: null }, error };\n            }\n            return { data: { session }, error: null };\n        });\n    }\n    /**\n     * Gets the current user details if there is an existing session.\n     * @param jwt Takes in an optional access token jwt. If no jwt is provided, getUser() will attempt to get the jwt from the current session.\n     */\n    getUser(jwt) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                if (!jwt) {\n                    const { data, error } = yield this.getSession();\n                    if (error) {\n                        throw error;\n                    }\n                    // Default to Authorization header if there is no existing session\n                    jwt = (_b = (_a = data.session) === null || _a === void 0 ? void 0 : _a.access_token) !== null && _b !== void 0 ? _b : undefined;\n                }\n                return yield _request(this.fetch, 'GET', `${this.url}/user`, {\n                    headers: this.headers,\n                    jwt: jwt,\n                    xform: _userResponse,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Updates user data, if there is a logged in user.\n     */\n    updateUser(attributes) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const { data: sessionData, error: sessionError } = yield this.getSession();\n                if (sessionError) {\n                    throw sessionError;\n                }\n                if (!sessionData.session) {\n                    throw new AuthSessionMissingError();\n                }\n                const session = sessionData.session;\n                const { data, error: userError } = yield _request(this.fetch, 'PUT', `${this.url}/user`, {\n                    headers: this.headers,\n                    body: attributes,\n                    jwt: session.access_token,\n                    xform: _userResponse,\n                });\n                if (userError)\n                    throw userError;\n                session.user = data.user;\n                yield this._saveSession(session);\n                this._notifyAllSubscribers('USER_UPDATED', session);\n                return { data: { user: session.user }, error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Decodes a JWT (without performing any validation).\n     */\n    _decodeJWT(jwt) {\n        return decodeJWTPayload(jwt);\n    }\n    /**\n     * Sets the session data from the current session. If the current session is expired, setSession will take care of refreshing it to obtain a new session.\n     * If the refresh token in the current session is invalid and the current session has expired, an error will be thrown.\n     * If the current session does not contain at expires_at field, setSession will use the exp claim defined in the access token.\n     * @param currentSession The current session that minimally contains an access token and refresh token.\n     */\n    setSession(currentSession) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const timeNow = Date.now() / 1000;\n                let expiresAt = timeNow;\n                let hasExpired = true;\n                let session = null;\n                if (currentSession.access_token && currentSession.access_token.split('.')[1]) {\n                    const payload = this._decodeJWT(currentSession.access_token);\n                    if (payload.exp) {\n                        expiresAt = payload.exp;\n                        hasExpired = expiresAt <= timeNow;\n                    }\n                }\n                if (hasExpired) {\n                    if (!currentSession.refresh_token) {\n                        throw new AuthSessionMissingError();\n                    }\n                    const { data, error } = yield this._refreshAccessToken(currentSession.refresh_token);\n                    if (error) {\n                        return { data: { session: null, user: null }, error: error };\n                    }\n                    if (!data.session) {\n                        return { data: { session: null, user: null }, error: null };\n                    }\n                    session = data.session;\n                }\n                else {\n                    const { data, error } = yield this.getUser(currentSession.access_token);\n                    if (error) {\n                        throw error;\n                    }\n                    session = {\n                        access_token: currentSession.access_token,\n                        refresh_token: currentSession.refresh_token,\n                        user: data.user,\n                        token_type: 'bearer',\n                        expires_in: expiresAt - timeNow,\n                        expires_at: expiresAt,\n                    };\n                }\n                yield this._saveSession(session);\n                this._notifyAllSubscribers('TOKEN_REFRESHED', session);\n                return { data: { session, user: session.user }, error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { session: null, user: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Returns a new session, regardless of expiry status.\n     * Takes in an optional current session. If not passed in, then refreshSession() will attempt to retrieve it from getSession().\n     * If the current session's refresh token is invalid, an error will be thrown.\n     * @param currentSession The current session. If passed in, it must contain a refresh token.\n     */\n    refreshSession(currentSession) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                if (!currentSession) {\n                    const { data, error } = yield this.getSession();\n                    if (error) {\n                        throw error;\n                    }\n                    currentSession = (_a = data.session) !== null && _a !== void 0 ? _a : undefined;\n                }\n                if (!(currentSession === null || currentSession === void 0 ? void 0 : currentSession.refresh_token)) {\n                    throw new AuthSessionMissingError();\n                }\n                const { session, error } = yield this._callRefreshToken(currentSession.refresh_token);\n                if (error) {\n                    return { data: { user: null, session: null }, error: error };\n                }\n                if (!session) {\n                    return { data: { user: null, session: null }, error: null };\n                }\n                return { data: { user: session.user, session }, error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null, session: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Gets the session data from a URL string\n     */\n    _getSessionFromUrl() {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                if (!isBrowser())\n                    throw new AuthImplicitGrantRedirectError('No browser detected.');\n                if (!this._isImplicitGrantFlow()) {\n                    throw new AuthImplicitGrantRedirectError('Not a valid implicit grant flow url.');\n                }\n                const error_description = getParameterByName('error_description');\n                if (error_description) {\n                    const error_code = getParameterByName('error_code');\n                    if (!error_code)\n                        throw new AuthImplicitGrantRedirectError('No error_code detected.');\n                    const error = getParameterByName('error');\n                    if (!error)\n                        throw new AuthImplicitGrantRedirectError('No error detected.');\n                    throw new AuthImplicitGrantRedirectError(error_description, { error, code: error_code });\n                }\n                const provider_token = getParameterByName('provider_token');\n                const provider_refresh_token = getParameterByName('provider_refresh_token');\n                const access_token = getParameterByName('access_token');\n                if (!access_token)\n                    throw new AuthImplicitGrantRedirectError('No access_token detected.');\n                const expires_in = getParameterByName('expires_in');\n                if (!expires_in)\n                    throw new AuthImplicitGrantRedirectError('No expires_in detected.');\n                const refresh_token = getParameterByName('refresh_token');\n                if (!refresh_token)\n                    throw new AuthImplicitGrantRedirectError('No refresh_token detected.');\n                const token_type = getParameterByName('token_type');\n                if (!token_type)\n                    throw new AuthImplicitGrantRedirectError('No token_type detected.');\n                const timeNow = Math.round(Date.now() / 1000);\n                const expires_at = timeNow + parseInt(expires_in);\n                const { data, error } = yield this.getUser(access_token);\n                if (error)\n                    throw error;\n                const user = data.user;\n                const session = {\n                    provider_token,\n                    provider_refresh_token,\n                    access_token,\n                    expires_in: parseInt(expires_in),\n                    expires_at,\n                    refresh_token,\n                    token_type,\n                    user,\n                };\n                const redirectType = getParameterByName('type');\n                // Remove tokens from URL\n                window.location.hash = '';\n                return { data: { session, redirectType }, error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { session: null, redirectType: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Checks if the current URL contains parameters given by an implicit oauth grant flow (https://www.rfc-editor.org/rfc/rfc6749.html#section-4.2)\n     */\n    _isImplicitGrantFlow() {\n        return (isBrowser() &&\n            (Boolean(getParameterByName('access_token')) ||\n                Boolean(getParameterByName('error_description'))));\n    }\n    /**\n     * Inside a browser context, `signOut()` will remove the logged in user from the browser session\n     * and log them out - removing all items from localstorage and then trigger a `\"SIGNED_OUT\"` event.\n     *\n     * For server-side management, you can revoke all refresh tokens for a user by passing a user's JWT through to `auth.api.signOut(JWT: string)`.\n     * There is no way to revoke a user's access token jwt until it expires. It is recommended to set a shorter expiry on the jwt for this reason.\n     */\n    signOut() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const { data, error: sessionError } = yield this.getSession();\n            if (sessionError) {\n                return { error: sessionError };\n            }\n            const accessToken = (_a = data.session) === null || _a === void 0 ? void 0 : _a.access_token;\n            if (accessToken) {\n                const { error } = yield this.admin.signOut(accessToken);\n                if (error)\n                    return { error };\n            }\n            yield this._removeSession();\n            this._notifyAllSubscribers('SIGNED_OUT', null);\n            return { error: null };\n        });\n    }\n    /**\n     * Receive a notification every time an auth event happens.\n     * @param callback A callback function to be invoked when an auth event happens.\n     */\n    onAuthStateChange(callback) {\n        const id = uuid();\n        const subscription = {\n            id,\n            callback,\n            unsubscribe: () => {\n                this.stateChangeEmitters.delete(id);\n            },\n        };\n        this.stateChangeEmitters.set(id, subscription);\n        return { data: { subscription } };\n    }\n    /**\n     * Sends a password reset request to an email address.\n     * @param email The email address of the user.\n     * @param options.redirectTo The URL to send the user to after they click the password reset link.\n     * @param options.captchaToken Verification token received when the user completes the captcha on the site.\n     */\n    resetPasswordForEmail(email, options = {}) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                return yield _request(this.fetch, 'POST', `${this.url}/recover`, {\n                    body: { email, gotrue_meta_security: { captcha_token: options.captchaToken } },\n                    headers: this.headers,\n                    redirectTo: options.redirectTo,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Generates a new JWT.\n     * @param refreshToken A valid refresh token that was returned on login.\n     */\n    _refreshAccessToken(refreshToken) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                return yield _request(this.fetch, 'POST', `${this.url}/token?grant_type=refresh_token`, {\n                    body: { refresh_token: refreshToken },\n                    headers: this.headers,\n                    xform: _sessionResponse,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { session: null, user: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    _isValidSession(maybeSession) {\n        const isValidSession = typeof maybeSession === 'object' &&\n            maybeSession !== null &&\n            'access_token' in maybeSession &&\n            'refresh_token' in maybeSession &&\n            'expires_at' in maybeSession;\n        return isValidSession;\n    }\n    _handleProviderSignIn(provider, options = {}) {\n        const url = this._getUrlForProvider(provider, {\n            redirectTo: options.redirectTo,\n            scopes: options.scopes,\n            queryParams: options.queryParams,\n        });\n        // try to open on the browser\n        if (isBrowser()) {\n            window.location.href = url;\n        }\n        return { data: { provider, url }, error: null };\n    }\n    /**\n     * Recovers the session from LocalStorage and refreshes\n     * Note: this method is async to accommodate for AsyncStorage e.g. in React native.\n     */\n    _recoverAndRefresh() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const currentSession = yield getItemAsync(this.storage, this.storageKey);\n                if (!this._isValidSession(currentSession)) {\n                    if (currentSession !== null) {\n                        yield this._removeSession();\n                    }\n                    return;\n                }\n                const timeNow = Math.round(Date.now() / 1000);\n                if (((_a = currentSession.expires_at) !== null && _a !== void 0 ? _a : Infinity) < timeNow + EXPIRY_MARGIN) {\n                    if (this.autoRefreshToken && currentSession.refresh_token) {\n                        this.networkRetries++;\n                        const { error } = yield this._callRefreshToken(currentSession.refresh_token);\n                        if (error) {\n                            console.log(error.message);\n                            if (error instanceof AuthRetryableFetchError &&\n                                this.networkRetries < NETWORK_FAILURE.MAX_RETRIES) {\n                                if (this.refreshTokenTimer)\n                                    clearTimeout(this.refreshTokenTimer);\n                                this.refreshTokenTimer = setTimeout(() => this._recoverAndRefresh(), Math.pow(NETWORK_FAILURE.RETRY_INTERVAL, this.networkRetries) * 100 // exponential backoff\n                                );\n                                return;\n                            }\n                            yield this._removeSession();\n                        }\n                        this.networkRetries = 0;\n                    }\n                    else {\n                        yield this._removeSession();\n                    }\n                }\n                else {\n                    if (this.persistSession) {\n                        yield this._saveSession(currentSession);\n                    }\n                    this._notifyAllSubscribers('SIGNED_IN', currentSession);\n                }\n            }\n            catch (err) {\n                console.error(err);\n                return;\n            }\n        });\n    }\n    _callRefreshToken(refreshToken) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            // refreshing is already in progress\n            if (this.refreshingDeferred) {\n                return this.refreshingDeferred.promise;\n            }\n            try {\n                this.refreshingDeferred = new Deferred();\n                if (!refreshToken) {\n                    throw new AuthSessionMissingError();\n                }\n                const { data, error } = yield this._refreshAccessToken(refreshToken);\n                if (error)\n                    throw error;\n                if (!data.session)\n                    throw new AuthSessionMissingError();\n                yield this._saveSession(data.session);\n                this._notifyAllSubscribers('TOKEN_REFRESHED', data.session);\n                const result = { session: data.session, error: null };\n                this.refreshingDeferred.resolve(result);\n                return result;\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    const result = { session: null, error };\n                    (_a = this.refreshingDeferred) === null || _a === void 0 ? void 0 : _a.resolve(result);\n                    return result;\n                }\n                (_b = this.refreshingDeferred) === null || _b === void 0 ? void 0 : _b.reject(error);\n                throw error;\n            }\n            finally {\n                this.refreshingDeferred = null;\n            }\n        });\n    }\n    _notifyAllSubscribers(event, session) {\n        this.stateChangeEmitters.forEach((x) => x.callback(event, session));\n    }\n    /**\n     * set currentSession and currentUser\n     * process to _startAutoRefreshToken if possible\n     */\n    _saveSession(session) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this.persistSession) {\n                this.inMemorySession = session;\n            }\n            const expiresAt = session.expires_at;\n            if (expiresAt) {\n                const timeNow = Math.round(Date.now() / 1000);\n                const expiresIn = expiresAt - timeNow;\n                const refreshDurationBeforeExpires = expiresIn > EXPIRY_MARGIN ? EXPIRY_MARGIN : 0.5;\n                this._startAutoRefreshToken((expiresIn - refreshDurationBeforeExpires) * 1000);\n            }\n            if (this.persistSession && session.expires_at) {\n                yield this._persistSession(session);\n            }\n        });\n    }\n    _persistSession(currentSession) {\n        return setItemAsync(this.storage, this.storageKey, currentSession);\n    }\n    _removeSession() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.persistSession) {\n                yield removeItemAsync(this.storage, this.storageKey);\n            }\n            else {\n                this.inMemorySession = null;\n            }\n            if (this.refreshTokenTimer) {\n                clearTimeout(this.refreshTokenTimer);\n            }\n        });\n    }\n    /**\n     * Clear and re-create refresh token timer\n     * @param value time intervals in milliseconds.\n     * @param session The current session.\n     */\n    _startAutoRefreshToken(value) {\n        if (this.refreshTokenTimer)\n            clearTimeout(this.refreshTokenTimer);\n        if (value <= 0 || !this.autoRefreshToken)\n            return;\n        this.refreshTokenTimer = setTimeout(() => __awaiter(this, void 0, void 0, function* () {\n            this.networkRetries++;\n            const { data: { session }, error: sessionError, } = yield this.getSession();\n            if (!sessionError && session) {\n                const { error } = yield this._callRefreshToken(session.refresh_token);\n                if (!error)\n                    this.networkRetries = 0;\n                if (error instanceof AuthRetryableFetchError &&\n                    this.networkRetries < NETWORK_FAILURE.MAX_RETRIES)\n                    this._startAutoRefreshToken(Math.pow(NETWORK_FAILURE.RETRY_INTERVAL, this.networkRetries) * 100); // exponential backoff\n            }\n        }), value);\n        if (typeof this.refreshTokenTimer.unref === 'function')\n            this.refreshTokenTimer.unref();\n    }\n    _handleVisibilityChange() {\n        if (!isBrowser() || !(window === null || window === void 0 ? void 0 : window.addEventListener)) {\n            return false;\n        }\n        try {\n            window === null || window === void 0 ? void 0 : window.addEventListener('visibilitychange', () => __awaiter(this, void 0, void 0, function* () {\n                if (document.visibilityState === 'visible') {\n                    yield this.initializePromise;\n                    yield this._recoverAndRefresh();\n                }\n            }));\n        }\n        catch (error) {\n            console.error('_handleVisibilityChange', error);\n        }\n    }\n    /**\n     * Generates the relevant login URL for a third-party provider.\n     * @param options.redirectTo A URL or mobile address to send the user to after they are confirmed.\n     * @param options.scopes A space-separated list of scopes granted to the OAuth application.\n     * @param options.queryParams An object of key-value pairs containing query parameters granted to the OAuth application.\n     */\n    _getUrlForProvider(provider, options) {\n        const urlParams = [`provider=${encodeURIComponent(provider)}`];\n        if (options === null || options === void 0 ? void 0 : options.redirectTo) {\n            urlParams.push(`redirect_to=${encodeURIComponent(options.redirectTo)}`);\n        }\n        if (options === null || options === void 0 ? void 0 : options.scopes) {\n            urlParams.push(`scopes=${encodeURIComponent(options.scopes)}`);\n        }\n        if (options === null || options === void 0 ? void 0 : options.queryParams) {\n            const query = new URLSearchParams(options.queryParams);\n            urlParams.push(query.toString());\n        }\n        return `${this.url}/authorize?${urlParams.join('&')}`;\n    }\n    _unenroll(params) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const { data: sessionData, error: sessionError } = yield this.getSession();\n            if (sessionError) {\n                return { data: null, error: sessionError };\n            }\n            return yield _request(this.fetch, 'DELETE', `${this.url}/factors/${params.factorId}`, {\n                headers: this.headers,\n                jwt: (_a = sessionData === null || sessionData === void 0 ? void 0 : sessionData.session) === null || _a === void 0 ? void 0 : _a.access_token,\n            });\n        });\n    }\n    /**\n     * Deletes a registered factor from GoTrue\n     * @param friendlyName Human readable name assigned to a device\n     * @param factorType device which we're validating against. Can only be TOTP for now.\n     * @param issuer domain which the user is enrolling with\n     */\n    _enroll(params) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            const { data: sessionData, error: sessionError } = yield this.getSession();\n            if (sessionError) {\n                return { data: null, error: sessionError };\n            }\n            const { data, error } = yield _request(this.fetch, 'POST', `${this.url}/factors`, {\n                body: {\n                    friendly_name: params.friendlyName,\n                    factor_type: params.factorType,\n                    issuer: params.issuer,\n                },\n                headers: this.headers,\n                jwt: (_a = sessionData === null || sessionData === void 0 ? void 0 : sessionData.session) === null || _a === void 0 ? void 0 : _a.access_token,\n            });\n            if (error) {\n                return { data: null, error };\n            }\n            if ((_b = data === null || data === void 0 ? void 0 : data.totp) === null || _b === void 0 ? void 0 : _b.qr_code) {\n                data.totp.qr_code = `data:image/svg+xml;utf-8,${data.totp.qr_code}`;\n            }\n            return { data, error: null };\n        });\n    }\n    /**\n     * Validates a device as part of the enrollment step.\n     * @param factorID System assigned identifier for authenticator device as returned by enroll\n     * @param code Code Generated by an authenticator device\n     */\n    _verify(params) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const { data: sessionData, error: sessionError } = yield this.getSession();\n            if (sessionError) {\n                return { data: null, error: sessionError };\n            }\n            const { data, error } = yield _request(this.fetch, 'POST', `${this.url}/factors/${params.factorId}/verify`, {\n                body: { code: params.code, challenge_id: params.challengeId },\n                headers: this.headers,\n                jwt: (_a = sessionData === null || sessionData === void 0 ? void 0 : sessionData.session) === null || _a === void 0 ? void 0 : _a.access_token,\n            });\n            if (error) {\n                return { data: null, error };\n            }\n            yield this._saveSession(Object.assign({ expires_at: Math.round(Date.now() / 1000) + data.expires_in }, data));\n            this._notifyAllSubscribers('MFA_CHALLENGE_VERIFIED', data);\n            return { data, error };\n        });\n    }\n    /**\n     * Creates a challenge which a user can verify against\n     * @param factorID System assigned identifier for authenticator device as returned by enroll\n     */\n    _challenge(params) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const { data: sessionData, error: sessionError } = yield this.getSession();\n            if (sessionError) {\n                return { data: null, error: sessionError };\n            }\n            return yield _request(this.fetch, 'POST', `${this.url}/factors/${params.factorId}/challenge`, {\n                headers: this.headers,\n                jwt: (_a = sessionData === null || sessionData === void 0 ? void 0 : sessionData.session) === null || _a === void 0 ? void 0 : _a.access_token,\n            });\n        });\n    }\n    _challengeAndVerify(params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { data: challengeData, error: challengeError } = yield this._challenge({\n                factorId: params.factorId,\n            });\n            if (challengeError) {\n                return { data: null, error: challengeError };\n            }\n            return yield this._verify({\n                factorId: params.factorId,\n                challengeId: challengeData.id,\n                code: params.code,\n            });\n        });\n    }\n    /**\n     * Displays all devices for a given user\n     */\n    _listFactors() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { data: { user }, error: userError, } = yield this.getUser();\n            if (userError) {\n                return { data: null, error: userError };\n            }\n            const factors = (user === null || user === void 0 ? void 0 : user.factors) || [];\n            const totp = factors.filter((factor) => factor.factor_type === 'totp' && factor.status === 'verified');\n            return {\n                data: {\n                    all: factors,\n                    totp,\n                },\n                error: null,\n            };\n        });\n    }\n    _getAuthenticatorAssuranceLevel() {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            const { data: { session }, error: sessionError, } = yield this.getSession();\n            if (sessionError) {\n                return { data: null, error: sessionError };\n            }\n            if (!session) {\n                return {\n                    data: { currentLevel: null, nextLevel: null, currentAuthenticationMethods: [] },\n                    error: null,\n                };\n            }\n            const payload = this._decodeJWT(session.access_token);\n            let currentLevel = null;\n            if (payload.aal) {\n                currentLevel = payload.aal;\n            }\n            let nextLevel = currentLevel;\n            const verifiedFactors = (_b = (_a = session.user.factors) === null || _a === void 0 ? void 0 : _a.filter((factor) => factor.status === 'verified')) !== null && _b !== void 0 ? _b : [];\n            if (verifiedFactors.length > 0) {\n                nextLevel = 'aal2';\n            }\n            const currentAuthenticationMethods = payload.amr || [];\n            return { data: { currentLevel, nextLevel, currentAuthenticationMethods }, error: null };\n        });\n    }\n}\n//# sourceMappingURL=GoTrueClient.js.map","import { GoTrueClient } from '@supabase/gotrue-js';\nexport class SupabaseAuthClient extends GoTrueClient {\n    constructor(options) {\n        super(options);\n    }\n}\n//# sourceMappingURL=SupabaseAuthClient.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { FunctionsClient } from '@supabase/functions-js';\nimport { PostgrestClient, } from '@supabase/postgrest-js';\nimport { RealtimeClient, } from '@supabase/realtime-js';\nimport { StorageClient as SupabaseStorageClient } from '@supabase/storage-js';\nimport { DEFAULT_HEADERS } from './lib/constants';\nimport { fetchWithAuth } from './lib/fetch';\nimport { stripTrailingSlash, applySettingDefaults } from './lib/helpers';\nimport { SupabaseAuthClient } from './lib/SupabaseAuthClient';\nconst DEFAULT_GLOBAL_OPTIONS = {\n    headers: DEFAULT_HEADERS,\n};\nconst DEFAULT_DB_OPTIONS = {\n    schema: 'public',\n};\nconst DEFAULT_AUTH_OPTIONS = {\n    autoRefreshToken: true,\n    persistSession: true,\n    detectSessionInUrl: true,\n};\nconst DEFAULT_REALTIME_OPTIONS = {};\n/**\n * Supabase Client.\n *\n * An isomorphic Javascript client for interacting with Postgres.\n */\nexport default class SupabaseClient {\n    /**\n     * Create a new client for use in the browser.\n     * @param supabaseUrl The unique Supabase URL which is supplied when you create a new project in your project dashboard.\n     * @param supabaseKey The unique Supabase Key which is supplied when you create a new project in your project dashboard.\n     * @param options.db.schema You can switch in between schemas. The schema needs to be on the list of exposed schemas inside Supabase.\n     * @param options.auth.autoRefreshToken Set to \"true\" if you want to automatically refresh the token before expiring.\n     * @param options.auth.persistSession Set to \"true\" if you want to automatically save the user session into local storage.\n     * @param options.auth.detectSessionInUrl Set to \"true\" if you want to automatically detects OAuth grants in the URL and signs in the user.\n     * @param options.realtime Options passed along to realtime-js constructor.\n     * @param options.global.fetch A custom fetch implementation.\n     * @param options.global.headers Any additional headers to send with each network request.\n     */\n    constructor(supabaseUrl, supabaseKey, options) {\n        var _a, _b, _c, _d, _e, _f, _g, _h;\n        this.supabaseUrl = supabaseUrl;\n        this.supabaseKey = supabaseKey;\n        if (!supabaseUrl)\n            throw new Error('supabaseUrl is required.');\n        if (!supabaseKey)\n            throw new Error('supabaseKey is required.');\n        const _supabaseUrl = stripTrailingSlash(supabaseUrl);\n        this.realtimeUrl = `${_supabaseUrl}/realtime/v1`.replace(/^http/i, 'ws');\n        this.authUrl = `${_supabaseUrl}/auth/v1`;\n        this.storageUrl = `${_supabaseUrl}/storage/v1`;\n        const isPlatform = _supabaseUrl.match(/(supabase\\.co)|(supabase\\.in)/);\n        if (isPlatform) {\n            const urlParts = _supabaseUrl.split('.');\n            this.functionsUrl = `${urlParts[0]}.functions.${urlParts[1]}.${urlParts[2]}`;\n        }\n        else {\n            this.functionsUrl = `${_supabaseUrl}/functions/v1`;\n        }\n        // default storage key uses the supabase project ref as a namespace\n        const defaultStorageKey = `sb-${new URL(this.authUrl).hostname.split('.')[0]}-auth-token`;\n        const DEFAULTS = {\n            db: DEFAULT_DB_OPTIONS,\n            realtime: DEFAULT_REALTIME_OPTIONS,\n            auth: Object.assign(Object.assign({}, DEFAULT_AUTH_OPTIONS), { storageKey: defaultStorageKey }),\n            global: DEFAULT_GLOBAL_OPTIONS,\n        };\n        const settings = applySettingDefaults(options !== null && options !== void 0 ? options : {}, DEFAULTS);\n        this.storageKey = (_b = (_a = settings.auth) === null || _a === void 0 ? void 0 : _a.storageKey) !== null && _b !== void 0 ? _b : '';\n        this.headers = (_d = (_c = settings.global) === null || _c === void 0 ? void 0 : _c.headers) !== null && _d !== void 0 ? _d : {};\n        this.auth = this._initSupabaseAuthClient((_e = settings.auth) !== null && _e !== void 0 ? _e : {}, this.headers, (_f = settings.global) === null || _f === void 0 ? void 0 : _f.fetch);\n        this.fetch = fetchWithAuth(supabaseKey, this._getAccessToken.bind(this), (_g = settings.global) === null || _g === void 0 ? void 0 : _g.fetch);\n        this.realtime = this._initRealtimeClient(Object.assign({ headers: this.headers }, settings.realtime));\n        this.rest = new PostgrestClient(`${_supabaseUrl}/rest/v1`, {\n            headers: this.headers,\n            schema: (_h = settings.db) === null || _h === void 0 ? void 0 : _h.schema,\n            fetch: this.fetch,\n        });\n        this._listenForAuthEvents();\n    }\n    /**\n     * Supabase Functions allows you to deploy and invoke edge functions.\n     */\n    get functions() {\n        return new FunctionsClient(this.functionsUrl, {\n            headers: this.headers,\n            customFetch: this.fetch,\n        });\n    }\n    /**\n     * Supabase Storage allows you to manage user-generated content, such as photos or videos.\n     */\n    get storage() {\n        return new SupabaseStorageClient(this.storageUrl, this.headers, this.fetch);\n    }\n    from(relation) {\n        return this.rest.from(relation);\n    }\n    /**\n     * Perform a function call.\n     *\n     * @param fn  The function name to call.\n     * @param args  The parameters to pass to the function call.\n     * @param options.head   When set to true, no data will be returned.\n     * @param options.count  Count algorithm to use to count rows in a table.\n     *\n     */\n    rpc(fn, args = {}, options) {\n        return this.rest.rpc(fn, args, options);\n    }\n    /**\n     * Creates a Realtime channel with Broadcast, Presence, and Postgres Changes.\n     *\n     * @param {string} name - The name of the Realtime channel.\n     * @param {Object} opts - The options to pass to the Realtime channel.\n     *\n     */\n    channel(name, opts = { config: {} }) {\n        return this.realtime.channel(name, opts);\n    }\n    /**\n     * Returns all Realtime channels.\n     */\n    getChannels() {\n        return this.realtime.getChannels();\n    }\n    /**\n     * Unsubscribes and removes Realtime channel from Realtime client.\n     *\n     * @param {RealtimeChannel} channel - The name of the Realtime channel.\n     *\n     */\n    removeChannel(channel) {\n        return this.realtime.removeChannel(channel);\n    }\n    /**\n     * Unsubscribes and removes all Realtime channels from Realtime client.\n     */\n    removeAllChannels() {\n        return this.realtime.removeAllChannels();\n    }\n    _getAccessToken() {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            const { data } = yield this.auth.getSession();\n            return (_b = (_a = data.session) === null || _a === void 0 ? void 0 : _a.access_token) !== null && _b !== void 0 ? _b : null;\n        });\n    }\n    _initSupabaseAuthClient({ autoRefreshToken, persistSession, detectSessionInUrl, storage, storageKey, }, headers, fetch) {\n        const authHeaders = {\n            Authorization: `Bearer ${this.supabaseKey}`,\n            apikey: `${this.supabaseKey}`,\n        };\n        return new SupabaseAuthClient({\n            url: this.authUrl,\n            headers: Object.assign(Object.assign({}, authHeaders), headers),\n            storageKey: storageKey,\n            autoRefreshToken,\n            persistSession,\n            detectSessionInUrl,\n            storage,\n            fetch,\n        });\n    }\n    _initRealtimeClient(options) {\n        return new RealtimeClient(this.realtimeUrl, Object.assign(Object.assign({}, options), { params: Object.assign({ apikey: this.supabaseKey }, options === null || options === void 0 ? void 0 : options.params) }));\n    }\n    _listenForAuthEvents() {\n        let data = this.auth.onAuthStateChange((event, session) => {\n            this._handleTokenChanged(event, session === null || session === void 0 ? void 0 : session.access_token, 'CLIENT');\n        });\n        return data;\n    }\n    _handleTokenChanged(event, token, source) {\n        if ((event === 'TOKEN_REFRESHED' || event === 'SIGNED_IN') &&\n            this.changedAccessToken !== token) {\n            // Token has changed\n            this.realtime.setAuth(token !== null && token !== void 0 ? token : null);\n            this.changedAccessToken = token;\n        }\n        else if (event === 'SIGNED_OUT' || event === 'USER_DELETED') {\n            // Token is removed\n            this.realtime.setAuth(this.supabaseKey);\n            if (source == 'STORAGE')\n                this.auth.signOut();\n        }\n    }\n}\n//# sourceMappingURL=SupabaseClient.js.map","import SupabaseClient from './SupabaseClient';\nexport * from '@supabase/gotrue-js';\nexport { FunctionsHttpError, FunctionsFetchError, FunctionsRelayError, FunctionsError, } from '@supabase/functions-js';\nexport * from '@supabase/realtime-js';\nexport { default as SupabaseClient } from './SupabaseClient';\n/**\n * Creates a new Supabase Client.\n */\nexport const createClient = (supabaseUrl, supabaseKey, options) => {\n    return new SupabaseClient(supabaseUrl, supabaseKey, options);\n};\n//# sourceMappingURL=index.js.map","import { createClient } from \"@supabase/supabase-js\";\nimport { defu } from \"defu\";\nimport { useSupabaseToken } from \"./useSupabaseToken.mjs\";\nimport { useRuntimeConfig, useNuxtApp } from \"#imports\";\nexport const useSupabaseClient = () => {\n  const nuxtApp = useNuxtApp();\n  const token = useSupabaseToken();\n  const Authorization = token.value ? `Bearer ${token.value}` : void 0;\n  const { supabase: { url, key, client: clientOptions } } = useRuntimeConfig().public;\n  const options = defu(clientOptions, { global: { headers: { Authorization } } });\n  const recreateClient = nuxtApp._supabaseClient?.headers.Authorization !== Authorization;\n  if (!nuxtApp._supabaseClient || recreateClient) {\n    nuxtApp._supabaseClient = createClient(url, key, options);\n  }\n  return nuxtApp._supabaseClient;\n};\n","import { useSupabaseUser } from \"../composables/useSupabaseUser.mjs\";\nimport { useSupabaseClient } from \"../composables/useSupabaseClient.mjs\";\nimport { useSupabaseToken } from \"../composables/useSupabaseToken.mjs\";\nimport { redirectToLogin } from \"../utils/redirect.mjs\";\nimport { defineNuxtPlugin, useRoute } from \"#imports\";\nexport default defineNuxtPlugin(async () => {\n  const user = useSupabaseUser();\n  const client = useSupabaseClient();\n  const token = useSupabaseToken();\n  const route = useRoute();\n  if (!token.value) {\n    return;\n  }\n  const { data: { user: supabaseUser }, error } = await client.auth.getUser(token.value);\n  if (error) {\n    token.value = null;\n    user.value = null;\n    redirectToLogin(route.path);\n  } else {\n    user.value = supabaseUser;\n  }\n});\n","// For Nuxt 3\nimport { library, config } from '@fortawesome/fontawesome-svg-core'\nimport { FontAwesomeIcon } from '@fortawesome/vue-fontawesome'\nimport { fas } from '@fortawesome/free-solid-svg-icons'\nimport { fab } from '@fortawesome/free-brands-svg-icons'\n\n// This is important, we are going to let Nuxt worry about the CSS\nconfig.autoAddCss = false\n\n// You can add your icons directly in this plugin. See other examples for how you\n// can add other styles or just individual icons.\nlibrary.add(fas)\nlibrary.add(fab)\n\nexport default defineNuxtPlugin((nuxtApp) => {\n  nuxtApp.vueApp.component('font-awesome-icon', FontAwesomeIcon, {})\n})\n","import _nuxt_components_plugin_mjs_KR1HBZs4kY from \"/Users/selie/Documents/Hacks/NuxtSupabaseApp/.nuxt/components.plugin.mjs\";\nimport node_modules_nuxt_dist_head_runtime_lib_vueuse_head_plugin_mjs_D7WGfuP1A0 from \"/Users/selie/Documents/Hacks/NuxtSupabaseApp/node_modules/nuxt/dist/head/runtime/lib/vueuse-head.plugin.mjs\";\nimport node_modules_nuxt_dist_pages_runtime_router_mjs_qNv5Ky2ZmB from \"/Users/selie/Documents/Hacks/NuxtSupabaseApp/node_modules/nuxt/dist/pages/runtime/router.mjs\";\nimport node_modules__64nuxtjs_color_mode_dist_runtime_plugin_server_mjs_XNCxeHyTuP from \"/Users/selie/Documents/Hacks/NuxtSupabaseApp/node_modules/@nuxtjs/color-mode/dist/runtime/plugin.server.mjs\";\nimport node_modules__64nuxt_content_dist_runtime_plugins_ws_mjs_JuoSZH52OQ from \"/Users/selie/Documents/Hacks/NuxtSupabaseApp/node_modules/@nuxt/content/dist/runtime/plugins/ws.mjs\";\nimport node_modules__64nuxtjs_supabase_dist_runtime_plugins_auth_redirect_mjs_hxxEaFfrIx from \"/Users/selie/Documents/Hacks/NuxtSupabaseApp/node_modules/@nuxtjs/supabase/dist/runtime/plugins/auth-redirect.mjs\";\nimport node_modules__64nuxtjs_supabase_dist_runtime_plugins_supabase_server_mjs_6VOknHCOlQ from \"/Users/selie/Documents/Hacks/NuxtSupabaseApp/node_modules/@nuxtjs/supabase/dist/runtime/plugins/supabase.server.mjs\";\nimport plugins_fontawesome_js_klhsrycjcK from \"/Users/selie/Documents/Hacks/NuxtSupabaseApp/plugins/fontawesome.js\";\nexport default [\n  _nuxt_components_plugin_mjs_KR1HBZs4kY,\n  node_modules_nuxt_dist_head_runtime_lib_vueuse_head_plugin_mjs_D7WGfuP1A0,\n  node_modules_nuxt_dist_pages_runtime_router_mjs_qNv5Ky2ZmB,\n  node_modules__64nuxtjs_color_mode_dist_runtime_plugin_server_mjs_XNCxeHyTuP,\n  node_modules__64nuxt_content_dist_runtime_plugins_ws_mjs_JuoSZH52OQ,\n  node_modules__64nuxtjs_supabase_dist_runtime_plugins_auth_redirect_mjs_hxxEaFfrIx,\n  node_modules__64nuxtjs_supabase_dist_runtime_plugins_supabase_server_mjs_6VOknHCOlQ,\n  plugins_fontawesome_js_klhsrycjcK\n]","import { defineComponent, h } from \"vue\";\nconst Fragment = defineComponent({\n  setup(_props, { slots }) {\n    return () => slots.default?.();\n  }\n});\nexport const _wrapIf = (component, props, slots) => {\n  return { default: () => props ? h(component, props === true ? {} : props, slots) : h(Fragment, {}, slots) };\n};\n","export default {\n  default: () => import(\"/Users/selie/Documents/Hacks/NuxtSupabaseApp/layouts/default.vue\").then(m => m.default || m)\n}","import { computed, defineComponent, h, inject, nextTick, onMounted, Transition, unref } from \"vue\";\nimport { _wrapIf } from \"./utils.mjs\";\nimport { useRoute } from \"#app\";\nimport { useRoute as useVueRouterRoute } from \"#build/pages\";\nimport layouts from \"#build/layouts\";\nimport { appLayoutTransition as defaultLayoutTransition } from \"#build/nuxt.config.mjs\";\nconst LayoutLoader = defineComponent({\n  props: {\n    name: String,\n    ...process.dev ? { hasTransition: Boolean } : {}\n  },\n  async setup(props, context) {\n    let vnode;\n    if (process.dev && process.client) {\n      onMounted(() => {\n        nextTick(() => {\n          if (props.name && [\"#comment\", \"#text\"].includes(vnode?.el?.nodeName)) {\n            console.warn(`[nuxt] \\`${props.name}\\` layout does not have a single root node and will cause errors when navigating between routes.`);\n          }\n        });\n      });\n    }\n    const LayoutComponent = await layouts[props.name]().then((r) => r.default || r);\n    return () => {\n      if (process.dev && process.client && props.hasTransition) {\n        vnode = h(LayoutComponent, {}, context.slots);\n        return vnode;\n      }\n      return h(LayoutComponent, {}, context.slots);\n    };\n  }\n});\nexport default defineComponent({\n  props: {\n    name: {\n      type: [String, Boolean, Object],\n      default: null\n    }\n  },\n  setup(props, context) {\n    const injectedRoute = inject(\"_route\");\n    const route = injectedRoute === useRoute() ? useVueRouterRoute() : injectedRoute;\n    const layout = computed(() => unref(props.name) ?? route.meta.layout ?? \"default\");\n    let vnode;\n    let _layout;\n    if (process.dev && process.client) {\n      onMounted(() => {\n        nextTick(() => {\n          if (_layout && _layout in layouts && [\"#comment\", \"#text\"].includes(vnode?.el?.nodeName)) {\n            console.warn(`[nuxt] \\`${_layout}\\` layout does not have a single root node and will cause errors when navigating between routes.`);\n          }\n        });\n      });\n    }\n    return () => {\n      const hasLayout = layout.value && layout.value in layouts;\n      if (process.dev && layout.value && !hasLayout && layout.value !== \"default\") {\n        console.warn(`Invalid layout \\`${layout.value}\\` selected.`);\n      }\n      const transitionProps = route.meta.layoutTransition ?? defaultLayoutTransition;\n      return _wrapIf(Transition, hasLayout && transitionProps, {\n        default: () => _wrapIf(LayoutLoader, hasLayout && { key: layout.value, name: layout.value, hasTransition: process.dev ? !!transitionProps : void 0 }, context.slots).default()\n      }).default();\n    };\n  }\n});\n","import { computed, defineComponent, h, onBeforeUnmount, ref } from \"vue\";\nimport { useNuxtApp } from \"#app\";\nexport default defineComponent({\n  name: \"NuxtLoadingIndicator\",\n  props: {\n    throttle: {\n      type: Number,\n      default: 200\n    },\n    duration: {\n      type: Number,\n      default: 2e3\n    },\n    height: {\n      type: Number,\n      default: 3\n    },\n    color: {\n      type: String,\n      default: \"repeating-linear-gradient(to right,#00dc82 0%,#34cdfe 50%,#0047e1 100%)\"\n    }\n  },\n  setup(props, { slots }) {\n    const indicator = useLoadingIndicator({\n      duration: props.duration,\n      throttle: props.throttle\n    });\n    const nuxtApp = useNuxtApp();\n    nuxtApp.hook(\"page:start\", indicator.start);\n    nuxtApp.hook(\"page:finish\", indicator.finish);\n    onBeforeUnmount(() => indicator.clear);\n    return () => h(\"div\", {\n      class: \"nuxt-loading-indicator\",\n      style: {\n        position: \"fixed\",\n        top: 0,\n        right: 0,\n        left: 0,\n        pointerEvents: \"none\",\n        width: `${indicator.progress.value}%`,\n        height: `${props.height}px`,\n        opacity: indicator.isLoading.value ? 1 : 0,\n        background: props.color,\n        backgroundSize: `${100 / indicator.progress.value * 100}% auto`,\n        transition: \"width 0.1s, height 0.4s, opacity 0.4s\",\n        zIndex: 999999\n      }\n    }, slots);\n  }\n});\nfunction useLoadingIndicator(opts) {\n  const progress = ref(0);\n  const isLoading = ref(false);\n  const step = computed(() => 1e4 / opts.duration);\n  let _timer = null;\n  let _throttle = null;\n  function start() {\n    clear();\n    progress.value = 0;\n    isLoading.value = true;\n    if (opts.throttle) {\n      if (process.client) {\n        _throttle = setTimeout(_startTimer, opts.throttle);\n      }\n    } else {\n      _startTimer();\n    }\n  }\n  function finish() {\n    progress.value = 100;\n    _hide();\n  }\n  function clear() {\n    clearInterval(_timer);\n    clearTimeout(_throttle);\n    _timer = null;\n    _throttle = null;\n  }\n  function _increase(num) {\n    progress.value = Math.min(100, progress.value + num);\n  }\n  function _hide() {\n    clear();\n    if (process.client) {\n      setTimeout(() => {\n        isLoading.value = false;\n        setTimeout(() => {\n          progress.value = 0;\n        }, 400);\n      }, 500);\n    }\n  }\n  function _startTimer() {\n    if (process.client) {\n      _timer = setInterval(() => {\n        _increase(step.value);\n      }, 100);\n    }\n  }\n  return {\n    progress,\n    isLoading,\n    start,\n    finish,\n    clear\n  };\n}\n","import { KeepAlive, h } from \"vue\";\nconst interpolatePath = (route, match) => {\n  return match.path.replace(/(:\\w+)\\([^)]+\\)/g, \"$1\").replace(/(:\\w+)[?+*]/g, \"$1\").replace(/:\\w+/g, (r) => route.params[r.slice(1)]?.toString() || \"\");\n};\nexport const generateRouteKey = (override, routeProps) => {\n  const matchedRoute = routeProps.route.matched.find((m) => m.components?.default === routeProps.Component.type);\n  const source = override ?? matchedRoute?.meta.key ?? (matchedRoute && interpolatePath(routeProps.route, matchedRoute));\n  return typeof source === \"function\" ? source(routeProps.route) : source;\n};\nexport const wrapInKeepAlive = (props, children) => {\n  return { default: () => process.client && props ? h(KeepAlive, props === true ? {} : props, children) : children };\n};\n","import { computed, defineComponent, h, provide, reactive, onMounted, nextTick, Suspense, Transition } from \"vue\";\nimport { RouterView } from \"vue-router\";\nimport { defu } from \"defu\";\nimport { generateRouteKey, wrapInKeepAlive } from \"./utils.mjs\";\nimport { useNuxtApp } from \"#app\";\nimport { _wrapIf } from \"#app/components/utils\";\nimport { appPageTransition as defaultPageTransition, appKeepalive as defaultKeepaliveConfig } from \"#build/nuxt.config.mjs\";\nexport default defineComponent({\n  name: \"NuxtPage\",\n  inheritAttrs: false,\n  props: {\n    name: {\n      type: String\n    },\n    transition: {\n      type: [Boolean, Object],\n      default: void 0\n    },\n    keepalive: {\n      type: [Boolean, Object],\n      default: void 0\n    },\n    route: {\n      type: Object\n    },\n    pageKey: {\n      type: [Function, String],\n      default: null\n    }\n  },\n  setup(props, { attrs }) {\n    const nuxtApp = useNuxtApp();\n    return () => {\n      return h(RouterView, { name: props.name, route: props.route, ...attrs }, {\n        default: (routeProps) => {\n          if (!routeProps.Component) {\n            return;\n          }\n          const key = generateRouteKey(props.pageKey, routeProps);\n          const done = nuxtApp.deferHydration();\n          const hasTransition = !!(props.transition ?? routeProps.route.meta.pageTransition ?? defaultPageTransition);\n          const transitionProps = hasTransition && _mergeTransitionProps([\n            props.transition,\n            routeProps.route.meta.pageTransition,\n            defaultPageTransition,\n            { onAfterLeave: () => {\n              nuxtApp.callHook(\"page:transition:finish\", routeProps.Component);\n            } }\n          ].filter(Boolean));\n          return _wrapIf(\n            Transition,\n            hasTransition && transitionProps,\n            wrapInKeepAlive(\n              props.keepalive ?? routeProps.route.meta.keepalive ?? defaultKeepaliveConfig,\n              h(Suspense, {\n                onPending: () => nuxtApp.callHook(\"page:start\", routeProps.Component),\n                onResolve: () => {\n                  nextTick(() => nuxtApp.callHook(\"page:finish\", routeProps.Component).finally(done));\n                }\n              }, { default: () => h(Component, { key, routeProps, pageKey: key, hasTransition }) })\n            )\n          ).default();\n        }\n      });\n    };\n  }\n});\nfunction _toArray(val) {\n  return Array.isArray(val) ? val : val ? [val] : [];\n}\nfunction _mergeTransitionProps(routeProps) {\n  const _props = routeProps.map((prop) => ({\n    ...prop,\n    onAfterLeave: _toArray(prop.onAfterLeave)\n  }));\n  return defu(..._props);\n}\nconst Component = defineComponent({\n  props: [\"routeProps\", \"pageKey\", \"hasTransition\"],\n  setup(props) {\n    const previousKey = props.pageKey;\n    const previousRoute = props.routeProps.route;\n    const route = {};\n    for (const key in props.routeProps.route) {\n      route[key] = computed(() => previousKey === props.pageKey ? props.routeProps.route[key] : previousRoute[key]);\n    }\n    provide(\"_route\", reactive(route));\n    let vnode;\n    if (process.dev && process.client && props.hasTransition) {\n      onMounted(() => {\n        nextTick(() => {\n          if ([\"#comment\", \"#text\"].includes(vnode?.el?.nodeName)) {\n            const filename = (vnode?.type).__file;\n            console.warn(`[nuxt] \\`${filename}\\` does not have a single root node and will cause errors when navigating between routes.`);\n          }\n        });\n      });\n    }\n    return () => {\n      if (process.dev && process.client) {\n        vnode = h(props.routeProps.Component);\n        return vnode;\n      }\n      return h(props.routeProps.Component);\n    };\n  }\n});\n","<template>\n  <div>\n    <NuxtLayout>\n      <NuxtLoadingIndicator color=\"repeating-linear-gradient(to right,#dab7ff 0%,#0047e1 100%\" />\n      <NuxtPage />\n    </NuxtLayout>\n  </div>\n</template>\n","<template>\n  <Suspense @resolve=\"onResolve\">\n    <ErrorComponent v-if=\"error\" :error=\"error\" />\n    <AppComponent v-else />\n  </Suspense>\n</template>\n\n<script setup>\nimport { defineAsyncComponent, onErrorCaptured, provide } from 'vue'\nimport { callWithNuxt, isNuxtError, showError, useError, useRoute, useNuxtApp } from '#app'\nimport AppComponent from '#build/app-component.mjs'\n\nconst ErrorComponent = defineAsyncComponent(() => import('#build/error-component.mjs').then(r => r.default || r))\n\nconst nuxtApp = useNuxtApp()\nconst onResolve = nuxtApp.deferHydration()\n\n// Inject default route (outside of pages) as active route\nprovide('_route', useRoute())\n\n// vue:setup hook\nconst results = nuxtApp.hooks.callHookWith(hooks => hooks.map(hook => hook()), 'vue:setup')\nif (process.dev && results && results.some(i => i && 'then' in i)) {\n  console.error('[nuxt] Error in `vue:setup`. Callbacks must be synchronous.')\n}\n\n// error handling\nconst error = useError()\nonErrorCaptured((err, target, info) => {\n  nuxtApp.hooks.callHook('vue:error', err, target, info).catch(hookError => console.error('[nuxt] Error in `vue:error` hook', hookError))\n  if (process.server || (isNuxtError(err) && (err.fatal || err.unhandled))) {\n    callWithNuxt(nuxtApp, showError, [err])\n  }\n})\n</script>\n","import { createSSRApp, createApp, nextTick } from \"vue\";\nimport { $fetch } from \"ofetch\";\nimport { baseURL } from \"#build/paths.mjs\";\nimport { createNuxtApp, applyPlugins, normalizePlugins } from \"#app\";\nimport \"#build/css\";\nimport _plugins from \"#build/plugins\";\nimport RootComponent from \"#build/root-component.mjs\";\nimport { appRootId } from \"#build/nuxt.config.mjs\";\nif (!globalThis.$fetch) {\n  globalThis.$fetch = $fetch.create({\n    baseURL: baseURL()\n  });\n}\nlet entry;\nconst plugins = normalizePlugins(_plugins);\nif (process.server) {\n  entry = async function createNuxtAppServer(ssrContext) {\n    const vueApp = createApp(RootComponent);\n    const nuxt = createNuxtApp({ vueApp, ssrContext });\n    try {\n      await applyPlugins(nuxt, plugins);\n      await nuxt.hooks.callHook(\"app:created\", vueApp);\n    } catch (err) {\n      await nuxt.callHook(\"app:error\", err);\n      nuxt.payload.error = nuxt.payload.error || err;\n    }\n    return vueApp;\n  };\n}\nif (process.client) {\n  if (process.dev && import.meta.webpackHot) {\n    import.meta.webpackHot.accept();\n  }\n  entry = async function initApp() {\n    const isSSR = Boolean(window.__NUXT__?.serverRendered);\n    const vueApp = isSSR ? createSSRApp(RootComponent) : createApp(RootComponent);\n    const nuxt = createNuxtApp({ vueApp });\n    try {\n      await applyPlugins(nuxt, plugins);\n    } catch (err) {\n      await nuxt.callHook(\"app:error\", err);\n      nuxt.payload.error = nuxt.payload.error || err;\n    }\n    try {\n      await nuxt.hooks.callHook(\"app:created\", vueApp);\n      await nuxt.hooks.callHook(\"app:beforeMount\", vueApp);\n      vueApp.mount(\"#\" + appRootId);\n      await nuxt.hooks.callHook(\"app:mounted\", vueApp);\n      await nextTick();\n    } catch (err) {\n      await nuxt.callHook(\"app:error\", err);\n      nuxt.payload.error = nuxt.payload.error || err;\n    }\n  };\n  entry().catch((error) => {\n    console.error(\"Error while mounting app:\", error);\n  });\n}\nexport default (ctx) => entry(ctx);\n"],"names":["useRuntimeConfig","name","_a","provide","plugins","_plugins","_createError","_b","componentName","_c","useHead","document","version","_47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47_91_46_46_46slug_93_46vueMeta","_47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47about_47index_46vueMeta","_47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47about_47zh_46vueMeta","_47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47article_47_91_46_46_46slug_93_46vueMeta","_47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47article_47index_46vueMeta","_47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47components_46vueMeta","_47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47gallery_46vueMeta","_47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47game_47gobang_46vueMeta","_47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47index_46vueMeta","_47Users_47selie_47Documents_47Hacks_47NuxtSupabaseApp_47pages_47projects_46vueMeta","defaultPageTransition","__executeAsync","_d","entry","createError","isEqual","__awaiter","this","resolveFetch","url","res","config","fetch","DEFAULT_HEADERS","noop","utils","require$$0","debug","global","bufferAllocUnsafe","require$$1","WebSocketFrame","Buffer","EventEmitter","require$$2","FastBufferListModule","BufferList","FastBufferList","self","require$$3","util","require$$4","WebSocketConnection","description","key","crypto","WebSocketRequest","index","array","obj","extend","WebSocketServer","require$$5","require$$6","require$$7","WebSocketClient","i","WebSocketRouterRequest","require$$8","SOCKET_STATES","CHANNEL_STATES","CHANNEL_EVENTS","TRANSPORTS","CONNECTION_STATE","h","REALTIME_PRESENCE_LISTEN_EVENTS","PostgresTypes","REALTIME_POSTGRES_CHANGES_LISTEN_EVENT","REALTIME_LISTEN_TYPES","REALTIME_SUBSCRIBE_STATES","ref","onClose","_e","_f","type","Transformers.convertChangeData","w3cwebsocket","_getErrorMessage","handleError","_getRequestParams","_handleRequest","CrossFetchHeaders","DEFAULT_DB_OPTIONS","DEFAULT_AUTH_OPTIONS","DEFAULT_REALTIME_OPTIONS","DEFAULT_GLOBAL_OPTIONS","__rest","expiresAt","error","_g","_h","SupabaseStorageClient","useVueRouterRoute","layout","defaultLayoutTransition","defaultKeepaliveConfig","_push","RootComponent"],"mappings":"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"}